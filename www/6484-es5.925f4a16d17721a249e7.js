!function(){function i(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function t(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}(self.webpackChunkhub=self.webpackChunkhub||[]).push([[6484],{86484:function(e,n,o){"use strict";o.r(n),o.d(n,{NotificationPageModule:function(){return y}});var a=o(38583),s=o(90665),c=o(47823),r=o(10649),l=o(92340),f=o(10639),u=o(89985),g=o(49481),h=o(68366);function d(i,t){if(1&i){var e=f.EpF();f.TgZ(0,"ion-row"),f._UZ(1,"ion-col",4),f.TgZ(2,"ion-col",5),f.TgZ(3,"ion-icon",6),f.NdJ("click",function(){return f.CHM(e),f.oxw().onDelete()}),f.qZA(),f.qZA(),f.qZA()}}function p(i,t){if(1&i){var e=f.EpF();f.TgZ(0,"ion-row"),f._UZ(1,"ion-col",7),f.TgZ(2,"ion-col",8),f.TgZ(3,"ion-checkbox",9),f.NdJ("ionChange",function(){var i=f.CHM(e).$implicit;return f.oxw().onDeleteDataSelect(i.id)}),f.qZA(),f.qZA(),f.TgZ(4,"ion-col",10),f.NdJ("click",function(){var i=f.CHM(e).$implicit;return f.oxw().onNotificationDetaliPage(i.id,i.form_id,i.form_type,i.is_seen)}),f._uU(5),f.qZA(),f._UZ(6,"ion-col",7),f.qZA()}if(2&i){var n=t.$implicit;f.xp6(5),f.hij(" ",n.message," ")}}var v,m,N=[{path:"",component:(v=function(){function e(t,n,o){i(this,e),this.nav=t,this.globalService=n,this.sharedService=o,this.pName="Notifications",this.type=l.N.allType,this.notificationId=[],this.notificationData="",this.loggedInUser="",this.size=10,this.totalElements=0,this.pageNumber=0,this.offset=0}var n,o,a;return n=e,(o=[{key:"ngOnInit",value:function(){this.loggedInUser=JSON.parse(localStorage.getItem("userDetails")),this.onNotificationLoad()}},{key:"onNotificationLoad",value:function(){var i=this;this.globalService.getData("notification/getNotificationList/"+this.loggedInUser.id).subscribe(function(t){t&&t.row_count>0?(i.notificationData=t.data,i.totalElements=t.row_count):i.notificationData=[]})}},{key:"filterArrayData",value:function(i){var t=[];return t.result=!1,this.notificationId.filter(function(e,n){e==i&&(t.result=!0,t.index=n)}),t}},{key:"onDeleteDataSelect",value:function(i){var t=this.filterArrayData(i);t.result?this.notificationId.splice(t.index,1):this.notificationId.push(i)}},{key:"onDelete",value:function(){var i=this;if(0!=this.notificationId.length){this.globalService.presentLoading();var t=new FormData;t.append("id",JSON.stringify(this.notificationId)),this.globalService.postData("notification/deleteNotificationByNotificationID",t).subscribe(function(t){t&&t.status&&i.onNotificationLoad(),i.globalService.presentToast(t.message),i.globalService.dismissLoading()})}}},{key:"onNotificationDetaliPage",value:function(i,t,e,n){var o=this;e==this.globalService.formType_user?this.nav.navigateRoot("/home/safety-menu/incident-details/"+t):e==this.globalService.formType_investigator&&this.nav.navigateForward("investigation-view/"+t),0==n&&this.globalService.getData("notification/changeNotificationSeen/"+i).subscribe(function(i){i.status&&(o.sharedService.notViewNotiCount=0!=o.sharedService.notViewNotiCount?o.sharedService.notViewNotiCount-1:0)})}}])&&t(n.prototype,o),a&&t(n,a),e}(),v.\u0275fac=function(i){return new(i||v)(f.Y36(c.SH),f.Y36(u.U),f.Y36(g.F))},v.\u0275cmp=f.Xpm({type:v,selectors:[["app-notification"]],decls:5,vars:3,consts:[[3,"pageName"],[1,"container"],[4,"ngIf"],[4,"ngFor","ngForOf"],["size","10"],["size","2"],["name","trash",3,"click"],["size-lg","2","size-md","2","size-sm","2","size-xl","2","size-xs","2"],["size-lg","1","size-md","1","size-sm","2","size-xl","2","size-xs","2"],[3,"ionChange"],["size-lg","7","size-md","7","size-sm","6","size-xl","6","size-xs","6",3,"click"]],template:function(i,t){1&i&&(f.TgZ(0,"ion-content"),f._UZ(1,"app-header",0),f.TgZ(2,"div",1),f.YNc(3,d,4,0,"ion-row",2),f.YNc(4,p,7,1,"ion-row",3),f.qZA(),f.qZA()),2&i&&(f.xp6(1),f.Q6J("pageName",t.pName),f.xp6(2),f.Q6J("ngIf",t.notificationData.length>0),f.xp6(1),f.Q6J("ngForOf",t.notificationData))},directives:[c.W2,h.G,a.O5,a.sg,c.Nd,c.wI,c.gu,c.nz,c.w],styles:[""]}),v)}],b=function(){var t=function t(){i(this,t)};return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[[r.Bz.forChild(N)],r.Bz]}),t}(),w=o(69270),y=((m=function t(){i(this,t)}).\u0275fac=function(i){return new(i||m)},m.\u0275mod=f.oAB({type:m}),m.\u0275inj=f.cJS({imports:[[a.ez,s.u5,c.Pc,b,w.I]]}),m)}}])}();