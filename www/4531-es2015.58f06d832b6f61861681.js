(self.webpackChunkhub=self.webpackChunkhub||[]).push([[4531],{34531:function(e,i,t){"use strict";t.r(i),t.d(i,{IncidentFormEditPageModule:function(){return Qe}});var n=t(38583),o=t(90665),a=t(47823),s=t(10649),r=t(64762),l=t(92340),c=t(29081),_=t(91681),m=t(79044),u=t(10639),h=t(89985),p=t(49481),d=t(84267),g=t(80513);function f(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"ion-button",22),u.NdJ("click",function(){u.CHM(e);const i=u.oxw().$implicit;return u.oxw().onSelectTabItem(i.val)}),u.TgZ(1,"p"),u._uU(2),u.qZA(),u._UZ(3,"img",23),u.qZA()}if(2&e){const e=u.oxw().$implicit,i=u.oxw();u.Q6J("disabled",e.tabDisable),u.xp6(2),u.hij("",e.val," "),u.xp6(1),u.s9C("src",i.imagePath+"add.png",u.LSH)}}function Z(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"p",9),u._uU(2,"Who witnessed the near miss ? :"),u.qZA(),u.TgZ(3,"ion-item",35),u.NdJ("click",function(){return u.CHM(e),u.oxw(3).onOpenIncidentModal()}),u._UZ(4,"ion-input",36),u.TgZ(5,"ion-buttons",37),u.TgZ(6,"ion-button",38),u._UZ(7,"ion-icon",39),u.qZA(),u.qZA(),u.qZA(),u.TgZ(8,"p",9),u._uU(9," Possible consequence under different circumstances : "),u.qZA(),u._UZ(10,"ion-input",40),u.qZA()}}function v(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div",11),u.TgZ(1,"div",24),u.TgZ(2,"p"),u._uU(3),u.qZA(),u.TgZ(4,"img",25),u.NdJ("click",function(){u.CHM(e);const i=u.oxw().$implicit;return u.oxw().onDeSelectTabItem(i.val)}),u.qZA(),u.qZA(),u._UZ(5,"hr"),u.TgZ(6,"div",26),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(2).onProgressBar(i,"Incident")}),u.TgZ(7,"ion-radio-group",27),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(2).onInput(i,"Incident")}),u.TgZ(8,"ion-row"),u.TgZ(9,"ion-col",28),u.TgZ(10,"ion-item",29),u.TgZ(11,"ion-label"),u._uU(12,"Actual"),u.qZA(),u._UZ(13,"ion-radio",30),u.qZA(),u.qZA(),u.TgZ(14,"ion-col",28),u.TgZ(15,"ion-item",29),u.TgZ(16,"ion-label"),u._uU(17,"Near Miss"),u.qZA(),u._UZ(18,"ion-radio",31),u.qZA(),u.qZA(),u.TgZ(19,"ion-col",32),u.TgZ(20,"ion-item",29),u.TgZ(21,"ion-label",33),u._uU(22,"Serious potential incident (SPI)"),u.qZA(),u._UZ(23,"ion-radio",34),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(24,Z,11,0,"div",17),u.qZA(),u.qZA()}if(2&e){const e=u.oxw().$implicit,i=u.oxw();u.xp6(3),u.Oqu(e.val),u.xp6(1),u.s9C("src",i.imagePath+"minus.png",u.LSH),u.xp6(2),u.Q6J("formGroup",i.incidentForm),u.xp6(18),u.Q6J("ngIf","Near Miss"==i.incidentForm.value.incident_value)}}function T(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"ion-button",43),u.NdJ("click",function(i){return u.CHM(e),u.oxw(3).onPhotoGraphy(i,1)}),u._uU(2,"Upload Image"),u.qZA(),u.qZA()}}function A(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"input",44),u.NdJ("change",function(i){return u.CHM(e),u.oxw(3).onPhotoGraphy(i,2)}),u.qZA(),u.qZA()}}function q(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"ion-slide"),u.TgZ(1,"ion-grid"),u.TgZ(2,"ion-row"),u.TgZ(3,"ion-col",46),u.TgZ(4,"img",47),u.NdJ("click",function(){const i=u.CHM(e).$implicit;return u.oxw(4).onOpenPreview(i)}),u.qZA(),u.qZA(),u.TgZ(5,"ion-col",48),u.TgZ(6,"p",9),u.TgZ(7,"ion-icon",49),u.NdJ("click",function(){const i=u.CHM(e).index;return u.oxw(4).onImageDelete(i,"photoGraphy")}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=i.$implicit;u.xp6(4),u.Q6J("src",e,u.LSH)}}function b(e,i){if(1&e&&(u.TgZ(0,"ion-slides",45),u.YNc(1,q,8,1,"ion-slide",16),u.qZA()),2&e){const e=u.oxw(3);u.xp6(1),u.Q6J("ngForOf",e.photoGraphy)}}function w(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div",41),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(2).onProgressBar(i,"Photography")}),u.TgZ(1,"div",24),u.TgZ(2,"p"),u._uU(3),u.qZA(),u.TgZ(4,"img",25),u.NdJ("click",function(){u.CHM(e);const i=u.oxw().$implicit;return u.oxw().onDeSelectTabItem(i.val)}),u.qZA(),u.qZA(),u._UZ(5,"hr"),u.TgZ(6,"ion-row"),u.TgZ(7,"ion-col",14),u.YNc(8,T,3,0,"div",17),u.YNc(9,A,2,0,"div",17),u.qZA(),u.qZA(),u.YNc(10,b,2,1,"ion-slides",42),u.qZA()}if(2&e){const e=u.oxw().$implicit,i=u.oxw();u.Q6J("formGroup",i.photoGraphyForm),u.xp6(3),u.Oqu(e.val),u.xp6(1),u.s9C("src",i.imagePath+"minus.png",u.LSH),u.xp6(4),u.Q6J("ngIf","cordova"===i.globalService.platform),u.xp6(1),u.Q6J("ngIf","browser"===i.globalService.platform),u.xp6(1),u.Q6J("ngIf",i.photoGraphy.length>0)}}function F(e,i){1&e&&(u.TgZ(0,"div",65),u.TgZ(1,"p",66),u._uU(2," Other Witness Details "),u.qZA(),u.TgZ(3,"p",9),u._uU(4," Name : "),u.qZA(),u._UZ(5,"ion-input",67),u.TgZ(6,"p",9),u._uU(7," Mobile No : "),u.qZA(),u._UZ(8,"ion-input",68),u.TgZ(9,"p",9),u._uU(10," Email id : "),u.qZA(),u._UZ(11,"ion-input",69),u.qZA())}function y(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"ion-button",43),u.NdJ("click",function(i){return u.CHM(e),u.oxw(4).onAlcoholImage(i,1)}),u._uU(2,"Upload Image "),u.qZA(),u.qZA()}}function x(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"input",70),u.NdJ("change",function(i){return u.CHM(e),u.oxw(4).onAlcoholImage(i,2)}),u.qZA(),u.qZA()}}function C(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"ion-slide"),u.TgZ(1,"ion-grid"),u.TgZ(2,"ion-row"),u.TgZ(3,"ion-col",46),u.TgZ(4,"img",47),u.NdJ("click",function(){const i=u.CHM(e).$implicit;return u.oxw(5).onOpenPreview(i)}),u.qZA(),u.qZA(),u.TgZ(5,"ion-col",48),u.TgZ(6,"p",9),u.TgZ(7,"ion-icon",49),u.NdJ("click",function(){const i=u.CHM(e).index;return u.oxw(5).onImageDelete(i,"alcohalImages")}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=i.$implicit;u.xp6(4),u.Q6J("src",e,u.LSH)}}function D(e,i){if(1&e&&(u.TgZ(0,"ion-slides",45),u.YNc(1,C,8,1,"ion-slide",16),u.qZA()),2&e){const e=u.oxw(4);u.xp6(1),u.Q6J("ngForOf",e.alcohalImages)}}function I(e,i){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,y,3,0,"div",17),u.YNc(2,x,2,0,"div",17),u.YNc(3,D,2,1,"ion-slides",42),u.qZA()),2&e){const e=u.oxw(3);u.xp6(1),u.Q6J("ngIf","cordova"===e.globalService.platform),u.xp6(1),u.Q6J("ngIf","browser"===e.globalService.platform),u.xp6(1),u.Q6J("ngIf",e.alcohalImages.length>0)}}function N(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"ion-button",43),u.NdJ("click",function(i){return u.CHM(e),u.oxw(5).onDrugTestImage(i,1)}),u._uU(1,"Upload Image "),u.qZA()}}function U(e,i){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,N,2,0,"ion-button",71),u.qZA()),2&e){const e=u.oxw(4);u.xp6(1),u.Q6J("ngIf","Yes"==e.incidentDesForm.value.drug_test_completed)}}function k(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"input",72),u.NdJ("change",function(i){return u.CHM(e),u.oxw(4).onDrugTestImage(i,2)}),u.qZA(),u.qZA()}}function j(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"ion-slide"),u.TgZ(1,"ion-grid"),u.TgZ(2,"ion-row"),u.TgZ(3,"ion-col",46),u.TgZ(4,"img",47),u.NdJ("click",function(){const i=u.CHM(e).$implicit;return u.oxw(5).onOpenPreview(i)}),u.qZA(),u.qZA(),u.TgZ(5,"ion-col",48),u.TgZ(6,"p",9),u.TgZ(7,"ion-icon",49),u.NdJ("click",function(){const i=u.CHM(e).index;return u.oxw(5).onImageDelete(i,"drugTestImages")}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=i.$implicit;u.xp6(4),u.Q6J("src",e,u.LSH)}}function P(e,i){if(1&e&&(u.TgZ(0,"ion-slides",45),u.YNc(1,j,8,1,"ion-slide",16),u.qZA()),2&e){const e=u.oxw(4);u.xp6(1),u.Q6J("ngForOf",e.drugTestImages)}}function O(e,i){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,U,2,1,"div",17),u.YNc(2,k,2,0,"div",17),u.YNc(3,P,2,1,"ion-slides",42),u.qZA()),2&e){const e=u.oxw(3);u.xp6(1),u.Q6J("ngIf","cordova"===e.globalService.platform),u.xp6(1),u.Q6J("ngIf","browser"===e.globalService.platform),u.xp6(1),u.Q6J("ngIf",e.drugTestImages.length>0)}}function J(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"ion-button",43),u.NdJ("click",function(i){return u.CHM(e),u.oxw(4).onReturnToDutyImage(i,1)}),u._uU(2,"Upload Image "),u.qZA(),u.qZA()}}function M(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"input",73),u.NdJ("change",function(i){return u.CHM(e),u.oxw(4).onReturnToDutyImage(i,2)}),u.qZA(),u.qZA()}}function S(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"ion-slide"),u.TgZ(1,"ion-grid"),u.TgZ(2,"ion-row"),u.TgZ(3,"ion-col",46),u.TgZ(4,"img",47),u.NdJ("click",function(){const i=u.CHM(e).$implicit;return u.oxw(5).onOpenPreview(i)}),u.qZA(),u.qZA(),u.TgZ(5,"ion-col",48),u.TgZ(6,"p",9),u.TgZ(7,"ion-icon",49),u.NdJ("click",function(){const i=u.CHM(e).index;return u.oxw(5).onImageDelete(i,"alterDutyImageses")}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=i.$implicit;u.xp6(4),u.Q6J("src",e,u.LSH)}}function L(e,i){if(1&e&&(u.TgZ(0,"ion-slides",45),u.YNc(1,S,8,1,"ion-slide",16),u.qZA()),2&e){const e=u.oxw(4);u.xp6(1),u.Q6J("ngForOf",e.alterDutyImages)}}function Y(e,i){if(1&e&&(u.TgZ(0,"div"),u.TgZ(1,"ion-text",52),u._uU(2,"* Please take a photo or upload the Cerificate of Copacity (COC). "),u.qZA(),u.YNc(3,J,3,0,"div",17),u.YNc(4,M,2,0,"div",17),u.YNc(5,L,2,1,"ion-slides",42),u.qZA()),2&e){const e=u.oxw(3);u.xp6(3),u.Q6J("ngIf","cordova"===e.globalService.platform),u.xp6(1),u.Q6J("ngIf","browser"===e.globalService.platform),u.xp6(1),u.Q6J("ngIf",e.alterDutyImages.length>0)}}function H(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div",11),u.TgZ(1,"div",50),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(2).onProgressBar(i,"Incident Description")}),u.TgZ(2,"p"),u._uU(3),u.qZA(),u.TgZ(4,"img",25),u.NdJ("click",function(){u.CHM(e);const i=u.oxw().$implicit;return u.oxw().onDeSelectTabItem(i.val)}),u.qZA(),u.qZA(),u._UZ(5,"hr"),u.TgZ(6,"div",51),u.TgZ(7,"p",9),u._uU(8," Description of incident : "),u.qZA(),u.TgZ(9,"ion-text",52),u._uU(10,"( Note : You must not use any personal details or names)"),u.qZA(),u.TgZ(11,"ion-input",53),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(2).onInput(i,"Incident Description")}),u.qZA(),u.TgZ(12,"p",9),u._uU(13,"Immediate action taken : "),u.qZA(),u.TgZ(14,"ion-input",54),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(2).onInput(i,"Incident Description")}),u.qZA(),u.TgZ(15,"p",9),u._uU(16,"What could have been done differently ? :"),u.qZA(),u._UZ(17,"ion-input",55),u.TgZ(18,"p",9),u._uU(19,"Was there any Witnesses of the incident ? :"),u.qZA(),u.TgZ(20,"ion-item",35),u.NdJ("click",function(){return u.CHM(e),u.oxw(2).onOpenIncDesModal()}),u._UZ(21,"ion-input",56),u.TgZ(22,"ion-buttons",37),u.TgZ(23,"ion-button",38),u._UZ(24,"ion-icon",39),u.qZA(),u.qZA(),u.qZA(),u.YNc(25,F,12,0,"div",57),u.TgZ(26,"ion-radio-group",58),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(2).onAlcohalTestSelect(i)}),u.TgZ(27,"ion-item",29),u.TgZ(28,"ion-label"),u._uU(29,"Alcohol test completed :"),u.qZA(),u.qZA(),u.TgZ(30,"ion-row"),u.TgZ(31,"ion-col",59),u.TgZ(32,"ion-item",29),u.TgZ(33,"ion-label"),u._uU(34,"Yes"),u.qZA(),u._UZ(35,"ion-radio",60),u.qZA(),u.qZA(),u.TgZ(36,"ion-col",59),u.TgZ(37,"ion-item",29),u.TgZ(38,"ion-label"),u._uU(39,"No"),u.qZA(),u._UZ(40,"ion-radio",61),u.qZA(),u.qZA(),u.TgZ(41,"ion-col",59),u.TgZ(42,"ion-item",29),u.TgZ(43,"ion-label"),u._uU(44,"Not Required"),u.qZA(),u._UZ(45,"ion-radio",62),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(46,I,4,3,"div",17),u.TgZ(47,"ion-radio-group",63),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(2).onDrugTestSelect(i)}),u.TgZ(48,"ion-item",29),u.TgZ(49,"ion-label"),u._uU(50,"Drug test completed :"),u.qZA(),u.qZA(),u.TgZ(51,"ion-row"),u.TgZ(52,"ion-col",59),u.TgZ(53,"ion-item",29),u.TgZ(54,"ion-label"),u._uU(55,"Yes"),u.qZA(),u._UZ(56,"ion-radio",60),u.qZA(),u.qZA(),u.TgZ(57,"ion-col",59),u.TgZ(58,"ion-item",29),u.TgZ(59,"ion-label"),u._uU(60,"No"),u.qZA(),u._UZ(61,"ion-radio",61),u.qZA(),u.qZA(),u.TgZ(62,"ion-col",59),u.TgZ(63,"ion-item",29),u.TgZ(64,"ion-label"),u._uU(65,"Not Required"),u.qZA(),u._UZ(66,"ion-radio",62),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(67,O,4,3,"div",17),u.TgZ(68,"ion-radio-group",64),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(2).onReturnToDutySelect(i)}),u.TgZ(69,"ion-item",29),u.TgZ(70,"ion-label"),u._uU(71,"Return to Alternate Duties :"),u.qZA(),u.qZA(),u.TgZ(72,"ion-row"),u.TgZ(73,"ion-col",59),u.TgZ(74,"ion-item",29),u.TgZ(75,"ion-label"),u._uU(76,"Yes"),u.qZA(),u._UZ(77,"ion-radio",60),u.qZA(),u.qZA(),u.TgZ(78,"ion-col",59),u.TgZ(79,"ion-item",29),u.TgZ(80,"ion-label"),u._uU(81,"No"),u.qZA(),u._UZ(82,"ion-radio",61),u.qZA(),u.qZA(),u.TgZ(83,"ion-col",59),u.TgZ(84,"ion-item",29),u.TgZ(85,"ion-label"),u._uU(86,"Not Required"),u.qZA(),u._UZ(87,"ion-radio",62),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(88,Y,6,3,"div",17),u.qZA(),u.qZA()}if(2&e){const e=u.oxw().$implicit,i=u.oxw();u.xp6(3),u.Oqu(e.val),u.xp6(1),u.s9C("src",i.imagePath+"minus.png",u.LSH),u.xp6(2),u.Q6J("formGroup",i.incidentDesForm),u.xp6(19),u.Q6J("ngIf","Other"==i.incidentDesForm.value.was_there_any_witness_of_the_incident),u.xp6(21),u.Q6J("ngIf","Yes"==i.incidentDesForm.value.incident_description_alcohol_test),u.xp6(21),u.Q6J("ngIf","Yes"==i.incidentDesForm.value.drug_test_completed),u.xp6(21),u.Q6J("ngIf","Yes"==i.incidentDesForm.value.return_to_alternate_duties)}}function E(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"ion-col",89),u.TgZ(1,"ion-item",29),u.TgZ(2,"ion-label",33),u._uU(3),u.qZA(),u.TgZ(4,"ion-checkbox",90),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(3).onClassificationChange(i)}),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=i.$implicit;u.xp6(3),u.Oqu(e.val),u.xp6(1),u.Q6J("value",e.val)("checked",e.isChecked)}}function Q(e,i){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"p",9),u._uU(2,"Add Location :"),u.qZA(),u._UZ(3,"ion-input",91),u.qZA())}function R(e,i){if(1&e&&(u.TgZ(0,"ion-select-option",15),u._uU(1),u.qZA()),2&e){const e=i.$implicit;u.s9C("value",null==e?null:e.location_name),u.xp6(1),u.hij(" ",null==e?null:e.location_name,"")}}function G(e,i){if(1&e&&(u.TgZ(0,"div"),u.TgZ(1,"p",9),u._uU(2,"Choose Location :"),u.qZA(),u.TgZ(3,"ion-item",29),u.TgZ(4,"ion-select",92),u.YNc(5,R,2,2,"ion-select-option",84),u.qZA(),u.qZA(),u.qZA()),2&e){const e=u.oxw(3);u.xp6(5),u.Q6J("ngForOf",e.locationList)}}function B(e,i){if(1&e&&(u.TgZ(0,"ion-select-option",15),u._uU(1),u.qZA()),2&e){const e=i.$implicit;u.s9C("value",null==e?null:e.shift_type),u.xp6(1),u.hij(" ",null==e?null:e.shift_type," ")}}function V(e,i){1&e&&(u.TgZ(0,"div",93),u.TgZ(1,"p",66),u._uU(2," Other Person Details "),u.qZA(),u.TgZ(3,"p",9),u._uU(4,"Name :"),u.qZA(),u._UZ(5,"ion-input",94),u.TgZ(6,"p",9),u._uU(7," Mobile No :"),u.qZA(),u._UZ(8,"ion-input",95),u.TgZ(9,"p",9),u._uU(10,"Email id :"),u.qZA(),u._UZ(11,"ion-input",96),u.qZA())}function z(e,i){1&e&&(u.TgZ(0,"div",97),u.TgZ(1,"p",66),u._uU(2," Other Witness Details "),u.qZA(),u.TgZ(3,"p",9),u._uU(4," Name : "),u.qZA(),u._UZ(5,"ion-input",98),u.TgZ(6,"p",9),u._uU(7," Mobile No : "),u.qZA(),u._UZ(8,"ion-input",99),u.TgZ(9,"p",9),u._uU(10," Email id : "),u.qZA(),u._UZ(11,"ion-input",100),u.qZA())}function W(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div",41),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(2).onProgressBar(i,"Classification")}),u.TgZ(1,"div",24),u.TgZ(2,"p"),u._uU(3),u.qZA(),u.TgZ(4,"img",25),u.NdJ("click",function(){u.CHM(e);const i=u.oxw().$implicit;return u.oxw().onDeSelectTabItem(i.val)}),u.qZA(),u.qZA(),u._UZ(5,"hr"),u.TgZ(6,"ion-row",74),u.YNc(7,E,5,3,"ion-col",75),u.qZA(),u.TgZ(8,"p",9),u._uU(9,"Date of Incident :"),u.qZA(),u._UZ(10,"ion-datetime",76),u.TgZ(11,"p",9),u._uU(12,"Time of Incident :"),u.qZA(),u._UZ(13,"ion-datetime",77),u.TgZ(14,"p",9),u._uU(15,"Date Reported :"),u.qZA(),u._UZ(16,"ion-datetime",78),u.TgZ(17,"p",9),u._uU(18,"Time Reported :"),u.qZA(),u._UZ(19,"ion-datetime",79),u.TgZ(20,"ion-radio-group",80),u.TgZ(21,"ion-row"),u.TgZ(22,"ion-col",14),u.TgZ(23,"ion-item",29),u.TgZ(24,"ion-label"),u._uU(25,"Add Location"),u.qZA(),u._UZ(26,"ion-radio",81),u.qZA(),u.qZA(),u.TgZ(27,"ion-col",14),u.TgZ(28,"ion-item",29),u.TgZ(29,"ion-label"),u._uU(30,"Choose Location"),u.qZA(),u._UZ(31,"ion-radio",82),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(32,Q,4,0,"div",17),u.YNc(33,G,6,1,"div",17),u.TgZ(34,"p",9),u._uU(35,"Shift :"),u.qZA(),u.TgZ(36,"ion-select",83),u.YNc(37,B,2,2,"ion-select-option",84),u.qZA(),u.TgZ(38,"p",9),u._uU(39,"Supervisor :"),u.qZA(),u.TgZ(40,"ion-item",35),u.NdJ("click",function(){return u.CHM(e),u.oxw(2).onOpenClassiModal("Supervisor List")}),u._UZ(41,"ion-input",85),u.TgZ(42,"ion-buttons",37),u.TgZ(43,"ion-button",38),u._UZ(44,"ion-icon",39),u.qZA(),u.qZA(),u.qZA(),u.YNc(45,V,12,0,"div",86),u.TgZ(46,"p",9),u._uU(47,"Manger :"),u.qZA(),u.TgZ(48,"ion-item",35),u.NdJ("click",function(){return u.CHM(e),u.oxw(2).onOpenClassiModal("Manager List")}),u._UZ(49,"ion-input",87),u.TgZ(50,"ion-buttons",37),u.TgZ(51,"ion-button",38),u._UZ(52,"ion-icon",39),u.qZA(),u.qZA(),u.qZA(),u.YNc(53,z,12,0,"div",88),u.qZA()}if(2&e){const e=u.oxw().$implicit,i=u.oxw();u.Q6J("formGroup",i.classificationForm),u.xp6(3),u.Oqu(e.val),u.xp6(1),u.s9C("src",i.imagePath+"minus.png",u.LSH),u.xp6(3),u.Q6J("ngForOf",i.classificationList),u.xp6(25),u.Q6J("ngIf","Add Location"==i.classificationForm.value.classification_location_option),u.xp6(1),u.Q6J("ngIf","Choose Location"==i.classificationForm.value.classification_location_option),u.xp6(4),u.Q6J("ngForOf",i.shiftTypeList),u.xp6(8),u.Q6J("ngIf","Other"==i.classificationForm.value.classification_supervisor),u.xp6(8),u.Q6J("ngIf","Other"==i.classificationForm.value.classification_manager)}}function $(e,i){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,f,4,3,"ion-button",19),u.YNc(2,v,25,4,"div",20),u.YNc(3,w,11,6,"div",21),u.YNc(4,H,89,7,"div",20),u.YNc(5,W,54,9,"div",21),u.qZA()),2&e){const e=i.$implicit,t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.selectedTabItem!=e.val),u.xp6(1),u.Q6J("ngIf",t.selectedTabItem==e.val&&"Incident"==t.selectedTabItem),u.xp6(1),u.Q6J("ngIf",t.selectedTabItem==e.val&&"Photography"==t.selectedTabItem),u.xp6(1),u.Q6J("ngIf",t.selectedTabItem==e.val&&"Incident Description"==t.selectedTabItem),u.xp6(1),u.Q6J("ngIf",t.selectedTabItem==e.val&&"Classification"==t.selectedTabItem)}}function K(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"ion-button",102),u.NdJ("click",function(){u.CHM(e);const i=u.oxw().$implicit;return u.oxw(2).onSelectTabItem(i)}),u.TgZ(1,"p"),u._uU(2),u.qZA(),u._UZ(3,"img",23),u.qZA()}if(2&e){const e=u.oxw().$implicit,i=u.oxw(2);u.xp6(2),u.hij("",e," "),u.xp6(1),u.s9C("src",i.imagePath+"add.png",u.LSH)}}function X(e,i){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"p",9),u._uU(2," Asset Number : "),u.qZA(),u._UZ(3,"ion-input",107),u.qZA())}function ee(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"ion-button",43),u.NdJ("click",function(i){return u.CHM(e),u.oxw(4).onSelectDamageImage(i,1)}),u._uU(2,"Upload photo of damage "),u.qZA(),u.qZA()}}function ie(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"input",108),u.NdJ("change",function(i){return u.CHM(e),u.oxw(4).onSelectDamageImage(i,2)}),u.qZA(),u.qZA()}}function te(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"ion-slide"),u.TgZ(1,"ion-grid"),u.TgZ(2,"ion-row"),u.TgZ(3,"ion-col",46),u.TgZ(4,"img",47),u.NdJ("click",function(){const i=u.CHM(e).$implicit;return u.oxw(5).onOpenPreview(i)}),u.qZA(),u.qZA(),u.TgZ(5,"ion-col",48),u.TgZ(6,"p",9),u.TgZ(7,"ion-icon",49),u.NdJ("click",function(){const i=u.CHM(e).index;return u.oxw(5).onImageDelete(i,"damageImages")}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=i.$implicit;u.xp6(4),u.Q6J("src",e,u.LSH)}}function ne(e,i){if(1&e&&(u.TgZ(0,"ion-slides",45),u.YNc(1,te,8,1,"ion-slide",16),u.qZA()),2&e){const e=u.oxw(4);u.xp6(1),u.Q6J("ngForOf",e.damageImages)}}function oe(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div",41),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(3).onProgressBar(i,"Asset")}),u.TgZ(1,"div",24),u.TgZ(2,"p"),u._uU(3),u.qZA(),u.TgZ(4,"img",25),u.NdJ("click",function(){u.CHM(e);const i=u.oxw().$implicit;return u.oxw(2).onDeSelectTabItem(i)}),u.qZA(),u.qZA(),u._UZ(5,"hr"),u.TgZ(6,"p",9),u._uU(7," Asset description : "),u.qZA(),u._UZ(8,"ion-input",103),u.TgZ(9,"ion-radio-group",104),u.TgZ(10,"ion-item",29),u.TgZ(11,"ion-label"),u._uU(12,"Does Asset have a number ? :"),u.qZA(),u.qZA(),u.TgZ(13,"ion-row",74),u.TgZ(14,"ion-col",105),u.TgZ(15,"ion-item",29),u.TgZ(16,"ion-label"),u._uU(17,"Yes"),u.qZA(),u._UZ(18,"ion-radio",60),u.qZA(),u.qZA(),u.TgZ(19,"ion-col",105),u.TgZ(20,"ion-item",29),u.TgZ(21,"ion-label"),u._uU(22,"No"),u.qZA(),u._UZ(23,"ion-radio",61),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(24,X,4,0,"div",17),u.TgZ(25,"p",9),u._uU(26," Extent of Damage : "),u.qZA(),u._UZ(27,"ion-input",106),u.YNc(28,ee,3,0,"div",17),u.YNc(29,ie,2,0,"div",17),u.YNc(30,ne,2,1,"ion-slides",42),u.qZA()}if(2&e){const e=u.oxw().$implicit,i=u.oxw(2);u.Q6J("formGroup",i.assetDescriptionForm),u.xp6(3),u.Oqu(e),u.xp6(1),u.s9C("src",i.imagePath+"minus.png",u.LSH),u.xp6(20),u.Q6J("ngIf","Yes"==i.assetDescriptionForm.value.asset_has_number),u.xp6(4),u.Q6J("ngIf","cordova"===i.globalService.platform),u.xp6(1),u.Q6J("ngIf","browser"===i.globalService.platform),u.xp6(1),u.Q6J("ngIf",i.damageImages.length>0)}}function ae(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"ion-button",43),u.NdJ("click",function(i){return u.CHM(e),u.oxw(6).onChemicalImageSelect(i,1)}),u._uU(2,"Upload Image "),u.qZA(),u.qZA()}}function se(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"input",117),u.NdJ("change",function(i){return u.CHM(e),u.oxw(6).onChemicalImageSelect(i,2)}),u.qZA(),u.qZA()}}function re(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"ion-slide"),u.TgZ(1,"ion-grid"),u.TgZ(2,"ion-row"),u.TgZ(3,"ion-col",46),u.TgZ(4,"img",47),u.NdJ("click",function(){const i=u.CHM(e).$implicit;return u.oxw(7).onOpenPreview(i)}),u.qZA(),u.qZA(),u.TgZ(5,"ion-col",48),u.TgZ(6,"p",9),u.TgZ(7,"ion-icon",49),u.NdJ("click",function(){const i=u.CHM(e).index;return u.oxw(7).onImageDelete(i,"chemicalImages")}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=i.$implicit;u.xp6(4),u.Q6J("src",e,u.LSH)}}function le(e,i){if(1&e&&(u.TgZ(0,"ion-slides",45),u.YNc(1,re,8,1,"ion-slide",16),u.qZA()),2&e){const e=u.oxw(6);u.xp6(1),u.Q6J("ngForOf",e.chemicalImages)}}function ce(e,i){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,ae,3,0,"div",17),u.YNc(2,se,2,0,"div",17),u.YNc(3,le,2,1,"ion-slides",42),u.qZA()),2&e){const e=u.oxw(5);u.xp6(1),u.Q6J("ngIf","cordova"===e.globalService.platform),u.xp6(1),u.Q6J("ngIf","browser"===e.globalService.platform),u.xp6(1),u.Q6J("ngIf",e.chemicalImages.length>0)}}function _e(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div",113),u.TgZ(1,"p",9),u._uU(2," Name of chemical : "),u.qZA(),u._UZ(3,"ion-input",114),u.TgZ(4,"ion-item",29),u.TgZ(5,"ion-label"),u._uU(6,"Insert Photo "),u.qZA(),u.TgZ(7,"ion-checkbox",115),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(4).onInsertImageSelect(i)}),u.qZA(),u.qZA(),u.YNc(8,ce,4,3,"div",17),u.TgZ(9,"p",9),u._uU(10," Approximate quantity of chemical spilled : "),u.qZA(),u._UZ(11,"ion-input",116),u.qZA()}if(2&e){const e=u.oxw(4);u.xp6(8),u.Q6J("ngIf",e.enviornmentForm.value.chemical_details.insertPhotoCheckBox)}}function me(e,i){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"p",9),u._uU(2," What was used out of the chemical spill kit ? : "),u.qZA(),u._UZ(3,"ion-input",118),u.qZA())}function ue(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div",41),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(3).onProgressBar(i,"Environmental")}),u.TgZ(1,"div",24),u.TgZ(2,"p"),u._uU(3),u.qZA(),u.TgZ(4,"img",25),u.NdJ("click",function(){u.CHM(e);const i=u.oxw().$implicit;return u.oxw(2).onDeSelectTabItem(i)}),u.qZA(),u.qZA(),u._UZ(5,"hr"),u.TgZ(6,"p",9),u._uU(7," Immediate action taken to minimize Environmental impact ? : "),u.qZA(),u._UZ(8,"ion-input",109),u.TgZ(9,"ion-radio-group",110),u.TgZ(10,"ion-item",29),u.TgZ(11,"ion-label"),u._uU(12,"Was a chemical split ? :"),u.qZA(),u.qZA(),u.TgZ(13,"ion-row"),u.TgZ(14,"ion-col",105),u.TgZ(15,"ion-item",29),u.TgZ(16,"ion-label"),u._uU(17,"Yes"),u.qZA(),u._UZ(18,"ion-radio",60),u.qZA(),u.qZA(),u.TgZ(19,"ion-col",105),u.TgZ(20,"ion-item",29),u.TgZ(21,"ion-label"),u._uU(22,"No"),u.qZA(),u._UZ(23,"ion-radio",61),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(24,_e,12,1,"div",111),u.TgZ(25,"ion-radio-group",112),u.TgZ(26,"ion-item",29),u.TgZ(27,"ion-label"),u._uU(28,"Was the emergency spill kit used ? :"),u.qZA(),u.qZA(),u.TgZ(29,"ion-row",74),u.TgZ(30,"ion-col",89),u.TgZ(31,"ion-item",29),u.TgZ(32,"ion-label"),u._uU(33,"Yes"),u.qZA(),u._UZ(34,"ion-radio",60),u.qZA(),u.qZA(),u.TgZ(35,"ion-col",89),u.TgZ(36,"ion-item",29),u.TgZ(37,"ion-label"),u._uU(38,"No"),u.qZA(),u._UZ(39,"ion-radio",61),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(40,me,4,0,"div",17),u.qZA()}if(2&e){const e=u.oxw().$implicit,i=u.oxw(2);u.Q6J("formGroup",i.enviornmentForm),u.xp6(3),u.Oqu(e),u.xp6(1),u.s9C("src",i.imagePath+"minus.png",u.LSH),u.xp6(20),u.Q6J("ngIf","Yes"===i.enviornmentForm.value.was_a_chemical_split),u.xp6(16),u.Q6J("ngIf","Yes"==i.enviornmentForm.value.emergency_spill_kit_used)}}function he(e,i){1&e&&(u.TgZ(0,"div",140),u.TgZ(1,"p",66),u._uU(2," Other Person Details "),u.qZA(),u.TgZ(3,"p",9),u._uU(4,"Name :"),u.qZA(),u._UZ(5,"ion-input",141),u.TgZ(6,"p",9),u._uU(7," Mobile No :"),u.qZA(),u._UZ(8,"ion-input",142),u.TgZ(9,"p",9),u._uU(10,"Email id :"),u.qZA(),u._UZ(11,"ion-input",143),u.qZA())}function pe(e,i){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"p",9),u._uU(2,"Explanation :"),u.qZA(),u._UZ(3,"ion-input",144),u.qZA())}function de(e,i){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"p",9),u._uU(2,"Explanation :"),u.qZA(),u._UZ(3,"ion-input",145),u.qZA())}function ge(e,i){if(1&e&&(u.TgZ(0,"ion-text",52),u._uU(1),u.qZA()),2&e){const e=u.oxw().$implicit;u.xp6(1),u.hij(" ",e.desc,"")}}function fe(e,i){if(1&e&&(u.TgZ(0,"ion-col",89),u.TgZ(1,"ion-item",29),u.TgZ(2,"ion-label",33),u._uU(3),u.qZA(),u._UZ(4,"ion-radio",146),u.qZA(),u.YNc(5,ge,2,1,"ion-text",147),u.qZA()),2&e){const e=i.$implicit,t=u.oxw().index,n=u.oxw(4);u.xp6(3),u.Oqu(e.val),u.xp6(1),u.s9C("value",e.val),u.xp6(1),u.Q6J("ngIf",e.val==n.injuryForm.value.person_details[t].initital_injury)}}function Ze(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"ion-grid"),u._UZ(1,"img",148),u.TgZ(2,"map",149),u.TgZ(3,"area",150),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Head")}),u.qZA(),u.TgZ(4,"area",151),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Face")}),u.qZA(),u.TgZ(5,"area",152),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Neck")}),u.qZA(),u.TgZ(6,"area",153),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Left Shoulder")}),u.qZA(),u.TgZ(7,"area",154),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Right Shoulder")}),u.qZA(),u.TgZ(8,"area",155),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Left hand")}),u.qZA(),u.TgZ(9,"area",156),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Right hand")}),u.qZA(),u.TgZ(10,"area",157),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Left palm")}),u.qZA(),u.TgZ(11,"area",158),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Left hand finger")}),u.qZA(),u.TgZ(12,"area",159),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Left hand thumb")}),u.qZA(),u.TgZ(13,"area",160),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Right hand palm")}),u.qZA(),u.TgZ(14,"area",161),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Right hand finger")}),u.qZA(),u.TgZ(15,"area",162),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Right hand thumb")}),u.qZA(),u.TgZ(16,"area",163),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Upper Abdomen")}),u.qZA(),u.TgZ(17,"area",164),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Lower Abdomen")}),u.qZA(),u.TgZ(18,"area",165),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Left Thigh")}),u.qZA(),u.TgZ(19,"area",166),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Right Thigh")}),u.qZA(),u.TgZ(20,"area",167),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Left Knee")}),u.qZA(),u.TgZ(21,"area",168),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Right Knee")}),u.qZA(),u.TgZ(22,"area",169),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Left Lower leg")}),u.qZA(),u.TgZ(23,"area",170),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Right Lower leg")}),u.qZA(),u.TgZ(24,"area",171),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Left Foot")}),u.qZA(),u.TgZ(25,"area",172),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Right Foot")}),u.qZA(),u.TgZ(26,"area",173),u.NdJ("click",function(){return u.CHM(e),u.oxw(5).onImageClick("Spin")}),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=u.oxw(5);u.xp6(1),u.s9C("src",e.imagePath+"Male_Silhouette.png",u.LSH)}}function ve(e,i){if(1&e&&(u.TgZ(0,"ion-select-option",15),u._uU(1),u.qZA()),2&e){const e=i.$implicit;u.s9C("value",e.name),u.xp6(1),u.hij(" ",e.name,"")}}function Te(e,i){1&e&&(u.TgZ(0,"div",177),u.TgZ(1,"ion-item",29),u.TgZ(2,"p",66),u._uU(3," Other Person Details "),u.qZA(),u.qZA(),u.TgZ(4,"ion-item",29),u.TgZ(5,"p",9),u._uU(6,"Name :"),u.qZA(),u.qZA(),u._UZ(7,"ion-input",180),u.qZA())}function Ae(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"ion-item",29),u.TgZ(2,"p",9),u._uU(3,"What treatment was given ? :"),u.qZA(),u.qZA(),u._UZ(4,"ion-input",174),u.TgZ(5,"ion-item",29),u.TgZ(6,"p",9),u._uU(7,"Who administered treatment ? : "),u.qZA(),u.qZA(),u.TgZ(8,"ion-item",29),u.TgZ(9,"p",9),u._uU(10,"Person Name :"),u.qZA(),u.qZA(),u.TgZ(11,"ion-item",35),u.NdJ("click",function(){u.CHM(e);const i=u.oxw().index;return u.oxw(4).onOpenInjuryModal("Injured administered",i)}),u._UZ(12,"ion-input",175),u.TgZ(13,"ion-buttons",37),u.TgZ(14,"ion-button",38),u._UZ(15,"ion-icon",39),u.qZA(),u.qZA(),u.qZA(),u.YNc(16,Te,8,0,"div",176),u.TgZ(17,"div",177),u.TgZ(18,"ion-item",29),u.TgZ(19,"p",9),u._uU(20," Mobile No :"),u.qZA(),u.qZA(),u._UZ(21,"ion-input",178),u.TgZ(22,"ion-item",29),u.TgZ(23,"p",9),u._uU(24,"Email id :"),u.qZA(),u.qZA(),u._UZ(25,"ion-input",179),u.qZA(),u.qZA()}if(2&e){const e=u.oxw().index,i=u.oxw(4);u.xp6(16),u.Q6J("ngIf","Other"==i.injuryForm.value.person_details[e].immediate_treatment_person_name)}}function qe(e,i){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"ion-row"),u.TgZ(2,"ion-item",29),u.TgZ(3,"span",181),u._uU(4,"* "),u.qZA(),u.TgZ(5,"ion-label",33),u._uU(6," Explain why immediate treatment was not given : "),u.qZA(),u.qZA(),u.qZA(),u.TgZ(7,"ion-row"),u._UZ(8,"ion-textarea",182),u.qZA(),u.qZA())}function be(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div",125),u.TgZ(1,"ion-card"),u.TgZ(2,"p",126),u._uU(3),u.qZA(),u.TgZ(4,"div",127),u.TgZ(5,"p",9),u._uU(6,"Injured Person Name :"),u.qZA(),u.TgZ(7,"ion-item",35),u.NdJ("click",function(){const i=u.CHM(e).index;return u.oxw(4).onOpenInjuryModal("Injured person",i)}),u._UZ(8,"ion-input",128),u.TgZ(9,"ion-buttons",37),u.TgZ(10,"ion-button",38),u._UZ(11,"ion-icon",39),u.qZA(),u.qZA(),u.qZA(),u.YNc(12,he,12,0,"div",129),u.TgZ(13,"p",9),u._uU(14,"Gender :"),u.qZA(),u.TgZ(15,"ion-select",130),u.TgZ(16,"ion-select-option",131),u._uU(17,"Male"),u.qZA(),u.TgZ(18,"ion-select-option",132),u._uU(19,"Female"),u.qZA(),u.TgZ(20,"ion-select-option",133),u._uU(21,"Other"),u.qZA(),u.qZA(),u.TgZ(22,"p",9),u._uU(23,"Date of Birth :"),u.qZA(),u._UZ(24,"ion-datetime",134),u.TgZ(25,"ion-radio-group",135),u.TgZ(26,"ion-item",29),u.TgZ(27,"ion-label"),u._uU(28,"Return to Normal Duties :"),u.qZA(),u.qZA(),u.TgZ(29,"ion-row",74),u.TgZ(30,"ion-col",89),u.TgZ(31,"ion-item",29),u.TgZ(32,"ion-label"),u._uU(33,"Yes"),u.qZA(),u._UZ(34,"ion-radio",60),u.qZA(),u.qZA(),u.TgZ(35,"ion-col",89),u.TgZ(36,"ion-item",29),u.TgZ(37,"ion-label"),u._uU(38,"No"),u.qZA(),u._UZ(39,"ion-radio",61),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(40,pe,4,0,"div",17),u.TgZ(41,"ion-radio-group",136),u.TgZ(42,"ion-row"),u.TgZ(43,"ion-col",14),u.TgZ(44,"ion-item",29),u.TgZ(45,"ion-label"),u._uU(46,"Return to Alternate Duties :"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(47,"ion-col",89),u.TgZ(48,"ion-item",29),u.TgZ(49,"ion-label"),u._uU(50,"Yes"),u.qZA(),u._UZ(51,"ion-radio",60),u.qZA(),u.qZA(),u.TgZ(52,"ion-col",89),u.TgZ(53,"ion-item",29),u.TgZ(54,"ion-label"),u._uU(55,"No"),u.qZA(),u._UZ(56,"ion-radio",61),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(57,de,4,0,"div",17),u.TgZ(58,"ion-item",29),u.TgZ(59,"ion-label",33),u._uU(60,"Initial Injury / IIIness Classification :"),u.qZA(),u.qZA(),u.TgZ(61,"ion-radio-group",137),u.TgZ(62,"ion-row"),u.YNc(63,fe,6,3,"ion-col",75),u.qZA(),u.qZA(),u.YNc(64,Ze,27,1,"ion-grid",17),u.TgZ(65,"ion-item",29),u.TgZ(66,"p",9),u._uU(67,"Part of body injured :"),u.qZA(),u.qZA(),u.TgZ(68,"ion-select",138),u.YNc(69,ve,2,2,"ion-select-option",84),u.qZA(),u.TgZ(70,"ion-radio-group",139),u.NdJ("ionChange",function(i){const t=u.CHM(e).index;return u.oxw(4).onImmediateTreatment(i,t)}),u.TgZ(71,"ion-row"),u.TgZ(72,"ion-col",14),u.TgZ(73,"ion-item",29),u.TgZ(74,"ion-label",33),u._uU(75,"Was immediate treatment given ? :"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(76,"ion-col",89),u.TgZ(77,"ion-item",29),u.TgZ(78,"ion-label"),u._uU(79,"Yes"),u.qZA(),u._UZ(80,"ion-radio",60),u.qZA(),u.qZA(),u.TgZ(81,"ion-col",89),u.TgZ(82,"ion-item",29),u.TgZ(83,"ion-label"),u._uU(84,"No"),u.qZA(),u._UZ(85,"ion-radio",61),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(86,Ae,26,1,"div",17),u.YNc(87,qe,9,0,"div",17),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=i.index,t=u.oxw(4);u.xp6(3),u.hij("Person ",e+1," Details"),u.xp6(1),u.Q6J("formGroupName",e),u.xp6(8),u.Q6J("ngIf","Other"==t.injuryForm.value.person_details[e].injured_person_option),u.xp6(28),u.Q6J("ngIf","No"==t.injuryForm.value.person_details[e].normal_duties),u.xp6(17),u.Q6J("ngIf","No"===t.injuryForm.value.person_details[e].alternate_duties),u.xp6(6),u.Q6J("ngForOf",t.injuryList),u.xp6(1),u.Q6J("ngIf","Male"===t.injuryForm.value.person_details[e].gender),u.xp6(5),u.Q6J("ngForOf",t.bodyPartList),u.xp6(17),u.Q6J("ngIf","Yes"==t.injuryForm.value.person_details[e].was_immediate_treatment),u.xp6(1),u.Q6J("ngIf","No"==t.injuryForm.value.person_details[e].was_immediate_treatment)}}function we(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div",41),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(3).onProgressBar(i,"Injury")}),u.TgZ(1,"div",24),u.TgZ(2,"p"),u._uU(3),u.qZA(),u.TgZ(4,"img",25),u.NdJ("click",function(){u.CHM(e);const i=u.oxw().$implicit;return u.oxw(2).onDeSelectTabItem(i)}),u.qZA(),u.qZA(),u._UZ(5,"hr"),u.TgZ(6,"p",9),u._uU(7,"Number of Injured Person's :"),u.qZA(),u.TgZ(8,"ion-select",119),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(3).onAddMultiplePersonDetails(i)}),u.TgZ(9,"ion-select-option",120),u._uU(10,"1"),u.qZA(),u.TgZ(11,"ion-select-option",121),u._uU(12,"2"),u.qZA(),u.TgZ(13,"ion-select-option",122),u._uU(14,"3"),u.qZA(),u.TgZ(15,"ion-select-option",123),u._uU(16,"4"),u.qZA(),u.qZA(),u.YNc(17,be,88,10,"div",124),u.qZA()}if(2&e){const e=u.oxw().$implicit,i=u.oxw(2);u.Q6J("formGroup",i.injuryForm),u.xp6(3),u.Oqu(e),u.xp6(1),u.s9C("src",i.imagePath+"minus.png",u.LSH),u.xp6(13),u.Q6J("ngForOf",i.injuryPersonDetails.controls)}}function Fe(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div",41),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(3).onProgressBar(i,"Report")}),u.TgZ(1,"div",24),u.TgZ(2,"p"),u._uU(3),u.qZA(),u.TgZ(4,"img",25),u.NdJ("click",function(){u.CHM(e);const i=u.oxw().$implicit;return u.oxw(2).onDeSelectTabItem(i)}),u.qZA(),u.qZA(),u._UZ(5,"hr"),u.TgZ(6,"p",9),u._uU(7," What could have done differently ? : "),u.qZA(),u._UZ(8,"ion-input",183),u.qZA()}if(2&e){const e=u.oxw().$implicit,i=u.oxw(2);u.Q6J("formGroup",i.reportForm),u.xp6(3),u.Oqu(e),u.xp6(1),u.s9C("src",i.imagePath+"minus.png",u.LSH)}}function ye(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"ion-item",193),u.TgZ(1,"ion-label"),u._uU(2),u.qZA(),u.TgZ(3,"ion-checkbox",194),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(4).onReputationDamagesCheckBox(i)}),u.qZA(),u.qZA()}if(2&e){const e=i.$implicit;u.xp6(2),u.Oqu(e.val),u.xp6(1),u.Q6J("value",e.val)("checked",e.isChecked)}}function xe(e,i){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"p",9),u._uU(2," How has the Individual's reputation been damaged ? : "),u.qZA(),u._UZ(3,"ion-input",195),u.qZA())}function Ce(e,i){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"p",9),u._uU(2," How has the Company's reputation been damaged ? : "),u.qZA(),u._UZ(3,"ion-input",196),u.qZA())}function De(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"ion-item",198),u.TgZ(1,"ion-label"),u._uU(2),u.qZA(),u.TgZ(3,"ion-checkbox",194),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(5).onDepartmentEffectCheckBox(i)}),u.qZA(),u.qZA()}if(2&e){const e=i.$implicit;u.xp6(2),u.Oqu(e.val),u.xp6(1),u.Q6J("value",e.val)("checked",e.isChecked)}}function Ie(e,i){if(1&e&&(u.TgZ(0,"div"),u.TgZ(1,"ion-item",29),u.TgZ(2,"ion-label"),u._uU(3,"What Department was effected ? :"),u.qZA(),u.qZA(),u.YNc(4,De,4,3,"ion-item",197),u.qZA()),2&e){const e=u.oxw(4);u.xp6(4),u.Q6J("ngForOf",e.departmentEffect)}}function Ne(e,i){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"p",9),u._uU(2," Who is the external party ? : "),u.qZA(),u._UZ(3,"ion-input",199),u.qZA())}function Ue(e,i){1&e&&(u.TgZ(0,"div",200),u.TgZ(1,"p",66),u._uU(2," Other Witness Details "),u.qZA(),u.TgZ(3,"p",9),u._uU(4," Name : "),u.qZA(),u._UZ(5,"ion-input",201),u.TgZ(6,"p",9),u._uU(7," Mobile No : "),u.qZA(),u._UZ(8,"ion-input",202),u.TgZ(9,"p",9),u._uU(10," Email id : "),u.qZA(),u._UZ(11,"ion-input",203),u.qZA())}function ke(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div",41),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(3).onProgressBar(i,"Reputation")}),u.TgZ(1,"div",24),u.TgZ(2,"p"),u._uU(3),u.qZA(),u.TgZ(4,"img",25),u.NdJ("click",function(){u.CHM(e);const i=u.oxw().$implicit;return u.oxw(2).onDeSelectTabItem(i)}),u.qZA(),u.qZA(),u._UZ(5,"hr"),u.TgZ(6,"ion-item",29),u.TgZ(7,"ion-label",33),u._uU(8,"Was the reputation damages an individual or Company ? : "),u.qZA(),u.qZA(),u.YNc(9,ye,4,3,"ion-item",184),u.YNc(10,xe,4,0,"div",17),u.YNc(11,Ce,4,0,"div",17),u.TgZ(12,"ion-radio-group",185),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(3).onRepoNegativeEffect(i)}),u.TgZ(13,"ion-item",29),u.TgZ(14,"ion-label",33),u._uU(15,"Was the negative effect internal or external ? :"),u.qZA(),u.qZA(),u.TgZ(16,"ion-row",74),u.TgZ(17,"ion-col",186),u.TgZ(18,"ion-item",29),u.TgZ(19,"ion-label"),u._uU(20,"Internal"),u.qZA(),u._UZ(21,"ion-radio",187),u.qZA(),u.qZA(),u.TgZ(22,"ion-col",186),u.TgZ(23,"ion-item",29),u.TgZ(24,"ion-label"),u._uU(25,"External"),u.qZA(),u._UZ(26,"ion-radio",188),u.qZA(),u.qZA(),u.TgZ(27,"ion-col",186),u.TgZ(28,"ion-item",29),u.TgZ(29,"ion-label"),u._uU(30,"Both"),u.qZA(),u._UZ(31,"ion-radio",189),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(32,Ie,5,1,"div",17),u.YNc(33,Ne,4,0,"div",17),u.TgZ(34,"p",9),u._uU(35," Name of witness : "),u.qZA(),u.TgZ(36,"ion-item",35),u.NdJ("click",function(){return u.CHM(e),u.oxw(3).onOpenReputationModal()}),u._UZ(37,"ion-input",190),u.TgZ(38,"ion-buttons",37),u.TgZ(39,"ion-button",38),u._UZ(40,"ion-icon",39),u.qZA(),u.qZA(),u.qZA(),u.YNc(41,Ue,12,0,"div",191),u.TgZ(42,"p",9),u._uU(43," What is the possible outcome of this incident ? : "),u.qZA(),u._UZ(44,"ion-input",192),u.qZA()}if(2&e){const e=u.oxw().$implicit,i=u.oxw(2);u.Q6J("formGroup",i.reputationDesForm),u.xp6(3),u.Oqu(e),u.xp6(1),u.s9C("src",i.imagePath+"minus.png",u.LSH),u.xp6(5),u.Q6J("ngForOf",i.reputationCheckBox),u.xp6(1),u.Q6J("ngIf","Individual"==i.reputationDesForm.value.reputation_option[0]||"Individual"==i.reputationDesForm.value.reputation_option[1]),u.xp6(1),u.Q6J("ngIf","Company"==i.reputationDesForm.value.reputation_option[0]||"Company"==i.reputationDesForm.value.reputation_option[1]),u.xp6(21),u.Q6J("ngIf","Internal"==i.reputationDesForm.value.reputation_negative_effect||"Both"==i.reputationDesForm.value.reputation_negative_effect),u.xp6(1),u.Q6J("ngIf","External"==i.reputationDesForm.value.reputation_negative_effect||"Both"==i.reputationDesForm.value.reputation_negative_effect),u.xp6(8),u.Q6J("ngIf","Other"==i.reputationDesForm.value.name_of_witness)}}function je(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"ion-col",105),u.TgZ(1,"ion-item",198),u.TgZ(2,"ion-label",33),u._uU(3),u.qZA(),u.TgZ(4,"ion-checkbox",90),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(5).onSecurityItOption(i)}),u.qZA(),u.qZA(),u.qZA()}if(2&e){const e=i.$implicit;u.xp6(3),u.Oqu(e.val),u.xp6(1),u.Q6J("value",e.val)("checked",e.isChecked)}}function Pe(e,i){if(1&e&&(u.TgZ(0,"div"),u.TgZ(1,"ion-item",198),u.TgZ(2,"ion-label"),u._uU(3,"What kind of IT Security Incident ? :"),u.qZA(),u.qZA(),u.TgZ(4,"ion-row",74),u.YNc(5,je,5,3,"ion-col",208),u.qZA(),u.qZA()),2&e){const e=u.oxw(4);u.xp6(5),u.Q6J("ngForOf",e.itSecurityList)}}function Oe(e,i){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"p",9),u._uU(2," What has been stolen ? : "),u.qZA(),u._UZ(3,"ion-input",209),u.TgZ(4,"p",9),u._uU(5," Approximate value of stolen item ? : "),u.qZA(),u._UZ(6,"ion-input",210),u.qZA())}function Je(e,i){1&e&&(u.TgZ(0,"div"),u.TgZ(1,"p",9),u._uU(2," What is the Security incident ? : "),u.qZA(),u._UZ(3,"ion-input",211),u.qZA())}function Me(e,i){if(1&e){const e=u.EpF();u.TgZ(0,"div",41),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(3).onProgressBar(i,"Security")}),u.TgZ(1,"div",24),u.TgZ(2,"p"),u._uU(3),u.qZA(),u.TgZ(4,"img",25),u.NdJ("click",function(){u.CHM(e);const i=u.oxw().$implicit;return u.oxw(2).onDeSelectTabItem(i)}),u.qZA(),u.qZA(),u._UZ(5,"hr"),u.TgZ(6,"ion-radio-group",204),u.NdJ("ionChange",function(i){return u.CHM(e),u.oxw(3).onSecurityOption(i)}),u.TgZ(7,"ion-row",74),u.TgZ(8,"ion-col",28),u.TgZ(9,"ion-item",29),u.TgZ(10,"ion-label"),u._uU(11,"IT"),u.qZA(),u._UZ(12,"ion-radio",205),u.qZA(),u.qZA(),u.TgZ(13,"ion-col",28),u.TgZ(14,"ion-item",29),u.TgZ(15,"ion-label"),u._uU(16,"Theft"),u.qZA(),u._UZ(17,"ion-radio",206),u.qZA(),u.qZA(),u.TgZ(18,"ion-col",28),u.TgZ(19,"ion-item",29),u.TgZ(20,"ion-label"),u._uU(21,"Other"),u.qZA(),u._UZ(22,"ion-radio",207),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(23,Pe,6,1,"div",17),u.YNc(24,Oe,7,0,"div",17),u.YNc(25,Je,4,0,"div",17),u.qZA()}if(2&e){const e=u.oxw().$implicit,i=u.oxw(2);u.Q6J("formGroup",i.securityForm),u.xp6(3),u.Oqu(e),u.xp6(1),u.s9C("src",i.imagePath+"minus.png",u.LSH),u.xp6(19),u.Q6J("ngIf","IT"==i.securityForm.value.security_option),u.xp6(1),u.Q6J("ngIf","Theft"==i.securityForm.value.security_option),u.xp6(1),u.Q6J("ngIf","Other"==i.securityForm.value.security_option)}}function Se(e,i){if(1&e&&(u.TgZ(0,"span"),u.YNc(1,K,4,2,"ion-button",101),u.YNc(2,oe,31,7,"div",21),u.YNc(3,ue,41,5,"div",21),u.YNc(4,we,18,4,"div",21),u.YNc(5,Fe,9,3,"div",21),u.YNc(6,ke,45,9,"div",21),u.YNc(7,Me,26,6,"div",21),u.qZA()),2&e){const e=i.$implicit,t=u.oxw(2);u.xp6(1),u.Q6J("ngIf",t.selectedTabItem!=e),u.xp6(1),u.Q6J("ngIf",t.selectedTabItem==e&&"Asset"==e),u.xp6(1),u.Q6J("ngIf",t.selectedTabItem==e&&"Environmental"==e),u.xp6(1),u.Q6J("ngIf",t.selectedTabItem==e&&"Injury"==e),u.xp6(1),u.Q6J("ngIf",t.selectedTabItem==e&&"Report"==e),u.xp6(1),u.Q6J("ngIf",t.selectedTabItem==e&&"Reputation"==e),u.xp6(1),u.Q6J("ngIf",t.selectedTabItem==e&&"Security"==e)}}function Le(e,i){if(1&e&&(u.TgZ(0,"span"),u.YNc(1,Se,8,7,"span",16),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngForOf",e.selectedTabList)}}const Ye=[{path:"",component:(()=>{class e{constructor(e,i,t,n,o,a,s,r,c,_){this.globalService=e,this.sharedService=i,this.modalController=t,this.actionSheetController=n,this.camera=o,this.fb=a,this.nav=s,this.platform=r,this.activatedRoute=c,this.loadingService=_,this.imagePath=l.N.imageUrl,this.witnessList=[],this.shiftTypeList=[],this.superVisorList=[],this.locationList=[],this.bodyPartList=[],this.employeeList=[],this.managerList=[],this.reputationWitnessList=[],this.incidentDetails=[],this.selectedTabList=[],this.form_percent=0,this.form_percent_val=0,this.incident_near_miss="",this.was_there_any_witness_of_the_incident="",this.classification_supervisor="",this.classification_manager="",this.injured_person_option="",this.immediate_treatment_person_name="",this.name_of_witness="",this.photoGraphy=[],this.photoGraphyObject={},this.alcohalImages=[],this.alcohalImagesObject={},this.drugTestImages=[],this.drugTestImagesObject={},this.alterDutyImages=[],this.alterDutyImagesObject={},this.chemicalImages=[],this.chemicalImagesObject={},this.damageImages=[],this.damageImagesObject={},this.tabList=[{val:"Incident",tabDisable:!1},{val:"Photography",tabDisable:!0},{val:"Incident Description",tabDisable:!0},{val:"Classification",tabDisable:!0}],this.selectedTabItem="Incident",this.classificationList=[{val:"Asset",isChecked:!1},{val:"Environmental",isChecked:!1},{val:"Injury",isChecked:!1},{val:"Report",isChecked:!1},{val:"Reputation",isChecked:!1},{val:"Security",isChecked:!1}],this.itSecurityList=[{val:"Intrusion",isChecked:!1},{val:"Privacy breach",isChecked:!1},{val:"Ransom ware",isChecked:!1},{val:"Security",isChecked:!1}],this.reputationCheckBox=[{val:"Company",isChecked:!1},{val:"Individual",isChecked:!1}],this.departmentEffect=[{val:"Dubbo Division",isChecked:!1},{val:"Mudgee Division",isChecked:!1},{val:"Orange Division",isChecked:!1},{val:"Project Services",isChecked:!1},{val:"West Wyalong Division",isChecked:!1}],this.injuryList=m[0].K}ngOnInit(){this.loadShift(),this.loadLocation(),this.loadBodyPart(),this.loadEmployee(),this.loadWitness(),this.loadSuperwiser(),this.incidentForm=this.fb.group({incident_value:[""],incident_near_miss:[""],incident_near_miss_other:[""]}),this.photoGraphyForm=this.fb.group({photography_image:[""]}),this.incidentDesForm=this.fb.group({incident_description:["",o.kI.required],incident_description_action:["",o.kI.required],seen_differently:[""],was_there_any_witness_of_the_incident:[""],incdesc_other_witness_details:this.fb.group({incdesc_other_witness_name:[""],incdesc_other_witness_mobile_no:[""],incdesc_other_witness_email:[""]}),incident_description_photo:[""],incident_description_alcohol_test:[""],alcohol_test_image:[""],drug_test_completed:[""],drug_test_image:[""],return_to_alternate_duties:[""],return_to_alternate_duties_image:[""]}),this.classificationForm=this.fb.group({classification_value:new o.Oe([]),date_of_incident:[""],time_of_incident:[""],date_reported:[""],time_reported:[""],classification_location_option:[""],classification_location_value:[""],classification_location_value1:[""],classification_shift_type:[""],classification_supervisor:[""],classification_supervisor_other_details:this.fb.group({classification_supervisor_other_name:[""],classification_supervisor_other_mobile_no:[""],classification_supervisor_other_email:[""]}),classification_manager:["",o.kI.required],classification_manager_other_details:this.fb.group({classification_manager_other_name:[""],classification_manager_other_mobile_no:[""],classification_manager_other_email:[""]})}),this.injuryForm=this.fb.group({injury_persons:[""],person_details:this.fb.array([])}),this.enviornmentForm=this.fb.group({environmental_description:[""],was_a_chemical_split:[""],chemical_details:this.fb.group({chemical_name:[""],chemical_photo:[""],approximate_quantity:[""],insertPhotoCheckBox:[!1]}),emergency_spill_kit_used:[""],out_of_split_kit:[""]}),this.reputationDesForm=this.fb.group({reputation_option:new o.Oe([]),individual_damage_value:[""],company_damage_value:[""],reputation_negative_effect:[""],effected_department:new o.Oe([]),external_party:[""],name_of_witness:[""],other_witness_details:this.fb.group({other_witness_name:[""],other_witness_mobile_no:[""],other_witness_email:[""]}),possible_outcome_incident:[""]}),this.securityForm=this.fb.group({security_option:[""],it_option_value:new o.Oe([]),what_has_been_stolen_item:[""],approximate_value_of_stolen:[""],what_is_the_specific_securities_incident:[""]}),this.assetDescriptionForm=this.fb.group({asset_description:[""],asset_has_number:[""],asset_number:[""],extent_of_damage:[""],extent_damage_image:[""]}),this.reportForm=this.fb.group({report:[""]}),this.loadIncidentDetails()}loadEmployee(){this.globalService.getData("user/getallemployee").subscribe(e=>{this.employeeList=e&&e.status&&e.data&&e.data.length>0?e.data:[],this.employeeList.unshift({full_name:"Other",employee_id:"0"})},e=>{console.log(e)})}loadWitness(){this.globalService.getData("Witness/getWitnessList").subscribe(e=>{this.witnessList=e&&e.status&&e.data&&e.data.length>0?e.data:[],this.witnessList.unshift({full_name:"Other",employee_id:"0"})},e=>{console.log(e)})}loadMangerList(){this.globalService.getData("Manager/getManagerList").subscribe(e=>{this.managerList=e&&e.status&&e.data&&e.data.length>0?e.data:[],this.managerList.unshift({full_name:"Other",employee_id:"0"})},e=>{console.log(e)})}loadSuperwiser(){this.globalService.getData("Supervisor/getSupervisorList").subscribe(e=>{this.superVisorList=e&&e.status&&e.data&&e.data.length>0?e.data:[],this.superVisorList.unshift({full_name:"Other",employee_id:"0"})},e=>{console.log("Eror",e)})}loadShift(){this.globalService.getData("Shift/get_shift_typelist").subscribe(e=>{this.shiftTypeList=e&&e.status&&e.data&&e.data.length>0?e.data:[]},e=>{console.log("Eror",e)})}loadLocation(){this.globalService.getData("location/getLocation").subscribe(e=>{this.locationList=e&&e.status&&e.data&&e.data.length>0?e.data:[]},e=>{console.log("Eror",e)})}loadBodyPart(){this.globalService.getData("Body_part/getbodypart").subscribe(e=>{this.bodyPartList=e&&e.status&&e.data&&e.data.length>0?e.data:[]},e=>{console.log("Eror",e)})}loadIncidentDetails(){this.activatedRoute.params.subscribe(e=>{this.globalService.getData("add_form/getSingleData?table_name=add_form&id="+e.incident_id).subscribe(e=>{if(e&&e.data&&e.data[0]){if(this.incidentDetails=e.data[0],""!=this.incidentDetails.incident_near_miss&&null!=this.incidentDetails.incident_near_miss){let e;this.witnessList.forEach(i=>{i.full_name==this.incidentDetails.incident_near_miss&&(e=i)}),null!=e?this.incident_near_miss=e:this.globalService.getData("Witness/getWitnessList/?term="+this.incidentDetails.incident_near_miss).subscribe(e=>{e&&e.status&&e.data&&e.data.length>0&&(this.incident_near_miss=e.data[0])},e=>{console.log("Eror",e)})}if(this.incidentForm.patchValue(this.incidentDetails),this.onInput("","Incident"),this.incidentDetails.photography_image.length>0){for(let e=0;e<this.incidentDetails.photography_image.length;e++)this.photoGraphy.push(this.incidentDetails.photography_image[e]);this.photoGraphyObject=this.incidentDetails.photography_image}if(""!=this.incidentDetails.was_there_any_witness_of_the_incident||null!=this.incidentDetails.was_there_any_witness_of_the_incident){let e;this.witnessList.forEach(i=>{i.full_name==this.incidentDetails.was_there_any_witness_of_the_incident&&(e=i)}),null!=e?this.was_there_any_witness_of_the_incident=e:""!=this.incidentDetails.was_there_any_witness_of_the_incident&&null!=this.incidentDetails.was_there_any_witness_of_the_incident&&this.globalService.getData("Witness/getWitnessList/?term="+this.incidentDetails.was_there_any_witness_of_the_incident).subscribe(e=>{e&&e.status&&e.data&&e.data.length>0&&(this.was_there_any_witness_of_the_incident=e.data[0])},e=>{console.log("Eror",e)})}if(this.incidentDesForm.patchValue(this.incidentDetails),this.incidentDetails.alcohol_test_image.length>0){for(let e=0;e<this.incidentDetails.alcohol_test_image.length;e++)this.alcohalImages.push(this.incidentDetails.alcohol_test_image[e]);this.alcohalImagesObject=this.incidentDetails.alcohol_test_image}if(this.incidentDetails.drug_test_image.length>0){for(let e=0;e<this.incidentDetails.drug_test_image.length;e++)this.drugTestImages.push(this.incidentDetails.drug_test_image[e]);this.drugTestImagesObject=this.incidentDetails.drug_test_image}if(this.incidentDetails.return_to_alternate_duties_image.length>0){for(let e=0;e<this.incidentDetails.return_to_alternate_duties_image.length;e++)this.alterDutyImages.push(this.incidentDetails.return_to_alternate_duties_image[e]);this.alterDutyImagesObject=this.incidentDetails.return_to_alternate_duties_image}this.onInput("","Incident Description");let i=this.classificationForm.get("classification_value");if(""!=this.incidentDetails.classification_value&&(this.selectedTabList=this.incidentDetails.classification_value.split(","),this.selectedTabList&&this.selectedTabList.length>0&&this.classificationList.forEach(e=>{this.selectedTabList.find(t=>{e.val==t&&(i.push(new o.NI(t)),e.isChecked=!0)})})),this.classificationForm.controls.date_of_incident.setValue(this.incidentDetails.date_of_incident),this.classificationForm.controls.time_of_incident.setValue(this.incidentDetails.time_of_incident),this.classificationForm.controls.date_reported.setValue(this.incidentDetails.date_reported),this.classificationForm.controls.time_reported.setValue(this.incidentDetails.time_reported),this.classificationForm.controls.classification_location_option.setValue(this.incidentDetails.classification_location_option),"Add Location"==this.incidentDetails.classification_location_option&&this.classificationForm.controls.classification_location_value.setValue(this.incidentDetails.classification_location_value),"Choose Location"==this.incidentDetails.classification_location_option&&this.classificationForm.controls.classification_location_value1.setValue(this.incidentDetails.classification_location_value),this.classificationForm.controls.classification_shift_type.setValue(this.incidentDetails.classification_shift_type),""!=this.incidentDetails.classification_supervisor||null!=this.incidentDetails.classification_supervisor){let e;this.witnessList.forEach(i=>{i.full_name==this.incidentDetails.classification_supervisor&&(e=i)}),null!=e?this.classification_supervisor=e:this.globalService.getData("Supervisor/getSupervisorList?term="+this.incidentDetails.classification_supervisor).subscribe(e=>{e&&e.status&&e.data&&e.data.length>0&&(this.classification_supervisor=e.data[0])},e=>{console.log("Eror",e)}),this.classificationForm.controls.classification_supervisor.setValue(this.incidentDetails.classification_supervisor),this.classificationForm.controls.classification_supervisor_other_details.patchValue(this.incidentDetails.classification_supervisor_other_details)}if(""!=this.incidentDetails.classification_manager||null!=this.incidentDetails.classification_manager){let e;this.witnessList.forEach(i=>{i.full_name==this.incidentDetails.classification_manager&&(e=i)}),null!=e?this.classification_manager=e:this.globalService.getData("Manager/getManagerList/?term="+this.incidentDetails.classification_manager).subscribe(e=>{e&&e.status&&e.data&&e.data.length>0&&(this.classification_manager=e.data[0])},e=>{console.log("Eror",e)}),this.classificationForm.controls.classification_manager.setValue(this.incidentDetails.classification_manager),this.classificationForm.controls.classification_manager_other_details.patchValue(this.incidentDetails.classification_manager_other_details)}if(this.assetDescriptionForm.patchValue(this.incidentDetails),this.incidentDetails.extent_damage_image.length>0){for(let e=0;e<this.incidentDetails.extent_damage_image.length;e++)this.damageImages.push(this.incidentDetails.extent_damage_image[e]);this.damageImagesObject=this.incidentDetails.extent_damage_image}if(this.enviornmentForm.patchValue(this.incidentDetails),this.incidentDetails.chemical_details.chemical_photo.length>0&&this.enviornmentForm.controls.chemical_details.value.insertPhotoCheckBox.setValue(!0),this.incidentDetails.chemical_details.chemical_photo.length>0){for(let e=0;e<this.incidentDetails.chemical_details.chemical_photo.length;e++)this.chemicalImages.push(this.incidentDetails.chemical_details.chemical_photo[e]);this.chemicalImagesObject=this.incidentDetails.chemical_details.chemical_photo}this.injuryForm.controls.injury_persons.setValue(this.incidentDetails.injury_persons),this.incidentDetails.person_details.length>0&&this.injuryForm.setControl("person_details",this.setPersonDetails(this.incidentDetails.person_details)),this.reportForm.patchValue(this.incidentDetails);let t=this.incidentDetails.reputation_option.split(","),n=this.reputationDesForm.get("reputation_option");this.reputationCheckBox.forEach(e=>{t.find(i=>{e.val==i&&(n.push(new o.NI(i)),e.isChecked=!0)})}),this.reputationDesForm.controls.individual_damage_value.setValue(this.incidentDetails.individual_damage_value),this.reputationDesForm.controls.company_damage_value.setValue(this.incidentDetails.company_damage_value),this.reputationDesForm.controls.reputation_negative_effect.setValue(this.incidentDetails.reputation_negative_effect);let a=this.incidentDetails.effected_department.split(","),s=this.reputationDesForm.get("effected_department");if(this.departmentEffect.forEach(e=>{a.find(i=>{e.val==i&&(s.push(new o.NI(i)),e.isChecked=!0)})}),this.reputationDesForm.controls.external_party.setValue(this.incidentDetails.external_party),""!=this.incidentDetails.name_of_witness||null!=this.incidentDetails.name_of_witness){let e;this.witnessList.forEach(i=>{i.full_name==this.incidentDetails.name_of_witness&&(e=i)}),null!=e?this.name_of_witness=e:""!=this.incidentDetails.name_of_witness&&null!=this.incidentDetails.name_of_witness&&this.globalService.getData("Witness/getWitnessList/?term="+this.incidentDetails.name_of_witness).subscribe(e=>{e&&e.status&&e.data&&e.data.length>0&&(this.name_of_witness=e.data[0])},e=>{console.log("Eror",e)})}this.reputationDesForm.controls.name_of_witness.setValue(this.incidentDetails.name_of_witness),this.reputationDesForm.controls.other_witness_details.setValue(this.incidentDetails.other_witness_details),this.reputationDesForm.controls.possible_outcome_incident.setValue(this.incidentDetails.possible_outcome_incident),this.securityForm.controls.security_option.setValue(this.incidentDetails.security_option),this.securityForm.controls.what_has_been_stolen_item.setValue(this.incidentDetails.what_has_been_stolen_item),this.securityForm.controls.approximate_value_of_stolen.setValue(this.incidentDetails.approximate_value_of_stolen),this.securityForm.controls.what_is_the_specific_securities_incident.setValue(this.incidentDetails.what_is_the_specific_securities_incident);let r=this.incidentDetails.it_option_value.split(","),l=this.securityForm.get("it_option_value");this.itSecurityList.forEach(e=>{r.find(i=>{e.val==i&&(l.push(new o.NI(i)),e.isChecked=!0)})})}this.onProgressBar("","")})})}setPersonDetails(e){const i=new o.Oe([]);return e.forEach(e=>{i.push(this.fb.group({injured_person_option:[e.injured_person_option],injured_person_option_id:[e.injured_person_option_id],injured_person_option_other_details:this.fb.group({injured_person_option_other_name:[e.injured_person_option_other_details.injured_person_option_other_name],injured_person_option_other_mobile_no:[e.injured_person_option_other_details.injured_person_option_other_mobile_no],injured_person_option_other_email:[e.injured_person_option_other_details.injured_person_option_other_email]}),gender:[e.gender],date_of_birth:[e.date_of_birth],normal_duties:[e.normal_duties],normal_duties_explanation:[e.normal_duties_explanation],alternate_duties:[e.alternate_duties],duties_explanation:[e.duties_explanation],initital_injury:[e.initital_injury],part_of_body_injured_occured:[e.part_of_body_injured_occured],was_immediate_treatment:[e.was_immediate_treatment],was_immediate_treatment_comment:[e.was_immediate_treatment_comment],immediate_treatment_given_explanation:[e.immediate_treatment_given_explanation],immediate_treatment_person_name_id:[e.immediate_treatment_person_name_id],immediate_treatment_person_name:[e.immediate_treatment_person_name],immediate_treatment_other_person_detail:this.fb.group({immediate_treatment_other_name:[e.immediate_treatment_other_person_detail.immediate_treatment_other_name],immediate_treatment_person_number:[e.immediate_treatment_other_person_detail.immediate_treatment_person_number],immediate_treatment_other_email:[e.immediate_treatment_other_person_detail.immediate_treatment_other_email]})}))}),i}onSelectTabItem(e){this.selectedTabItem=e}onDeSelectTabItem(e){this.selectedTabItem="","Classification"==e&&(this.selectedTabList=this.selectedTabList)}pickImage(e,i){let t;this.loadingService.presentLoading(),this.camera.getPicture({quality:100,sourceType:e,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(e=>{t="data:image/jpeg;base64,"+e,""!=t||null!=t?("PhotoGraphy"==i&&(this.photoGraphy.length<0?this.photoGraphy.push(t):this.photoGraphy.unshift(t)),"Alcohol"==i&&(this.alcohalImages.length<0?this.alcohalImages.push(t):this.alcohalImages.unshift(t)),"Drug"==i&&(this.drugTestImages.length<0?this.drugTestImages.push(t):this.drugTestImages.unshift(t)),"ReturnToAlternateDuty"==i&&(this.alterDutyImages.length<0?this.alterDutyImages.push(t):this.alterDutyImages.unshift(t)),"ChemicalImage"==i&&(this.chemicalImages.length<0?this.chemicalImages.push(t):this.chemicalImages.unshift(t)),"DamageImage"==i&&(this.damageImages.length<0?this.damageImages.push(t):this.damageImages.unshift(t)),this.onProgressBar("",""),this.loadingService.dismissLoading()):(console.log("Error in image processing."),this.loadingService.dismissLoading())},e=>{this.loadingService.dismissLoading(),console.log("errOf Image ",e)})}mobileUploads(e){return(0,r.mG)(this,void 0,void 0,function*(){const i=yield this.actionSheetController.create({header:"Select Image source",buttons:[{text:"Load from Library",handler:()=>{this.pickImage(this.camera.PictureSourceType.PHOTOLIBRARY,e)}},{text:"Use Camera",handler:()=>{this.pickImage(this.camera.PictureSourceType.CAMERA,e)}},{text:"Cancel",role:"cancel"}]});yield i.present()})}onPhotoGraphy(e,i){return(0,r.mG)(this,void 0,void 0,function*(){if(1==i)this.mobileUploads("PhotoGraphy");else if(2==i)for(let i=0;i<e.target.files.length;i++)this.sharedService.getBase64(e.target.files[i]).then(e=>{this.photoGraphy.length<=0?this.photoGraphy.push(e):this.photoGraphy.unshift(e),this.photoGraphyForm.controls.photography_image.setValue(this.photoGraphy),this.onProgressBar("","")}).catch(e=>{console.log("error",e)})})}onAlcoholImage(e,i){if(1==i)this.mobileUploads("Alcohol");else if(2==i)for(let t=0;t<e.target.files.length;t++)this.sharedService.getBase64(e.target.files[t]).then(e=>{this.alcohalImages.length<=0?this.alcohalImages.push(e):this.alcohalImages.unshift(e),this.incidentDesForm.controls.alcohol_test_image.setValue(this.alcohalImages),this.onProgressBar("","")}).catch(e=>{console.log("error",e)})}onAlcohalTestSelect(e){"Yes"!=e.target.value&&(this.alcohalImages=[])}onDrugTestImage(e,i){if(1==i)this.mobileUploads("Drug");else if(2==i)for(let t=0;t<e.target.files.length;t++)this.sharedService.getBase64(e.target.files[t]).then(e=>{this.drugTestImages.length<=0?this.drugTestImages.push(e):this.drugTestImages.unshift(e),this.incidentDesForm.controls.drug_test_image.setValue(this.drugTestImages),this.onProgressBar("","")}).catch(e=>{console.log("error",e)})}onDrugTestSelect(e){"Yes"!=e.target.value&&(this.drugTestImages=[])}onReturnToDutyImage(e,i){if(1==i)this.mobileUploads("ReturnToAlternateDuty");else if(2==i)for(let t=0;t<e.target.files.length;t++)this.sharedService.getBase64(e.target.files[t]).then(e=>{this.alterDutyImages.length<=0?this.alterDutyImages.push(e):this.alterDutyImages.unshift(e),this.onProgressBar("","")}).catch(e=>{console.log("error",e)})}onReturnToDutySelect(e){"Yes"!=e.target.value&&(this.alterDutyImages=[])}onSelectDamageImage(e,i){if(1==i)this.mobileUploads("DamageImage");else if(2==i)for(let t=0;t<e.target.files.length;t++)this.sharedService.getBase64(e.target.files[t]).then(e=>{this.damageImages.length<=0?this.damageImages.push(e):this.damageImages.unshift(e),this.assetDescriptionForm.controls.extent_damage_image.setValue(this.damageImages),this.onProgressBar("","")}).catch(e=>{console.log("error",e)})}onChemicalImageSelect(e,i){if(1==i)this.mobileUploads("ChemicalImage");else if(2==i)for(let n=0;n<e.target.files.length;n++)this.sharedService.getBase64(e.target.files[n]).then(e=>{this.chemicalImages.length<=0?this.chemicalImages.push(e):this.chemicalImages.unshift(e),this.enviornmentForm.controls.chemical_details.patchValue(t),this.onProgressBar("","")}).catch(e=>{console.log("error",e)});let t={chemical_photo:this.chemicalImagesObject};this.enviornmentForm.controls.chemical_details.patchValue(t)}onInsertImageSelect(e){e.detail.checked||(this.chemicalImages=[])}onImageDelete(e,i){this[i].splice(e,1),this.onProgressBar("","")}onOpenIncidentModal(){return(0,r.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:c.Y,componentProps:{list:this.witnessList,header:"Witness List"},cssClass:"managers"});return e.onDidDismiss().then(e=>{e&&(null==e?void 0:e.data)&&(this.incidentForm.controls.incident_near_miss.setValue(e.data.full_name),this.incident_near_miss=e.data)}),yield e.present()})}onOpenIncDesModal(){return(0,r.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:c.Y,componentProps:{list:this.witnessList,header:"Witness List"},cssClass:"managers"});return e.onDidDismiss().then(e=>{e&&(null==e?void 0:e.data)&&(this.incidentDesForm.controls.was_there_any_witness_of_the_incident.setValue(e.data.full_name),this.was_there_any_witness_of_the_incident=e.data)}),yield e.present()})}onOpenClassiModal(e){return(0,r.mG)(this,void 0,void 0,function*(){let i=[];"Supervisor List"==e&&(i=this.superVisorList),"Manager List"==e&&(i=this.employeeList);const t=yield this.modalController.create({component:c.Y,componentProps:{list:i,header:e},cssClass:"managers"});return t.onDidDismiss().then(i=>{i&&(null==i?void 0:i.data)&&("Supervisor List"==e?(this.classificationForm.controls.classification_supervisor.setValue(i.data.full_name),this.classification_supervisor=i.data,"Other"!=i.data.full_name&&this.classificationForm.controls.classification_supervisor_other_details.patchValue({classification_supervisor_other_name:"",classification_supervisor_other_mobile_no:"",classification_supervisor_other_email:""})):"Manager List"==e&&(this.classificationForm.controls.classification_manager.setValue(i.data.full_name),this.classification_manager=i.data,"Other"!=i.data.full_name)&&this.classificationForm.controls.classification_manager_other_details.patchValue({classification_manager_other_name:"",classification_manager_other_mobile_no:"",classification_manager_other_email:""}))}),yield t.present()})}onOpenInjuryModal(e,i){return(0,r.mG)(this,void 0,void 0,function*(){const t=yield this.modalController.create({component:c.Y,componentProps:{list:this.employeeList,header:"Employee List"},cssClass:"managers"});return""!=this.injuryPersonDetails.value[i].injured_person_option&&"Other"!=this.injuryPersonDetails.value[i].injured_person_option&&this.injuryPersonDetails.controls[i].patchValue({injured_person_option_other_details:{injured_person_option_other_name:"",injured_person_option_other_mobile_no:"",injured_person_option_other_email:""}}),t.onDidDismiss().then(t=>{t&&(null==t?void 0:t.data)&&("Injured person"==e&&this.injuryPersonDetails.controls[i].patchValue({injured_person_option:t.data.full_name,injured_person_option_id:t.data.employee_id}),"Injured administered"==e&&this.injuryPersonDetails.controls[i].patchValue({immediate_treatment_person_name:t.data.full_name,immediate_treatment_person_name_id:t.data.employee_id,immediate_treatment_other_person_detail:{immediate_treatment_person_number:t.data.emp_mobile,immediate_treatment_other_email:t.data.emp_work_email?t.data.emp_work_email:t.data.emp_oth_email}}))}),yield t.present()})}onOpenReputationModal(){return(0,r.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:c.Y,componentProps:{list:this.witnessList,header:"Witness List"},cssClass:"managers"});return e.onDidDismiss().then(e=>{e&&(null==e?void 0:e.data)&&(this.reputationDesForm.controls.name_of_witness.setValue(e.data.full_name),this.name_of_witness=e.data)}),yield e.present()})}onOpenPreview(e){return(0,r.mG)(this,void 0,void 0,function*(){(yield this.modalController.create({component:_.e,cssClass:"transparent-modal",componentProps:{img:e}})).present()})}validation(){let e=!1,i=!1,t=!1,n=!1;if(this.classificationForm.value.classification_value.find(o=>{"Environmental"==o&&(e=!0),"Reputation"==o&&(i=!0),"Asset"==o&&(t=!0),"Report"==o&&(n=!0)}),""===this.incidentForm.value.incident_value||null==this.incidentForm.value.incident_value)this.globalService.presentToast("Incident : Incident is Required");else if(""===this.incidentDesForm.value.incident_description||null==this.incidentDesForm.value.incident_description)this.globalService.presentToast("Incident Description - Please enter Description of incident");else if(""===this.incidentDesForm.value.incident_description_action||null==this.incidentDesForm.value.incident_description_action)this.globalService.presentToast("Incident Description - Immediate action taken filed is Required");else if(""==this.classificationForm.value.classification_manager||null==this.classificationForm.value.classification_manager)this.globalService.presentToast("Classification - Please Select the manager");else if(""!==this.enviornmentForm.value.environmental_description&&null!=this.enviornmentForm.value.environmental_description||!e)if(""!==this.reputationDesForm.value.name_of_witness&&null!=this.reputationDesForm.value.name_of_witness&&null!=this.reputationDesForm.value.name_of_witness||!i)if(""!=this.reputationDesForm.value.name_of_witness&&null!=this.reputationDesForm.value.name_of_witness||!i)if("Other"!=this.reputationDesForm.value.name_of_witness||""!=this.reputationDesForm.value.other_witness_details.other_witness_name&&null!=this.reputationDesForm.value.other_witness_details.other_witness_name&&null!=this.reputationDesForm.value.other_witness_details.other_witness_name||!i)if("Other"!=this.reputationDesForm.value.name_of_witness||""!=this.reputationDesForm.value.other_witness_details.other_witness_mobile_no&&null!=this.reputationDesForm.value.other_witness_details.other_witness_mobile_no&&null!=this.reputationDesForm.value.other_witness_details.other_witness_mobile_no||!i)if("Other"!=this.reputationDesForm.value.name_of_witness||""!=this.reputationDesForm.value.other_witness_details.other_witness_email&&null!=this.reputationDesForm.value.other_witness_details.other_witness_email&&null!=this.reputationDesForm.value.other_witness_details.other_witness_email||!i)if(""!==this.reputationDesForm.value.possible_outcome_incident&&null!=this.reputationDesForm.value.possible_outcome_incident||!i)if(""!==this.assetDescriptionForm.value.asset_description&&null!=this.assetDescriptionForm.value.asset_description||!t)if(""!==this.assetDescriptionForm.value.extent_of_damage&&null!=this.assetDescriptionForm.value.extent_of_damage||!t){if(""!==this.reportForm.value.report&&null!=this.reportForm.value.report||!n)return!0;this.globalService.presentToast("Report - Please enter what could have been done differently")}else this.globalService.presentToast("Asset - Please enter Extent of Damage");else this.globalService.presentToast("Asset - Please enter asset description");else this.globalService.presentToast("Reputation - Please enter possible outcome of this incident");else this.globalService.presentToast("Reputation - Please enter other witness email.");else this.globalService.presentToast("Reputation - Please enter other witness mobile no.");else this.globalService.presentToast("Reputation - Please enter other witness name.");else this.globalService.presentToast("Reputation - Please enter witness name.");else this.globalService.presentToast("Reputation - Please enter name of any witness");else this.globalService.presentToast("Environmental - Please enter Immediate action taken to minimize Environmental impact")}onSubmit(e){this.photoGraphy.length>0&&(this.photoGraphyObject=Object.assign({},this.photoGraphy)),this.alcohalImages.length>0&&(this.alcohalImagesObject=Object.assign({},this.alcohalImages)),this.drugTestImages.length>0&&(this.drugTestImagesObject=Object.assign({},this.drugTestImages)),this.alterDutyImages.length>0&&(this.alterDutyImagesObject=Object.assign({},this.alterDutyImages)),this.damageImages.length>0&&(this.damageImagesObject=Object.assign({},this.damageImages)),this.chemicalImages.length>0&&(this.chemicalImagesObject=Object.assign({},this.chemicalImages));let i=JSON.parse(localStorage.getItem("userDetails")),t=!1;if("submit"==e&&(t=this.validation()),"submit"==e&&t||"incomplete_submit"==e&&0==t){let t=new FormData;t.append("incident_value",this.incidentForm.value.incident_value?this.incidentForm.value.incident_value:""),t.append("incident_near_miss",this.incidentForm.value.incident_near_miss?this.incidentForm.value.incident_near_miss:""),t.append("incident_near_miss_other",this.incidentForm.value.incident_near_miss_other?this.incidentForm.value.incident_near_miss_other:""),t.append("photography_image",this.photoGraphyObject.length>0?JSON.stringify(this.photoGraphyObject):""),t.append("incident_description",this.incidentDesForm.value.incident_description?this.incidentDesForm.value.incident_description:""),t.append("incident_description_action",this.incidentDesForm.value.incident_description_action?this.incidentDesForm.value.incident_description_action:""),t.append("incident_description_alcohol_test",this.incidentDesForm.value.incident_description_alcohol_test?this.incidentDesForm.value.incident_description_alcohol_test:""),t.append("alcohol_test_completed",this.incidentDesForm.value.incident_description_alcohol_test?this.incidentDesForm.value.incident_description_alcohol_test:""),t.append("drug_test_completed",this.incidentDesForm.value.drug_test_completed?this.incidentDesForm.value.drug_test_completed:""),t.append("seen_differently",this.incidentDesForm.value.seen_differently?this.incidentDesForm.value.seen_differently:""),t.append("was_there_any_witness_of_the_incident",this.was_there_any_witness_of_the_incident&&this.was_there_any_witness_of_the_incident.employee_id?this.was_there_any_witness_of_the_incident.employee_id:""),t.append("incdesc_other_witness_details",JSON.stringify(this.incidentDesForm.value.incdesc_other_witness_details)),t.append("return_to_alternate_duties",this.incidentDesForm.value.return_to_alternate_duties?this.incidentDesForm.value.return_to_alternate_duties:""),t.append("alcohol_test_image",this.alcohalImagesObject.length>0?JSON.stringify(this.alcohalImagesObject):""),t.append("drug_test_image",this.drugTestImagesObject.length>0?JSON.stringify(this.drugTestImagesObject):""),t.append("return_to_alternate_duties_image",this.alterDutyImagesObject.length>0?JSON.stringify(this.alterDutyImagesObject):""),t.append("classification_value",this.classificationForm.value.classification_value.length>0?this.classificationForm.value.classification_value.join(","):""),t.append("date_of_incident",this.classificationForm.value.date_of_incident?this.classificationForm.value.date_of_incident:""),t.append("time_of_incident",this.classificationForm.value.time_of_incident?this.classificationForm.value.time_of_incident:""),t.append("date_reported",this.classificationForm.value.date_reported?this.classificationForm.value.date_reported:""),t.append("time_reported",this.classificationForm.value.time_reported?this.classificationForm.value.time_reported:""),t.append("classification_location_option",this.classificationForm.value.classification_location_option?this.classificationForm.value.classification_location_option:""),"Add Location"==this.classificationForm.value.classification_location_option&&t.append("classification_location_value",this.classificationForm.value.classification_location_value?this.classificationForm.value.classification_location_value:""),"Choose Location"==this.classificationForm.value.classification_location_option&&t.append("classification_location_value",this.classificationForm.value.classification_location_value1?this.classificationForm.value.classification_location_value1:""),t.append("classification_shift_type",this.classificationForm.value.classification_shift_type?this.classificationForm.value.classification_shift_type:""),t.append("classification_supervisor",this.classification_supervisor&&this.classification_supervisor.employee_id?this.classification_supervisor.employee_id:""),t.append("classification_supervisor_other_details",JSON.stringify(this.classificationForm.value.classification_supervisor_other_details)),t.append("classification_manager",this.classification_manager&&this.classification_manager.employee_id?this.classification_manager.employee_id:""),t.append("classification_manager_other_details",JSON.stringify(this.classificationForm.value.classification_manager_other_details)),t.append("injury_persons",this.injuryForm.value.injury_persons?this.injuryForm.value.injury_persons:""),t.append("person_details",JSON.stringify(this.injuryForm.value.person_details)),t.append("environmental_description",this.enviornmentForm.value.environmental_description?this.enviornmentForm.value.environmental_description:""),t.append("was_a_chemical_split",this.enviornmentForm.value.was_a_chemical_split?this.enviornmentForm.value.was_a_chemical_split:""),t.append("chemical_details",JSON.stringify(this.enviornmentForm.value.chemical_details)),t.append("emergency_spill_kit_used",this.enviornmentForm.value.emergency_spill_kit_used?this.enviornmentForm.value.emergency_spill_kit_used:""),t.append("out_of_split_kit",this.enviornmentForm.value.out_of_split_kit?this.enviornmentForm.value.out_of_split_kit:""),t.append("reputation_option",this.reputationDesForm.value.reputation_option?this.reputationDesForm.value.reputation_option:""),t.append("individual_damage_value",this.reputationDesForm.value.individual_damage_value?this.reputationDesForm.value.individual_damage_value:""),t.append("company_damage_value",this.reputationDesForm.value.company_damage_value?this.reputationDesForm.value.company_damage_value:""),t.append("reputation_negative_effect",this.reputationDesForm.value.reputation_negative_effect?this.reputationDesForm.value.reputation_negative_effect:""),t.append("effected_department",this.reputationDesForm.value.effected_department?this.reputationDesForm.value.effected_department:""),t.append("external_party",this.reputationDesForm.value.external_party?this.reputationDesForm.value.external_party:""),t.append("name_of_witness",this.name_of_witness&&this.name_of_witness.employee_id?this.name_of_witness.employee_id:""),t.append("other_witness_details",JSON.stringify(this.reputationDesForm.value.other_witness_details)),t.append("possible_outcome_incident",this.reputationDesForm.value.possible_outcome_incident?this.reputationDesForm.value.possible_outcome_incident:""),t.append("security_option",this.securityForm.value.security_option?this.securityForm.value.security_option:""),"IT"==this.securityForm.value.security_option&&t.append("it_option_value",this.securityForm.value.it_option_value.length>0?this.securityForm.value.it_option_value.join(","):""),t.append("what_has_been_stolen_item",this.securityForm.value.what_has_been_stolen_item?this.securityForm.value.what_has_been_stolen_item:""),t.append("approximate_value_of_stolen",this.securityForm.value.approximate_value_of_stolen?this.securityForm.value.approximate_value_of_stolen:""),t.append("what_is_the_specific_securities_incident",this.securityForm.value.what_is_the_specific_securities_incident?this.securityForm.value.what_is_the_specific_securities_incident:""),t.append("asset_description",this.assetDescriptionForm.value.asset_description?this.assetDescriptionForm.value.asset_description:""),t.append("asset_has_number",this.assetDescriptionForm.value.asset_has_number?this.assetDescriptionForm.value.asset_has_number:""),"Yes"==this.assetDescriptionForm.value.asset_has_number&&t.append("asset_number",this.assetDescriptionForm.value.asset_number?this.assetDescriptionForm.value.asset_number:""),t.append("extent_of_damage",this.assetDescriptionForm.value.extent_of_damage?this.assetDescriptionForm.value.extent_of_damage:""),t.append("extent_damage_image",this.damageImagesObject.length>0?JSON.stringify(this.damageImagesObject):""),t.append("report",this.reportForm.value.report?this.reportForm.value.report:""),t.append("id",this.incidentDetails.id),t.append("user_id",i.id),this.globalService.postData("submit"==e?"add_form/submit":"Add_form/submit_incomplete",t).subscribe(e=>{e.status?(this.globalService.presentToast(e.message),this.nav.navigateRoot("incident-form-list")):this.globalService.presentToast(e.message)},e=>{console.log("err",e)})}}onClassificationChange(e){const i=this.classificationForm.get("classification_value");if(e.target.checked)i.push(new o.NI(e.target.value)),this.classificationList.find(i=>{i.val==e.target.value&&(i.isChecked=!0)});else{let t=0;i.controls.forEach(n=>{n.value!=e.target.value?t++:i.removeAt(t)}),this.classificationList.find(i=>{i.val==e.target.value&&(i.isChecked=!1)})}this.selectedTabList=i.value}onSecurityOption(e){"IT"==e.detail.value?(this.securityForm.controls.what_has_been_stolen_item.reset(),this.securityForm.controls.approximate_value_of_stolen.reset(),this.securityForm.controls.what_is_the_specific_securities_incident.reset()):"Theft"==e.detail.value?(this.itSecurityList.find(e=>{e.isChecked=!1}),this.securityForm.controls.what_is_the_specific_securities_incident.reset()):"Other"==e.detail.value&&(this.itSecurityList.find(e=>{e.isChecked=!1}),this.securityForm.controls.what_has_been_stolen_item.reset(),this.securityForm.controls.approximate_value_of_stolen.reset())}onSecurityItOption(e){const i=this.securityForm.get("it_option_value");if(e.target.checked)i.push(new o.NI(e.target.value)),this.itSecurityList.find(i=>{i.val==e.target.value&&(i.isChecked=!0)});else{let t=0;i.controls.forEach(n=>{n.value!=e.target.value?t++:i.removeAt(t)}),this.itSecurityList.find(i=>{i.val==e.target.value&&(i.isChecked=!1)})}}onReputationDamagesCheckBox(e){const i=this.reputationDesForm.get("reputation_option");if(e.target.checked)i.push(new o.NI(e.target.value)),this.reputationCheckBox.find(i=>{i.val==e.target.value&&(i.isChecked=!0)});else{let t=0;i.controls.forEach(n=>{n.value!=e.target.value?t++:i.removeAt(t)}),this.reputationCheckBox.find(i=>{i.val==e.target.value&&(i.isChecked=!1)})}this.onProgressBar("","")}onInput(e,i){this.tabList.find(e=>{"Incident"==i&&this.incidentForm.valid?"Classification"!=e.val&&(e.tabDisable=!1):"Incident Description"==i&&this.incidentDesForm.valid?e.tabDisable=!1:"Incident Description"==i&&this.incidentDesForm.invalid&&"Classification"==e.val&&(e.tabDisable=!0,this.selectedTabList=[],this.classificationForm.reset(),this.injuryForm.reset(),this.enviornmentForm.reset(),this.reputationDesForm.reset(),this.securityForm.reset(),this.assetDescriptionForm.reset(),this.reportForm.reset()),this.onProgressBar("","")}),e&&e.detail&&e.detail.value&&"Near Miss"!=e.detail.value&&(this.incidentForm.controls.incident_near_miss.setValue(""),this.incidentForm.controls.incident_near_miss_other.setValue(""))}get injuryPersonDetails(){return this.injuryForm.get("person_details")}injuryPersonKeys(){return this.fb.group({injured_person_option:[""],injured_person_option_id:[""],injured_person_option_other_details:this.fb.group({injured_person_option_other_name:[""],injured_person_option_other_mobile_no:[""],injured_person_option_other_email:[""]}),gender:[""],date_of_birth:[""],normal_duties:[""],normal_duties_explanation:[""],alternate_duties:[""],duties_explanation:[""],initital_injury:[""],part_of_body_injured_occured:[],was_immediate_treatment:[""],was_immediate_treatment_comment:[""],immediate_treatment_given_explanation:[""],immediate_treatment_person_name:[""],immediate_treatment_person_name_id:[""],immediate_treatment_other_person_detail:this.fb.group({immediate_treatment_other_name:[""],immediate_treatment_person_number:[""],immediate_treatment_other_email:[""]})})}onAddMultiplePersonDetails(e){let i=0;if(i=0!=this.injuryForm.value.person_details.length?parseInt(this.injuryForm.value.injury_persons)-this.injuryForm.value.person_details.length:this.injuryForm.value.injury_persons,i>0)for(let t=1;t<=i;t++)this.injuryPersonDetails.push(this.injuryPersonKeys());else if(i<0)for(let t=1;t<=Math.abs(i);t++)this.injuryPersonDetails.controls.pop(),this.injuryForm.value.person_details.pop()}onRepoNegativeEffect(e){"Internal"==e.detail.value?this.reputationDesForm.controls.external_party.setValue(""):"External"==e.detail.value&&this.reputationDesForm.controls.effected_department.setValue(""),this.onProgressBar("","")}onDepartmentEffectCheckBox(e){const i=this.reputationDesForm.get("effected_department");if(e.detail.checked)i.push(new o.NI(e.detail.value)),this.departmentEffect.find(i=>{i.val==e.detail.value&&(i.isChecked=e.detail.checked)});else{let t=0;i.controls.forEach(n=>{n.value!=e.detail.value?t++:i.removeAt(t)}),this.departmentEffect.find(i=>{i.val==e.detail.value&&(i.isChecked=!1)})}this.onProgressBar("","")}onWitnessChange(e){"Other"!=e.detail.value?this.reputationDesForm.controls.other_witness_details.reset():this.reputationDesForm.value.other_witness_details.employee_id=0}onEmpChange(e,i){this.employeeList.filter(t=>{t.full_name==e.detail.value&&(this.injuryForm.value.person_details[i].emp_id=t.employee_id,this.injuryForm.controls.person_details[i].immediate_treatment_person_number=t.emp_mobile?t.emp_mobile:t.emp_work_email)})}onAdministeredPerson(e,i){this.injuryForm.controls.person_details.value[i].immediate_treatment_person_number="",this.employeeList.filter(t=>{t.employee_id==e.detail.value&&(this.injuryForm.controls.person_details.value[i].immediate_treatment_person_number=t.emp_mobile?t.emp_mobile:t.emp_work_email)})}onIncDesWitnessChange(e){0!=e.detail.value&&this.incidentDesForm.controls.incdesc_other_witness_details.reset()}onImmediateTreatment(e,i){"Yes"==e.detail.value&&this.injuryPersonDetails.controls[i].patchValue({was_immediate_treatment_comment:""}),"No"==e.detail.value&&this.injuryPersonDetails.controls[i].patchValue({immediate_treatment_given_explanation:"",immediate_treatment_person_name:"",immediate_treatment_person_name_id:"",immediate_treatment_other_person_detail:{immediate_treatment_other_name:"",immediate_treatment_person_number:"",immediate_treatment_other_email:""}})}onProgressBar(e,i){let t=0,n=[],o=[];if(Object.keys(this.incidentForm.controls).map(e=>n.push(e)),Object.values(this.incidentForm.value).map(e=>o.push(e)),this.incidentForm.valid){if(this.incidentForm.value.incident_value&&"Near Miss"!=this.incidentForm.value.incident_value)for(var a=0;a<n.length;a++)"incident_near_miss"===n[a]&&(n.splice(a,1),o.splice(a,1)),"incident_near_miss_other"===n[a]&&(n.splice(a,1),o.splice(a,1));for(Object.keys(this.photoGraphyForm.controls).map(e=>n.push(e)),Object.values(this.photoGraphyForm.value).map(e=>o.push(e)),Object.keys(this.incidentDesForm.controls).map(e=>n.push(e)),Object.values(this.incidentDesForm.value).map(e=>o.push(e)),a=0;a<=n.length;a++)"incdesc_other_witness_details"===n[a]&&(n.splice(a,1),o.splice(a,1)),""!=this.incidentDesForm.value.incident_description_alcohol_test&&"Yes"==this.incidentDesForm.value.incident_description_alcohol_test||"alcohol_test_image"!==n[a]||(n.splice(a,1),o.splice(a,1)),""!=this.incidentDesForm.value.drug_test_completed&&"Yes"==this.incidentDesForm.value.drug_test_completed||"drug_test_image"!==n[a]||(n.splice(a,1),o.splice(a,1)),""!=this.incidentDesForm.value.return_to_alternate_duties&&"Yes"==this.incidentDesForm.value.return_to_alternate_duties||"return_to_alternate_duties_image"!==n[a]||(n.splice(a,1),o.splice(a,1));if("Other"==this.incidentDesForm.value.was_there_any_witness_of_the_incident&&(n.push("incdesc_other_witness_name"),o.push(null!=this.incidentDesForm.value.incdesc_other_witness_details.incdesc_other_witness_name?this.incidentDesForm.value.incdesc_other_witness_details.incdesc_other_witness_name:""),n.push("incdesc_other_witness_mobile_no"),o.push(null!=this.incidentDesForm.value.incdesc_other_witness_details.incdesc_other_witness_mobile_no?this.incidentDesForm.value.incdesc_other_witness_details.incdesc_other_witness_mobile_no:""),n.push("incdesc_other_witness_email"),o.push(null!=this.incidentDesForm.value.incdesc_other_witness_details.incdesc_other_witness_email?this.incidentDesForm.value.incdesc_other_witness_details.incdesc_other_witness_email:"")),this.incidentDesForm.valid){for(Object.keys(this.classificationForm.value).map(e=>n.push(e)),Object.values(this.classificationForm.value).map(e=>o.push(e)),a=0;a<n.length;a++)"classification_supervisor_other_details"===n[a]&&(n.splice(a,1),o.splice(a,1)),"classification_manager_other_details"===n[a]&&(n.splice(a,1),o.splice(a,1)),"classification_location_value"===n[a]&&(n.splice(a,1),o.splice(a,1)),"classification_location_value1"===n[a]&&(n.splice(a,1),o.splice(a,1));for("Add Location"==this.classificationForm.value.classification_location_option?(n.push("classification_location_value"),o.push(this.classificationForm.value.classification_location_value)):"Choose Location"==this.classificationForm.value.classification_location_option&&(n.push("classification_location_value1"),o.push(this.classificationForm.value.classification_location_value1)),"Other"==this.classificationForm.value.classification_supervisor&&(n.push("classification_supervisor_other_name"),o.push(this.classificationForm.value.classification_supervisor_other_details.classification_supervisor_other_name),n.push("classification_supervisor_other_mobile_no"),o.push(this.classificationForm.value.classification_supervisor_other_details.classification_supervisor_other_mobile_no),n.push("classification_supervisor_other_email"),o.push(this.classificationForm.value.classification_supervisor_other_details.classification_supervisor_other_email)),"Other"==this.classificationForm.value.classification_manager&&(n.push("classification_manager_other_name"),o.push(this.classificationForm.value.classification_manager_other_details.classification_manager_other_name),n.push("classification_manager_other_mobile_no"),o.push(this.classificationForm.value.classification_manager_other_details.classification_manager_other_mobile_no),n.push("classification_manager_other_email"),o.push(this.classificationForm.value.classification_manager_other_details.classification_manager_other_email)),this.classificationList.forEach(e=>{"Asset"==e.val&&e.isChecked&&(Object.keys(this.assetDescriptionForm.controls).map(e=>n.push(e)),Object.values(this.assetDescriptionForm.value).map(e=>o.push(e))),"Environmental"==e.val&&e.isChecked&&(Object.keys(this.enviornmentForm.controls).map(e=>n.push(e)),Object.values(this.enviornmentForm.value).map(e=>o.push(e))),"Injury"==e.val&&e.isChecked&&(n.push("injury_persons"),o.push(this.injuryForm.value.injury_persons)),"Report"==e.val&&e.isChecked&&(Object.keys(this.reportForm.controls).map(e=>n.push(e)),Object.values(this.reportForm.value).map(e=>o.push(e))),"Reputation"==e.val&&e.isChecked&&(n.push("reputation_option"),o.push(this.reputationDesForm.value.reputation_option),n.push("reputation_negative_effect"),o.push(this.reputationDesForm.value.reputation_negative_effect),n.push("name_of_witness"),o.push(this.reputationDesForm.value.name_of_witness),n.push("possible_outcome_incident"),o.push(this.reputationDesForm.value.possible_outcome_incident),this.reputationDesForm.value.reputation_option&&this.reputationDesForm.value.reputation_option.length>0&&("Company"!=this.reputationDesForm.value.reputation_option[0]&&"Company"!=this.reputationDesForm.value.reputation_option[1]||(n.push("company_damage_value"),o.push(this.reputationDesForm.value.company_damage_value)),"Individual"!=this.reputationDesForm.value.reputation_option[0]&&"Individual"!=this.reputationDesForm.value.reputation_option[1]||(n.push("individual_damage_value"),o.push(this.reputationDesForm.value.individual_damage_value))),""!=this.reputationDesForm.value.reputation_negative_effect&&"Internal"==this.reputationDesForm.value.reputation_negative_effect?(n.push("effected_department"),o.push(this.reputationDesForm.value.effected_department)):""!=this.reputationDesForm.value.reputation_negative_effect&&"External"==this.reputationDesForm.value.reputation_negative_effect?(n.push("external_party"),o.push(this.reputationDesForm.value.external_party)):"Both"==this.reputationDesForm.value.reputation_negative_effect&&(n.push("effected_department"),o.push(this.reputationDesForm.value.effected_department),n.push("external_party"),o.push(this.reputationDesForm.value.external_party)),"Other"==this.reputationDesForm.value.name_of_witness&&(n.push("other_witness_name"),o.push(this.reputationDesForm.value.other_witness_details.other_witness_name),n.push("other_witness_mobile_no"),o.push(this.reputationDesForm.value.other_witness_details.other_witness_mobile_no),n.push("other_witness_email"),o.push(this.reputationDesForm.value.other_witness_details.other_witness_email))),"Security"==e.val&&e.isChecked&&(n.push("security_option"),o.push(this.securityForm.value.security_option),"IT"==this.securityForm.value.security_option&&(n.push("it_option_value"),o.push(this.securityForm.value.it_option_value)),"Theft"==this.securityForm.value.security_option&&(n.push("what_has_been_stolen_item"),o.push(this.securityForm.value.what_has_been_stolen_item),n.push("approximate_value_of_stolen"),o.push(this.securityForm.value.approximate_value_of_stolen)),"Other"==this.securityForm.value.security_option&&(n.push("what_is_the_specific_securities_incident"),o.push(this.securityForm.value.what_is_the_specific_securities_incident)))}),a=0;a<n.length;a++)"Yes"!=this.assetDescriptionForm.value.asset_has_number&&"asset_number"===n[a]&&(n.splice(a,1),o.splice(a,1)),"chemical_details"===n[a]&&(n.splice(a,1),o.splice(a,1)),"out_of_split_kit"===n[a]&&(n.splice(a,1),o.splice(a,1));if("Yes"==this.enviornmentForm.value.was_a_chemical_split&&(n.push("chemical_name"),o.push(this.enviornmentForm.value.chemical_details.chemical_name),n.push("approximate_quantity"),o.push(this.enviornmentForm.value.chemical_details.approximate_quantity),this.enviornmentForm.value.chemical_details.insertPhotoCheckBox&&(n.push("chemical_photo"),o.push(this.enviornmentForm.value.chemical_details.chemical_photo))),"Yes"==this.enviornmentForm.value.emergency_spill_kit_used&&(n.push("out_of_split_kit"),o.push(this.enviornmentForm.value.out_of_split_kit)),""!=this.injuryForm.value.injury_persons&&null!=this.injuryForm.value.injury_persons)for(let e=0;e<this.injuryForm.value.injury_persons;e++)Object.keys(this.injuryForm.value.person_details[e]).forEach((i,t)=>{"injured_person_option_id"!=i&&"injured_person_option_other_details"!=i&&"normal_duties_explanation"!=i&&"duties_explanation"!=i&&"immediate_treatment_person_name_id"!=i&&"immediate_treatment_given_explanation"!=i&&"immediate_treatment_person_name"!=i&&"immediate_treatment_other_person_detail"!=i&&"was_immediate_treatment_comment"!=i&&(n.push(i+"_"+e),o.push(Object.values(this.injuryForm.value.person_details[e])[t])),"injured_person_option"==i&&"Other"==this.injuryForm.value.person_details[e].injured_person_option&&(n.push("injured_person_option_other_name_"+e),o.push(this.injuryForm.value.person_details[e].injured_person_option_other_details.injured_person_option_other_name),n.push("injured_person_option_other_mobile_no_"+e),o.push(this.injuryForm.value.person_details[e].injured_person_option_other_details.injured_person_option_other_mobile_no),n.push("injured_person_option_other_email_"+e),o.push(this.injuryForm.value.person_details[e].injured_person_option_other_details.injured_person_option_other_email)),"normal_duties"==i&&"No"==this.injuryForm.value.person_details[e].normal_duties&&(n.push("normal_duties_explanation_"+e),o.push(this.injuryForm.value.person_details[e].normal_duties_explanation)),"alternate_duties"==i&&"No"==this.injuryForm.value.person_details[e].alternate_duties&&(n.push("duties_explanation_"+e),o.push(this.injuryForm.value.person_details[e].duties_explanation)),"was_immediate_treatment"==i&&"Yes"==this.injuryForm.value.person_details[e].was_immediate_treatment&&(n.push("immediate_treatment_given_explanation_"+e),o.push(this.injuryForm.value.person_details[e].immediate_treatment_given_explanation),n.push("immediate_treatment_person_name_"+e),o.push(this.injuryForm.value.person_details[e].immediate_treatment_person_name),"Other"==this.injuryForm.value.person_details[e].immediate_treatment_person_name&&(n.push("immediate_treatment_other_name_"+e),o.push(this.injuryForm.value.person_details[e].immediate_treatment_other_person_detail.immediate_treatment_other_name)),n.push("immediate_treatment_person_number_"+e),o.push(this.injuryForm.value.person_details[e].immediate_treatment_other_person_detail.immediate_treatment_person_number),n.push("immediate_treatment_other_email_"+e),o.push(this.injuryForm.value.person_details[e].immediate_treatment_other_person_detail.immediate_treatment_other_email)),"was_immediate_treatment"==i&&"No"==this.injuryForm.value.person_details[e].was_immediate_treatment&&(n.push("was_immediate_treatment_comment_"+e),o.push(this.injuryForm.value.person_details[e].was_immediate_treatment_comment))})}}n.forEach((e,i)=>{""!=o[i]&&null!=o[i]&&null!=o[i]&&o[i].length>0&&(t=++t)}),this.form_percent=1/n.length*t,this.form_percent_val=parseInt((1/n.length*t*100).toFixed())}onImageClick(e){console.log(e)}}return e.\u0275fac=function(i){return new(i||e)(u.Y36(h.U),u.Y36(p.F),u.Y36(a.IN),u.Y36(a.BX),u.Y36(d.V1),u.Y36(o.qu),u.Y36(a.SH),u.Y36(a.t4),u.Y36(s.gz),u.Y36(g.b))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-incident-form-edit"]],decls:36,vars:5,consts:[[1,"toolbar"],[1,"back"],[3,"click"],["slot","icon-only","name","chevron-back"],[1,"saveBtn",3,"click"],["slot","icon-only","name","save-outline"],[1,"container"],["size-xl","3","size-lg","2","size-md","2"],["size-xl","6","size-lg","8","size-md","8","size-sm","12","size-xs","12"],[1,"question"],[1,"ion-padding-start","ion-padding-end"],[1,"activeBackground"],["size-xl","10","size-lg","10","size-md","10","size-sm","10","size-xs","9"],["size-xl","2","size-lg","2","size-md","2","size-sm","2","size-xs","3"],["size","12"],[3,"value"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn",3,"click"],["class","incident",3,"disabled","click",4,"ngIf"],["class","activeBackground",4,"ngIf"],["class","activeBackground",3,"formGroup","ionChange",4,"ngIf"],[1,"incident",3,"disabled","click"],[1,"plus",3,"src"],[1,"headerTitle"],[1,"plus",3,"src","click"],[3,"formGroup","ionChange"],["formControlName","incident_value",3,"ionChange"],["size-xl","4","size-lg","4","size-md","6","size-sm","6","size-xs","12"],["lines","none",1,"ra"],["slot","start","value","Actual"],["slot","start","value","Near Miss"],["size-xl","4","size-lg","4","size-md","6","size-sm","12","size-xs","12"],[1,"ion-text-wrap"],["slot","start","value","Serious potential incident (SPI)"],["lines","none",1,"ra",3,"click"],["placeholder","Please select who witnessed the near miss","formControlName","incident_near_miss"],["slot","end",1,"ion-no-padding","ion-no-margin"],[1,"ion-no-padding","ion-no-margin"],["name","caret-down-outline",1,"btn-icon"],["placeholder","Please enter possible consequence under different circumstances","formControlName","incident_near_miss_other"],[1,"activeBackground",3,"formGroup","ionChange"],["class","preview-slides",4,"ngIf"],["expand","block",1,"camera",3,"click"],["type","file","value","photography_image","multiple","",3,"change"],[1,"preview-slides"],["size","11"],["tappable","",3,"src","click"],["size","1"],["name","close",3,"click"],[1,"headerTitle",3,"ionChange"],[3,"formGroup"],[1,"mandatoryField"],["placeholder","Please enter description of incident","formControlName","incident_description",3,"ionChange"],["placeholder","Please enter immediate action taken","formControlName","incident_description_action",3,"ionChange"],["placeholder","Please enter what could have been done differently","formControlName","seen_differently"],["placeholder","Please select witness","formControlName","was_there_any_witness_of_the_incident"],["formGroupName","incdesc_other_witness_details",4,"ngIf"],["formControlName","incident_description_alcohol_test",3,"ionChange"],["size-md","6","size-lg","4"],["slot","start","value","Yes"],["slot","start","value","No"],["slot","start","value","Not Required"],["formControlName","drug_test_completed",3,"ionChange"],["formControlName","return_to_alternate_duties",3,"ionChange"],["formGroupName","incdesc_other_witness_details"],[1,"other_witness"],["placeholder","Please enter Other Witness Name","formControlName","incdesc_other_witness_name"],["type","tel","placeholder","Please enter Other Witness Mobile No ","formControlName","incdesc_other_witness_mobile_no"],["type","email","placeholder","Please enter Other Witness Email","formControlName","incdesc_other_witness_email"],["type","file","value","incident_description_photo","multiple","",3,"change"],["class","camera","expand","block",3,"click",4,"ngIf"],["type","file","value","drug_test_image","multiple","",3,"change"],["type","file","value","return_to_alternate_duties_image","multiple","",1,"uploadFile",3,"change"],[1,"ion-no-padding"],["size","6",4,"ngFor","ngForOf"],["displayFormat","DD/MM/YYYY","placeholder","Please select date of incident","formControlName","date_of_incident"],["displayFormat","HH:mm:ss","placeholder","Please select time of incident","formControlName","time_of_incident"],["displayFormat","DD/MM/YYYY","placeholder","Please select reported date","formControlName","date_reported"],["displayFormat","HH:mm:ss","placeholder","Please select reported time","formControlName","time_reported"],["formControlName","classification_location_option"],["slot","start","value","Add Location"],["slot","start","value","Choose Location"],["placeholder","Please select shift Type","interface","action-sheet","formControlName","classification_shift_type"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Please select supervisor","formControlName","classification_supervisor"],["formGroupName","classification_supervisor_other_details",4,"ngIf"],["placeholder","Please select manager","formControlName","classification_manager"],["formGroupName","classification_manager_other_details",4,"ngIf"],["size","6"],["slot","start",3,"value","checked","ionChange"],["placeholder","Please enter location","formControlName","classification_location_value"],["placeholder","Please select location","interface","action-sheet","formControlName","classification_location_value1"],["formGroupName","classification_supervisor_other_details"],["placeholder","Please enter other person name","formControlName","classification_supervisor_other_name"],["type","tel","placeholder","Please enter other person mobile no ","formControlName","classification_supervisor_other_mobile_no"],["type","email","placeholder","Please enter other person email","formControlName","classification_supervisor_other_email"],["formGroupName","classification_manager_other_details"],["placeholder","Please enter Other Witness Name","formControlName","classification_manager_other_name"],["type","tel","placeholder","Please enter Other Witness Mobile No ","formControlName","classification_manager_other_mobile_no"],["type","email","placeholder","Please enter Other Witness Email","formControlName","classification_manager_other_email"],["class","incident",3,"click",4,"ngIf"],[1,"incident",3,"click"],["placeholder","Please enter asset description","formControlName","asset_description"],["formControlName","asset_has_number"],["size","6",1,"ion-no-padding"],["placeholder","Please enter extent of damage","formControlName","extent_of_damage"],["placeholder","Please enter asset number","type","tel","formControlName","asset_number"],["type","file","value","extent_damage_image","multiple","",3,"change"],["placeholder","Please enter immediate action taken to minimize environmental impact","formControlName","environmental_description"],["formControlName","was_a_chemical_split"],["formGroupName","chemical_details",4,"ngIf"],["formControlName","emergency_spill_kit_used"],["formGroupName","chemical_details"],["placeholder","Please enter name of chemical","formControlName","chemical_name"],["slot","start","formControlName","insertPhotoCheckBox",3,"ionChange"],["placeholder","Please enter approximate qunatity of chemical spilled","type","tel","formControlName","approximate_quantity"],["type","file","value","chemical_photo","multiple","",3,"change"],["placeholder","Please enter what was used out of the chemical spill kit ?","formControlName","out_of_split_kit"],["placeholder","Please select Injured Person","interface","action-sheet","formControlName","injury_persons",3,"ionChange"],["value","1"],["value","2"],["value","3"],["value","4"],["formArrayName","person_details",4,"ngFor","ngForOf"],["formArrayName","person_details"],[1,"questionHead"],[3,"formGroupName"],["placeholder","Please select Injured Person Name","formControlName","injured_person_option"],["formGroupName","injured_person_option_other_details",4,"ngIf"],["placeholder","Please select gender","interface","action-sheet","formControlName","gender"],["value","Male"],["value","Female"],["value","Other"],["placeholder","Please select date of birth","displayFormat","DD/MM/YYYY","formControlName","date_of_birth"],["formControlName","normal_duties"],["formControlName","alternate_duties"],["formControlName","initital_injury"],["multiple","true","cancelText","Cancel","okText","Ok","formControlName","part_of_body_injured_occured","placeholder","Select Part of body injured"],["formControlName","was_immediate_treatment",3,"ionChange"],["formGroupName","injured_person_option_other_details"],["placeholder","Please enter other person name","formControlName","injured_person_option_other_name"],["type","tel","placeholder","Please enter other person mobile no ","formControlName","injured_person_option_other_mobile_no"],["type","email","placeholder","Please enter other person email","formControlName","injured_person_option_other_email"],["placeholder","Please enter explanation","formControlName","normal_duties_explanation"],["placeholder","Please enter explanation","formControlName","duties_explanation"],["slot","start",3,"value"],["class","mandatoryField",4,"ngIf"],["usemap","#image-map",3,"src"],["name","image-map"],["target","_self","alt","Head","title","Head","href","javascript:void(0)","coords","68,11,20","shape","circle",3,"click"],["target","_self","alt","Face","title","Face","href","javascript:void(0)","coords","69,20,33","shape","circle",3,"click"],["target","_self","alt","Neck","title","Neck","href","javascript:void(0)","coords","72,48,16","shape","circle",3,"click"],["target","_self","alt","Left Shoulder","title","Left Shoulder","href","javascript:void(0)","coords","50,64,22","shape","circle",3,"click"],["target","_self","alt","Right Shoulder","title","Right Shoulder","href","javascript:void(0)","coords","90,53,21","shape","circle",3,"click"],["target","_self","alt","Left hand","title","Left hand","coords","68,97,73","shape","circle",3,"click"],["target","_self","alt","Right hand","title","Right hand","href","javascript:void(0)","coords","107,68,79","shape","circle",3,"click"],["target","_self","alt","Left palm","title","Left palm","href","javascript:void(0)","coords","20,154,17","shape","circle",3,"click"],["target","_self","alt","Left hand finger","title","Left hand finger","href","javascript:void(0)","coords","14,169,12","shape","circle",3,"click"],["target","_self","alt","Left hand thumb","title","Left hand thumb","href","javascript:void(0)","coords","8,157,9","shape","circle",3,"click"],["target","_self","alt","Right hand palm","title","Right hand palm","href","javascript:void(0)","coords","130,150,17","shape","circle",3,"click"],["target","_self","alt","Right hand finger","title","Right hand finger","href","javascript:void(0)","coords","133,168,16","shape","circle",3,"click"],["target","_self","alt","Right hand thumb","title","Right hand thumb","href","javascript:void(0)","coords","144,155,6","shape","circle",3,"click"],["target","_self","alt","Upper Abdomen","title","Upper Abdomen","href","javascript:void(0)","coords","62,120,37","shape","circle",3,"click"],["target","_self","alt","Lower Abdomen","title","Lower Abdomen","href","javascript:void(0)","coords","53,132,48","shape","circle",3,"click"],["target","_self","alt","Left Thigh","title","Left Thigh","href","javascript:void(0)","coords","49,154,66","shape","circle",3,"click"],["target","_self","alt","Right Thigh","title","Right Thigh","href","javascript:void(0)","coords","102,153,55","shape","circle",3,"click"],["target","_self","alt","Left Knee","title","Left Knee","href","javascript:void(0)","coords","62,225,12","shape","circle",3,"click"],["target","_self","alt","Right Knee","title","Right Knee","href","javascript:void(0)","coords","81,223,16","shape","circle",3,"click"],["target","_self","alt","Left Lower leg","title","Left Lower leg","href","javascript:void(0)","coords","61,236,52","shape","circle",3,"click"],["target","_self","alt","Right Lower leg","title","Right Lower leg","href","javascript:void(0)","coords","98,231,55","shape","circle",3,"click"],["target","_self","alt","Left Foot","title","Left Foot","href","javascript:void(0)","coords","69,293,21","shape","circle",3,"click"],["target","_self","alt","Right Foot","title","Right Foot","href","javascript:void(0)","coords","86,295,19","shape","circle",3,"click"],["target","_self","alt","Spin","title","Spin","href","javascript:void(0)","coords","261,55,75","shape","circle",3,"click"],["placeholder","Please enter what treatment was given ","formControlName","immediate_treatment_given_explanation"],["placeholder","Please select person","formControlName","immediate_treatment_person_name"],["formGroupName","immediate_treatment_other_person_detail",4,"ngIf"],["formGroupName","immediate_treatment_other_person_detail"],["type","tel","placeholder","Please enter other person mobile no ","formControlName","immediate_treatment_person_number"],["type","email","placeholder","Please enter other person email","formControlName","immediate_treatment_other_email"],["placeholder","Please enter other person name","formControlName","immediate_treatment_other_name"],[1,"error"],["placeholder","Enter Comment","autoGrow","true","formControlName","was_immediate_treatment_comment"],["placeholder","Please enter what could have done differently","formControlName","report"],["lines","none","class","ion-no-padding ra",4,"ngFor","ngForOf"],["formControlName","reputation_negative_effect",3,"ionChange"],["size-xl","4","size-lg","4","size-md","4","size-sm","12","size-xs","12"],["slot","start","value","Internal"],["slot","start","value","External"],["slot","start","value","Both"],["placeholder","Please select witness","formControlName","name_of_witness"],["formGroupName","other_witness_details",4,"ngIf"],["placeholder","Please enter  what is the possible outcome of this incident","formControlName","possible_outcome_incident"],["lines","none",1,"ion-no-padding","ra"],["slot","end",3,"value","checked","ionChange"],["placeholder","Please enter how has the individual's reputation been damaged","formControlName","individual_damage_value"],["placeholder","Please enter how has the compnay's reputation been damaged","formControlName","company_damage_value"],["lines","none","class","ra ion-no-padding",4,"ngFor","ngForOf"],["lines","none",1,"ra","ion-no-padding"],["placeholder","Please enter who is the external party","formControlName","external_party"],["formGroupName","other_witness_details"],["placeholder","Please enter Other Witness Name","formControlName","other_witness_name"],["type","tel","placeholder","Please enter Other Witness Mobile No ","formControlName","other_witness_mobile_no"],["type","email","placeholder","Please enter Other Witness Email","formControlName","other_witness_email"],["formControlName","security_option",3,"ionChange"],["slot","start","value","IT"],["slot","start","value","Theft"],["slot","start","value","Other"],["size","6","class","ion-no-padding",4,"ngFor","ngForOf"],["placeholder","Please enter what has been stolen","formControlName","what_has_been_stolen_item"],["placeholder","Please enter approximate value of stolen item","formControlName","approximate_value_of_stolen"],["placeholder","Please enter what is the Security incident","formControlName","what_is_the_specific_securities_incident"]],template:function(e,i){1&e&&(u.TgZ(0,"ion-content"),u.TgZ(1,"div",0),u.TgZ(2,"ion-text"),u._uU(3,"Edit Incident Form"),u.qZA(),u.TgZ(4,"ion-buttons",1),u.TgZ(5,"ion-button",2),u.NdJ("click",function(){return i.nav.back()}),u._UZ(6,"ion-icon",3),u.qZA(),u.qZA(),u.TgZ(7,"ion-buttons",4),u.NdJ("click",function(){return i.onSubmit("incomplete_submit")}),u.TgZ(8,"ion-button"),u._UZ(9,"ion-icon",5),u.qZA(),u.qZA(),u.qZA(),u.TgZ(10,"div",6),u.TgZ(11,"ion-row"),u._UZ(12,"ion-col",7),u.TgZ(13,"ion-col",8),u.TgZ(14,"p",9),u._uU(15,"ReacIncident report"),u.qZA(),u.qZA(),u._UZ(16,"ion-col",7),u.qZA(),u.qZA(),u.TgZ(17,"ion-row"),u._UZ(18,"ion-col",7),u.TgZ(19,"ion-col",8),u.TgZ(20,"div",10),u.TgZ(21,"div",11),u.TgZ(22,"ion-row"),u.TgZ(23,"ion-col",12),u._uU(24," Form progress bar "),u.qZA(),u.TgZ(25,"ion-col",13),u._uU(26),u.qZA(),u.qZA(),u.TgZ(27,"ion-row"),u.TgZ(28,"ion-col",14),u._UZ(29,"ion-progress-bar",15),u.qZA(),u.qZA(),u.qZA(),u.YNc(30,$,6,5,"div",16),u.YNc(31,Le,2,1,"span",17),u.qZA(),u.TgZ(32,"div",6),u.TgZ(33,"ion-button",18),u.NdJ("click",function(){return i.onSubmit("submit")}),u._uU(34,"SUBMIT"),u.qZA(),u.qZA(),u.qZA(),u._UZ(35,"ion-col",7),u.qZA(),u.qZA()),2&e&&(u.xp6(26),u.AsE(" ",i.form_percent_val,"","%"," "),u.xp6(3),u.Q6J("value",i.form_percent),u.xp6(1),u.Q6J("ngForOf",i.tabList),u.xp6(1),u.Q6J("ngIf",i.selectedTabList.length>0))},directives:[a.W2,a.yW,a.Sm,a.YG,a.gu,a.Nd,a.wI,a.X7,n.sg,n.O5,o.JL,o.sg,a.se,a.QI,o.JJ,o.u,a.Ie,a.Q$,a.B7,a.U5,a.pK,a.j9,a.Hr,a.A$,a.jY,o.x0,a.x4,a.t9,a.nz,a.w,a.n0,o.CE,a.PM,a.g2],styles:["ion-content[_ngcontent-%COMP%]   .saveBtn[_ngcontent-%COMP%]{position:absolute;right:0;top:30px}ion-content[_ngcontent-%COMP%]   .plus[_ngcontent-%COMP%]{height:18px;width:18px;-o-object-fit:contain;object-fit:contain}ion-content[_ngcontent-%COMP%]   .incident[_ngcontent-%COMP%]{font-family:mon-bold;width:100%;--background:#e0e0e0;overflow:hidden!important;height:52px;--border-radius:31px;border-radius:31px;align-items:flex-start;align-content:flex-start;justify-content:flex-start;margin:0 0 24px}ion-content[_ngcontent-%COMP%]   .incident[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-transform:capitalize;text-align:left;justify-content:flex-start;position:absolute;left:0;top:5px;color:#313131;font-size:20px;margin-top:10px}ion-content[_ngcontent-%COMP%]   .incident[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:3px;position:absolute;right:0}ion-content[_ngcontent-%COMP%]   .activeBackground[_ngcontent-%COMP%]{border-radius:20px;margin-bottom:22px;background-color:#f3f3f3;padding:15px;font-family:mon-bold;color:#313131}ion-content[_ngcontent-%COMP%]   .activeBackground[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-transform:capitalize;text-align:left;justify-content:flex-start;color:#313131;font-size:20px}ion-content[_ngcontent-%COMP%]   .activeBackground[_ngcontent-%COMP%]   .headerTitle[_ngcontent-%COMP%]{display:flex;align-items:center}ion-content[_ngcontent-%COMP%]   .activeBackground[_ngcontent-%COMP%]   .headerTitle[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;right:33px;margin-top:-8px}ion-content[_ngcontent-%COMP%]   .questionHead[_ngcontent-%COMP%]{font-family:mon-bold;font-size:20px!important}ion-content[_ngcontent-%COMP%]   .ra[_ngcontent-%COMP%]{text-transform:capitalize;--background:transparent;padding:0;margin:0;--padding-top:0px;--inner-padding-top:0;--inner-padding-end:0;--inner-padding-bottom:0;--inner-padding-start:0;--padding-bottom:0;--padding-start:0;--padding-end:0}ion-content[_ngcontent-%COMP%]   .ra[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-family:mon-medium;font-size:15px;color:var(--black-color)}ion-content[_ngcontent-%COMP%]   .other_witness[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10px;font-size:16px!important}ion-content[_ngcontent-%COMP%]   .labelCustomDropDown[_ngcontent-%COMP%]{margin-left:12px}ion-content[_ngcontent-%COMP%]   .camera[_ngcontent-%COMP%]{margin-top:16px}ion-content[_ngcontent-%COMP%]   .img-responsive[_ngcontent-%COMP%]{height:200px;width:250px;-o-object-fit:contain;object-fit:contain;border-radius:10px}ion-content[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{height:1px;background:#ccc;margin-top:0;margin-bottom:0}"]}),e})()}];let He=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[s.Bz.forChild(Ye)],s.Bz]}),e})();var Ee=t(69270);let Qe=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[n.ez,o.u5,a.Pc,He,o.UX,Ee.I]]}),e})()},49481:function(e,i,t){"use strict";t.d(i,{F:function(){return l}});var n=t(64762),o=t(10639),a=t(89985),s=t(47823),r=t(84267);let l=(()=>{class e{constructor(e,i,t){this.globalService=e,this.actionSheetController=i,this.camera=t,this.notViewNotiCount=0,this.prestartMenu=[{menuName:"LV",route:"#",favorite:!1,position_in_list:1},{menuName:"Forklift",route:"#",favorite:!1,position_in_list:2},{menuName:"Telehandler",route:"/home/safety-menu/telehandler-add-form",favorite:!1,position_in_list:3},{menuName:"Crane",route:"/home/safety-menu/crane-add-form",favorite:!1,position_in_list:4},{menuName:"Vehicle Hoist",route:"/home/safety-menu/vehicle-hoist-add-form",favorite:!1,position_in_list:5}]}getBase64(e){return new Promise((i,t)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>i(n.result),n.onerror=e=>t(e)})}mobileUploadImages(){return(0,n.mG)(this,void 0,void 0,function*(){let e;const i=yield this.actionSheetController.create({header:"Select Image source",buttons:[{text:"Load from Library",handler:()=>e=this.pickImage(this.camera.PictureSourceType.PHOTOLIBRARY)},{text:"Use Camera",handler:()=>e=this.pickImage(this.camera.PictureSourceType.CAMERA)},{text:"Cancel",role:"cancel"}]});yield i.present()})}pickImage(e){return(0,n.mG)(this,void 0,void 0,function*(){const i={quality:100,sourceType:e,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE};yield this.camera.getPicture(i).then(e=>{console.log("imageData",e);let i="data:image/jpeg;base64,"+e;return console.log("pickImage",i),i},e=>{console.log("errOf Image ",e)})})}resize(e){return e.innerWidth?e.innerWidth:e.target.innerWidth}}return e.\u0275fac=function(i){return new(i||e)(o.LFG(a.U),o.LFG(s.BX),o.LFG(r.V1))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);