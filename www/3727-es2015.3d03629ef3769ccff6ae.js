(self.webpackChunkhub=self.webpackChunkhub||[]).push([[3727],{73727:function(t,e,n){"use strict";n.r(e),n.d(e,{IncidentFormListPageModule:function(){return W}});var o=n(38583),i=n(90665),a=n(47823),s=n(10649),r=n(64762),l=n(10639),c=n(16738),m=n.n(c),g=n(89985),d=n(49481),u=n(68366),f=n(85291),p=n(72533);function Z(t,e){if(1&t&&(l.TgZ(0,"b",9),l.TgZ(1,"ion-text",16),l._uU(2),l.qZA(),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(2),l.Oqu(t.Status)}}function h(t,e){if(1&t&&(l.TgZ(0,"b",9),l.TgZ(1,"ion-text",17),l._uU(2),l.qZA(),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(2),l.Oqu(t.Status)}}function x(t,e){if(1&t&&(l.TgZ(0,"b",9),l.TgZ(1,"ion-text",18),l._uU(2),l.qZA(),l.qZA()),2&t){const t=l.oxw().$implicit;l.xp6(2),l.Oqu(t.Status)}}function b(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"ion-card"),l.TgZ(1,"ion-item-sliding"),l.TgZ(2,"ion-item",6),l.TgZ(3,"ion-label"),l.TgZ(4,"ion-row"),l.TgZ(5,"ion-col",7),l.TgZ(6,"h2"),l._uU(7,"Form :"),l.qZA(),l.qZA(),l.TgZ(8,"ion-col"),l.TgZ(9,"ion-text",8),l.TgZ(10,"b"),l._uU(11),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(12,"ion-row"),l.TgZ(13,"ion-col",7),l.TgZ(14,"ion-label"),l._uU(15,"Date :"),l.qZA(),l.qZA(),l.TgZ(16,"ion-col"),l.TgZ(17,"p",9),l._uU(18),l.qZA(),l.qZA(),l.qZA(),l.TgZ(19,"ion-row"),l.TgZ(20,"ion-col",7),l.TgZ(21,"ion-label"),l._uU(22,"Name :"),l.qZA(),l.qZA(),l.TgZ(23,"ion-col"),l.TgZ(24,"p",9),l._uU(25),l.qZA(),l.qZA(),l.qZA(),l.TgZ(26,"ion-row"),l.TgZ(27,"ion-col",7),l.TgZ(28,"ion-label"),l._uU(29,"Delegated :"),l.qZA(),l.qZA(),l.TgZ(30,"ion-col"),l.TgZ(31,"p",9),l._uU(32),l.qZA(),l.qZA(),l.qZA(),l.TgZ(33,"ion-row"),l.TgZ(34,"ion-col",7),l.TgZ(35,"ion-label"),l._uU(36,"Status :"),l.qZA(),l.qZA(),l.TgZ(37,"ion-col"),l.YNc(38,Z,3,1,"b",10),l.YNc(39,h,3,1,"b",10),l.YNc(40,x,3,1,"b",10),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(41,"ion-item-options",11),l.TgZ(42,"ion-item-option",12),l.NdJ("click",function(){const e=l.CHM(t).$implicit;return l.oxw(2).onGoToDetails(e)}),l._UZ(43,"ion-icon",13),l.qZA(),l.TgZ(44,"ion-item-option",14),l.NdJ("click",function(){const e=l.CHM(t).$implicit;return l.oxw(2).onGoToEdit(e)}),l._UZ(45,"ion-icon",15),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=e.$implicit;l.xp6(11),l.Oqu(t.Form),l.xp6(7),l.hij(" ",t.Date," "),l.xp6(7),l.hij(" ",t.Name,""),l.xp6(7),l.hij(" ",t.Delegate,""),l.xp6(6),l.Q6J("ngIf","Completed"==t.Status),l.xp6(1),l.Q6J("ngIf","In progress"==t.Status),l.xp6(1),l.Q6J("ngIf","Cancel"==t.Status)}}function q(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",20),l.TgZ(1,"a",21),l.NdJ("click",function(){l.CHM(t);const e=l.oxw(3);return e.loadData("newList",e.pageNumber,"mobile")}),l._uU(2,"Load More "),l.qZA(),l.qZA()}}function T(t,e){if(1&t&&(l.TgZ(0,"span"),l.YNc(1,q,3,0,"div",19),l.qZA()),2&t){const t=l.oxw(2);l.xp6(1),l.Q6J("ngIf",t.allSubmittedFormlist.length>0)}}function w(t,e){if(1&t&&(l.TgZ(0,"ion-list"),l.YNc(1,b,46,7,"ion-card",5),l.YNc(2,T,2,1,"span",3),l.qZA()),2&t){const t=l.oxw();l.xp6(1),l.Q6J("ngForOf",t.allSubmittedFormlist),l.xp6(1),l.Q6J("ngIf",t.totalElements!=(t.pageNumber-1)*(t.size+1))}}function A(t,e){if(1&t&&l._uU(0),2&t){const t=e.rowIndex,n=l.oxw(2);l.hij("",(n.pageNumber-1)*n.size+t+1," ")}}function _(t,e){if(1&t&&(l.TgZ(0,"ion-text",8),l._uU(1),l.qZA()),2&t){const t=e.value;l.xp6(1),l.Oqu(t)}}function v(t,e){if(1&t&&(l.TgZ(0,"ion-text",16),l._uU(1),l.qZA()),2&t){const t=l.oxw().value;l.xp6(1),l.Oqu(t)}}function N(t,e){if(1&t&&(l.TgZ(0,"ion-text",17),l._uU(1),l.qZA()),2&t){const t=l.oxw().value;l.xp6(1),l.Oqu(t)}}function F(t,e){if(1&t&&(l.TgZ(0,"ion-text",18),l._uU(1),l.qZA()),2&t){const t=l.oxw().value;l.xp6(1),l.Oqu(t)}}function I(t,e){if(1&t&&(l.YNc(0,v,2,1,"ion-text",34),l.YNc(1,N,2,1,"ion-text",35),l.YNc(2,F,2,1,"ion-text",36)),2&t){const t=e.value;l.Q6J("ngIf","Completed"==t),l.xp6(1),l.Q6J("ngIf","In progress"==t),l.xp6(1),l.Q6J("ngIf","Cancel"==t)}}function S(t,e){1&t&&l._uU(0,"View")}function J(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"span",37),l.NdJ("click",function(){const e=l.CHM(t).row;return l.oxw(2).onGoToDetails(e)}),l._UZ(1,"ion-icon",38),l.qZA()}}function z(t,e){1&t&&l._uU(0,"Edit")}function U(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"span",39),l.NdJ("click",function(){const e=l.CHM(t).row;return l.oxw(2).onGoToEdit(e)}),l._UZ(1,"ion-icon",40),l.qZA()}}function D(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"ngx-datatable",22),l.NdJ("page",function(e){return l.CHM(t),l.oxw().loadData(e,"","web")}),l.TgZ(1,"ngx-datatable-column",23),l.YNc(2,A,1,1,"ng-template",24),l.qZA(),l.TgZ(3,"ngx-datatable-column",25),l.YNc(4,_,2,1,"ng-template",24),l.qZA(),l._UZ(5,"ngx-datatable-column",26),l._UZ(6,"ngx-datatable-column",27),l._UZ(7,"ngx-datatable-column",28),l.TgZ(8,"ngx-datatable-column",29),l.YNc(9,I,3,3,"ng-template",24),l.qZA(),l.TgZ(10,"ngx-datatable-column",30),l.YNc(11,S,1,0,"ng-template",31),l.YNc(12,J,2,0,"ng-template",24),l.qZA(),l.TgZ(13,"ngx-datatable-column",30),l.YNc(14,z,1,0,"ng-template",31),l.YNc(15,U,2,0,"ng-template",24),l.qZA(),l.TgZ(16,"div",32),l.TgZ(17,"pagination-controls",33),l.NdJ("pageChange",function(e){return l.CHM(t),l.oxw().loadData(e,"","web")}),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.Q6J("rows",t.allSubmittedFormlist)("columnMode","force")("headerHeight",50)("footerHeight",50)("externalPaging",!0)("count",t.totalElements)("offset",t.offset)("limit",t.size),l.xp6(1),l.Q6J("minWidth",5)("resizeable",!0),l.xp6(2),l.Q6J("minWidth",100)("resizeable",!0),l.xp6(2),l.Q6J("minWidth",50)("resizeable",!0),l.xp6(1),l.Q6J("minWidth",50)("resizeable",!0),l.xp6(1),l.Q6J("minWidth",50)("resizeable",!0),l.xp6(1),l.Q6J("minWidth",50)("resizeable",!0),l.xp6(2),l.Q6J("minWidth",20)("resizeable",!0),l.xp6(3),l.Q6J("minWidth",20)("resizeable",!0)}}let Y=class{constructor(t,e,n){this.nav=t,this.global=e,this.sharedService=n,this.pName="Submitted Forms",this.allSubmittedFormlist=[],this.newList=[],this.listOfUsers=[],this.size=10,this.totalElements=0,this.pageNumber=0,this.offset=0}ngOnInit(){this.onResize(window),this.setValueOnLoadData()}onResize(t){this.getScreenWidth=this.sharedService.resize(t)}setValueOnLoadData(){let t=this.getScreenWidth<1080?"mobile":"web";"mobile"==t?this.loadData("",1,t):this.loadData({count:60,limit:10,offset:0,pageSize:10},"",t)}loadData(t,e,n){"mobile"==n&&(this.pageNumber="newList"==t?++e:e),"web"==n&&(this.pageNumber=t.offset+1,this.offset=t.offset),0!=this.pageNumber&&this.global.getData("add_form/get/?page_no="+this.pageNumber).subscribe(t=>{t&&t.data&&t.data.mforms_add_form&&t.data.mforms_add_form.length>0&&(t.data.mforms_add_form.sort(function(t,e){let n=new Date(t.Date),o=new Date(e.Date);return n>o?-1:n<o?1:0}),t.data.mforms_add_form.forEach(t=>{"mforms_add_form"==t.Form?t.Form="Incident":"mforms_telehandler"==t.Form?t.Form="Telehandler Prestarts":"mforms_crane"==t.Form?t.Form="Crane Prestarts":"mforms_prestart_vehicle_hoist"==t.Form&&(t.Form="Vehicle Hoist Prestarts"),t.Date=m()(t.Date).format("DD-MM-YYYY hh:mm"),t.Status=0==t.Status?"In progress":1==t.Status?"Completed":2==t.Status?"Cancel":""}),this.totalElements=t.row_count,"mobile"==n&&(0==this.allSubmittedFormlist.length?this.allSubmittedFormlist=t.data.mforms_add_form:(this.newList=this.allSubmittedFormlist,this.allSubmittedFormlist=this.newList.concat(t.data.mforms_add_form))),"web"==n&&(this.allSubmittedFormlist=t.data.mforms_add_form))},t=>{console.log(t)})}onGoToEdit(t){t&&"Incident"==t.Form?this.nav.navigateRoot("/home/safety-menu/incident-form-edit/"+t.Id):t&&"Telehandler Prestarts"==t.Form?this.nav.navigateRoot("/home/safety-menu/telehandler-add-form/"+t.Id):t&&"Crane Prestarts"==t.Form?this.nav.navigateRoot("/home/safety-menu/crane-add-form/"+t.Id):t&&"Vehicle Hoist Prestarts"==t.Form&&this.nav.navigateRoot("/home/safety-menu/vehicle-hoist-add-form/"+t.Id)}onGoToDetails(t){t&&"Incident"==t.Form?this.nav.navigateRoot("/home/safety-menu/incident-details/"+t.Id):t&&"Telehandler Prestarts"==t.Form?this.nav.navigateRoot("/home/safety-menu/telehandler-view-detail/"+t.Id):t&&"Crane Prestarts"==t.Form?this.nav.navigateRoot("/home/safety-menu/crane-view-detail/"+t.Id):t&&"Vehicle Hoist Prestarts"==t.Form&&this.nav.navigateRoot("/home/safety-menu/vehicle-host-view-detail/"+t.Id)}};Y.\u0275fac=function(t){return new(t||Y)(l.Y36(a.SH),l.Y36(g.U),l.Y36(d.F))},Y.\u0275cmp=l.Xpm({type:Y,selectors:[["app-incident-form-list"]],decls:5,vars:3,consts:[[3,"resize"],[3,"pageName"],[1,"container"],[4,"ngIf"],["class","material","rowHeight","auto",3,"rows","columnMode","headerHeight","footerHeight","externalPaging","count","offset","limit","page",4,"ngIf"],[4,"ngFor","ngForOf"],["lines","none"],["size","auto"],["color","primary"],[1,"value"],["class","value",4,"ngIf"],["side","end"],["title","View",1,"item-option",3,"click"],["slot","icon-only","name","eye-outline",2,"pointer-events","none"],["title","Edit",1,"item-option",3,"click"],["slot","icon-only","name","create-outline",2,"pointer-events","none"],["color","success"],["color","warning"],["color","danger"],["class","ion-margin-top ion-text-center",4,"ngIf"],[1,"ion-margin-top","ion-text-center"],["href","javascript:void(0)",3,"click"],["rowHeight","auto",1,"material",3,"rows","columnMode","headerHeight","footerHeight","externalPaging","count","offset","limit","page"],["name","Sr.No",3,"minWidth","resizeable"],["ngx-datatable-cell-template",""],["name","Form","prop","Form",3,"minWidth","resizeable"],["name","Date","prop","Date",3,"minWidth","resizeable"],["name","Name","prop","Name",3,"minWidth","resizeable"],["name","Delegated","prop","Delegate",3,"minWidth","resizeable"],["name","Status","prop","Status",3,"minWidth","resizeable"],["prop","Id",3,"minWidth","resizeable"],["ngx-datatable-header-template",""],[1,"d-flex","justify-content-center"],["previousLabel","Prev","nextLabel","Next",3,"pageChange"],["color","success",4,"ngIf"],["color","warning",4,"ngIf"],["color","danger",4,"ngIf"],["title","View",3,"click"],["slot","icon-only","name","eye-outline",1,"view",2,"pointer-events","none"],["title","Edit",3,"click"],["slot","icon-only","name","create-outline",1,"view",2,"pointer-events","none"]],template:function(t,e){1&t&&(l.TgZ(0,"ion-content",0),l.NdJ("resize",function(t){return e.onResize(t)},!1,l.Jf7),l._UZ(1,"app-header",1),l.TgZ(2,"div",2),l.YNc(3,w,3,2,"ion-list",3),l.YNc(4,D,18,24,"ngx-datatable",4),l.qZA(),l.qZA()),2&t&&(l.xp6(1),l.Q6J("pageName",e.pName),l.xp6(2),l.Q6J("ngIf",e.getScreenWidth<768),l.xp6(1),l.Q6J("ngIf",e.getScreenWidth>=768))},directives:[a.W2,u.G,o.O5,a.q_,o.sg,a.PM,a.td,a.Ie,a.Q$,a.Nd,a.wI,a.yW,a.IK,a.u8,a.gu,f.nE,f.UC,f.vq,f.tk,p.LS],styles:[".icon-disabled[_ngcontent-%COMP%]{color:grey}.item-option[_ngcontent-%COMP%]{background:#fff;color:#1c6afe!important;font-size:10px}"]}),Y=(0,r.gn)([(0,l.L6J)("window:resize",["$event"])],Y);const C=[{path:"",component:Y}];let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[s.Bz.forChild(C)],s.Bz]}),t})();var Q=n(69270);let W=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[o.ez,i.u5,a.Pc,y,f.xD,p.JX,Q.I]]}),t})()}}]);