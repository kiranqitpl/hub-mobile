!function(){function i(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function t(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}(self.webpackChunkhub=self.webpackChunkhub||[]).push([[7267],{87267:function(e,n,o){"use strict";o.r(n),o.d(n,{NotificationPageModule:function(){return y}});var a=o(38583),s=o(90665),r=o(47823),c=o(10649),l=o(64762),f=o(92340),u=o(10639),g=o(89985),h=o(49481),d=o(68366);function v(i,t){if(1&i){var e=u.EpF();u.TgZ(0,"ion-row"),u._UZ(1,"ion-col",6),u.TgZ(2,"ion-col",7),u.TgZ(3,"ion-checkbox",8),u.NdJ("ionChange",function(){var i=u.CHM(e).$implicit;return u.oxw().onDeleteDataSelect(i.id)}),u.qZA(),u.qZA(),u.TgZ(4,"ion-col",9),u.NdJ("click",function(){var i=u.CHM(e).$implicit;return u.oxw().onNotificationDetaliPage(i.id,i.form_id,i.form_type,i.is_seen)}),u._uU(5),u.qZA(),u._UZ(6,"ion-col",6),u.qZA()}if(2&i){var n=t.$implicit;u.xp6(5),u.hij(" ",n.message," ")}}var p,m,b=[{path:"",component:(p=function(){function e(t,n,o){i(this,e),this.nav=t,this.globalService=n,this.sharedService=o,this.pName="Notifications",this.type=f.N.allType,this.notificationId=[],this.notificationData="",this.loggedInUser=""}var n,o,a;return n=e,(o=[{key:"ngOnInit",value:function(){this.loggedInUser=JSON.parse(localStorage.getItem("userDetails")),this.onNotificationLoad()}},{key:"onNotificationLoad",value:function(){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function i(){var t=this;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:this.globalService.presentLoading(),this.globalService.getData("notification/getNotificationList/"+this.loggedInUser.id).subscribe(function(i){console.log("result",i),t.notificationData=i&&i.row_count>0?i.data:[],console.log("this.notificationData ",t.notificationData),t.globalService.dismissLoading()});case 1:case"end":return i.stop()}},i,this)}))}},{key:"filterArrayData",value:function(i){var t=[];return t.result=!1,this.notificationId.filter(function(e,n){e==i&&(t.result=!0,t.index=n)}),t}},{key:"onDeleteDataSelect",value:function(i){var t=this.filterArrayData(i);t.result?this.notificationId.splice(t.index,1):this.notificationId.push(i)}},{key:"onDelete",value:function(){var i=this;if(0!=this.notificationId.length){this.globalService.presentLoading();var t=new FormData;t.append("id",JSON.stringify(this.notificationId)),this.globalService.postData("notification/deleteNotificationByNotificationID",t).subscribe(function(t){t&&t.status&&i.onNotificationLoad(),i.globalService.presentToast(t.message),i.globalService.dismissLoading()})}}},{key:"onNotificationDetaliPage",value:function(i,t,e,n){var o=this;e==this.globalService.formType_user?this.nav.navigateRoot("/home/safety-menu/incident-details/"+t):e==this.globalService.formType_investigator&&this.nav.navigateForward("investigation-view/"+t),0==n&&this.globalService.getData("notification/changeNotificationSeen/"+i).subscribe(function(i){i.status&&(o.sharedService.notViewNotiCount=0!=o.sharedService.notViewNotiCount?o.sharedService.notViewNotiCount-1:0)})}}])&&t(n.prototype,o),a&&t(n,a),e}(),p.\u0275fac=function(i){return new(i||p)(u.Y36(r.SH),u.Y36(g.U),u.Y36(h.F))},p.\u0275cmp=u.Xpm({type:p,selectors:[["app-notification"]],decls:8,vars:2,consts:[[3,"pageName"],[1,"container"],["size","10"],["size","2"],["name","trash",3,"click"],[4,"ngFor","ngForOf"],["size-lg","2","size-md","2","size-sm","2","size-xl","2","size-xs","2"],["size-lg","1","size-md","1","size-sm","2","size-xl","2","size-xs","2"],[3,"ionChange"],["size-lg","7","size-md","7","size-sm","6","size-xl","6","size-xs","6",3,"click"]],template:function(i,t){1&i&&(u.TgZ(0,"ion-content"),u._UZ(1,"app-header",0),u.TgZ(2,"div",1),u.TgZ(3,"ion-row"),u._UZ(4,"ion-col",2),u.TgZ(5,"ion-col",3),u.TgZ(6,"ion-icon",4),u.NdJ("click",function(){return t.onDelete()}),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,v,7,1,"ion-row",5),u.qZA(),u.qZA()),2&i&&(u.xp6(1),u.Q6J("pageName",t.pName),u.xp6(6),u.Q6J("ngForOf",t.notificationData))},directives:[r.W2,d.G,r.Nd,r.wI,r.gu,a.sg,r.nz,r.w],styles:[""]}),p)}],N=function(){var t=function t(){i(this,t)};return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[c.Bz.forChild(b)],c.Bz]}),t}(),w=o(69270),y=((m=function t(){i(this,t)}).\u0275fac=function(i){return new(i||m)},m.\u0275mod=u.oAB({type:m}),m.\u0275inj=u.cJS({imports:[[a.ez,s.u5,r.Pc,N,w.I]]}),m)}}])}();