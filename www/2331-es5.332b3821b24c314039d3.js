!function(){function e(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function i(e,i){for(var n=0;n<i.length;n++){var t=i[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}(self.webpackChunkhub=self.webpackChunkhub||[]).push([[2331],{52331:function(n,t,o){"use strict";o.r(t),o.d(t,{ActionsPageModule:function(){return q}});var a=o(38583),r=o(90665),s=o(47823),l=o(10649),c=o(16738),d=o.n(c),u=o(10639),g=o(89985),p=o(80513);function f(e,i){if(1&e&&(u.TgZ(0,"ion-select-option",15),u.TgZ(1,"p"),u._uU(2),u.qZA(),u.qZA()),2&e){var n=i.$implicit;u.s9C("value",null==n?null:n.employee_id),u.xp6(2),u.Oqu(null==n?null:n.full_name)}}function h(e,i){if(1&e){var n=u.EpF();u.TgZ(0,"ion-button",16),u.NdJ("click",function(){return u.CHM(n),u.oxw().onSubmit()}),u._uU(1," SUBMIT "),u.qZA()}}function m(e,i){if(1&e){var n=u.EpF();u.TgZ(0,"ion-button",16),u.NdJ("click",function(){return u.CHM(n),u.oxw().onSubmit()}),u._uU(1," UPDATE "),u.qZA()}}var _,Z,v=[{path:"",component:(_=function(){function n(i,t,o){e(this,n),this.nav=i,this.global=t,this.loadingService=o,this.pName="Actions",this.data=[],this.description_of_required_action="",this.priority="",this.expected_completion="",this.loggedInUser=""}var t,o,a;return t=n,(o=[{key:"ngOnInit",value:function(){this.loggedInUser=JSON.parse(localStorage.getItem("userDetails"));var e=JSON.parse(localStorage.getItem("singleView"));this.incident_id=e.id,this.loadEmp()}},{key:"loadEmp",value:function(){var e=this;this.loadingService.presentLoading(),this.global.getData("user/getAllUser").subscribe(function(i){i&&i.data&&(e.data=i.data),e.loadingService.dismissLoading()},function(i){e.loadingService.dismissLoading(),console.log(i)})}},{key:"ionViewWillEnter",value:function(){var e=this,i=localStorage.getItem("isActionsForm");this.isFrom=i,"edit"==i&&(JSON.parse(localStorage.getItem("singleView")),this.global.getData("Investigator/getInvestigationAction/"+this.loggedInUser.id).subscribe(function(i){var n;i&&(null===(n=null==i?void 0:i.data)||void 0===n||n.forEach(function(i){i.incident_id==e.incident_id&&(e.description_of_required_action=i.description_of_required_action,e.user_name=i.user_id,e.priority=i.priority,e.expected_completion=i.expected_completion,e.id=i.id)}))},function(e){console.log("res",e)}))}},{key:"goBack",value:function(){this.nav.back()}},{key:"selectUser",value:function(e){var i=this;this.data.forEach(function(n){n.employee_id==e.detail.value&&(i.user_id=n.full_name)})}},{key:"dateSelect",value:function(e){this.expected_completion=d()(e.detail.value).format("YYYY-MM-DD")}},{key:"onSubmit",value:function(){var e=this,i=JSON.parse(localStorage.getItem("userDetails"));if(""==this.description_of_required_action)this.global.presentToast("Please enter description of required action");else if(""==this.user_name)this.global.presentToast("Please Select User");else if(""==this.priority)this.global.presentToast("Please select the priority");else if(""==this.expected_completion)this.global.presentToast("Please enter expected completion");else{this.global.presentLoading();var n=new FormData;"edit"==this.isFrom&&n.append("id",this.id),n.append("incident_id",this.incident_id),n.append("user_id",this.user_name),n.append("user_name",this.user_id),n.append("priority",this.priority),n.append("expected_completion",this.expected_completion),n.append("description_of_required_action",this.description_of_required_action),n.append("investigator_id",i.id),this.global.postData("Investigator/InvestigationAction",n).subscribe(function(i){i.status?(e.global.presentToast(i.message),e.global.dismissLoading(),e.nav.back()):e.global.dismissLoading()},function(i){console.log(i),e.global.dismissLoading()})}}}])&&i(t.prototype,o),a&&i(t,a),n}(),_.\u0275fac=function(e){return new(e||_)(u.Y36(s.SH),u.Y36(g.U),u.Y36(p.b))},_.\u0275cmp=u.Xpm({type:_,selectors:[["app-actions"]],decls:33,vars:7,consts:[[1,"container"],[1,"ion-padding-start","ion-padding-end"],[1,"question"],["placeholder","Enter here",3,"ngModel","ngModelChange"],["lines","none",1,"ra","ion-no-margin","ion-no-padding"],["placeholder","Select One","interface","action-sheet",3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[1,"ion-no-padding"],["size","4",1,"ion-no-padding"],["lines","none",1,"ra"],["slot","start","value","Minor"],["slot","start","value","Major"],["displayFormat","DD/MM/YYYY","placeholder","Select date",3,"ngModel","ionChange","ngModelChange"],["class","btn","type","submit",3,"click",4,"ngIf"],[3,"value"],["type","submit",1,"btn",3,"click"]],template:function(e,i){1&e&&(u.TgZ(0,"ion-content"),u.TgZ(1,"div",0),u.TgZ(2,"ion-card"),u.TgZ(3,"ion-card-content"),u.TgZ(4,"div",1),u.TgZ(5,"p",2),u._uU(6," Description of Required Action "),u.qZA(),u.TgZ(7,"ion-input",3),u.NdJ("ngModelChange",function(e){return i.description_of_required_action=e}),u.qZA(),u.TgZ(8,"p",2),u._uU(9,"Allocated to"),u.qZA(),u.TgZ(10,"ion-item",4),u.TgZ(11,"ion-select",5),u.NdJ("ngModelChange",function(e){return i.user_name=e})("ionChange",function(e){return i.selectUser(e)}),u.YNc(12,f,3,2,"ion-select-option",6),u.qZA(),u.qZA(),u.TgZ(13,"p",2),u._uU(14,"Priority"),u.qZA(),u.TgZ(15,"ion-radio-group",7),u.NdJ("ngModelChange",function(e){return i.priority=e}),u.TgZ(16,"ion-row",8),u.TgZ(17,"ion-col",9),u.TgZ(18,"ion-item",10),u.TgZ(19,"ion-label"),u._uU(20,"Minor"),u.qZA(),u._UZ(21,"ion-radio",11),u.qZA(),u.qZA(),u.TgZ(22,"ion-col",9),u.TgZ(23,"ion-item",10),u.TgZ(24,"ion-label"),u._uU(25,"Major"),u.qZA(),u._UZ(26,"ion-radio",12),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(27,"p",2),u._uU(28,"Expected completion"),u.qZA(),u.TgZ(29,"ion-item",10),u.TgZ(30,"ion-datetime",13),u.NdJ("ionChange",function(e){return i.dateSelect(e)})("ngModelChange",function(e){return i.expected_completion=e}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(31,h,2,0,"ion-button",14),u.YNc(32,m,2,0,"ion-button",14),u.qZA(),u.qZA()),2&e&&(u.xp6(7),u.Q6J("ngModel",i.description_of_required_action),u.xp6(4),u.Q6J("ngModel",i.user_name),u.xp6(1),u.Q6J("ngForOf",i.data),u.xp6(3),u.Q6J("ngModel",i.priority),u.xp6(15),u.Q6J("ngModel",i.expected_completion),u.xp6(1),u.Q6J("ngIf","add"==i.isFrom),u.xp6(1),u.Q6J("ngIf","edit"==i.isFrom))},directives:[s.W2,s.PM,s.FN,s.pK,s.j9,r.JJ,r.On,s.Ie,s.t9,s.QI,a.sg,s.se,s.Nd,s.wI,s.Q$,s.B7,s.U5,s.x4,a.O5,s.n0,s.YG],styles:[""]}),_)}],b=function(){var i=function i(){e(this,i)};return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=u.oAB({type:i}),i.\u0275inj=u.cJS({imports:[[l.Bz.forChild(v)],l.Bz]}),i}(),q=((Z=function i(){e(this,i)}).\u0275fac=function(e){return new(e||Z)},Z.\u0275mod=u.oAB({type:Z}),Z.\u0275inj=u.cJS({imports:[[a.ez,r.u5,s.Pc,b]]}),Z)}}])}();