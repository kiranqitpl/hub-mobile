(self.webpackChunkhub=self.webpackChunkhub||[]).push([[7267],{87267:function(i,t,e){"use strict";e.r(t),e.d(t,{NotificationPageModule:function(){return v}});var o=e(38583),n=e(90665),s=e(47823),a=e(10649),c=e(64762),r=e(92340),l=e(10639),g=e(89985),h=e(49481),f=e(68366);function d(i,t){if(1&i){const i=l.EpF();l.TgZ(0,"ion-row"),l._UZ(1,"ion-col",6),l.TgZ(2,"ion-col",7),l.TgZ(3,"ion-checkbox",8),l.NdJ("ionChange",function(){const t=l.CHM(i).$implicit;return l.oxw().onDeleteDataSelect(t.id)}),l.qZA(),l.qZA(),l.TgZ(4,"ion-col",9),l.NdJ("click",function(){const t=l.CHM(i).$implicit;return l.oxw().onNotificationDetaliPage(t.id,t.form_id,t.form_type,t.is_seen)}),l._uU(5),l.qZA(),l._UZ(6,"ion-col",6),l.qZA()}if(2&i){const i=t.$implicit;l.xp6(5),l.hij(" ",i.message," ")}}const u=[{path:"",component:(()=>{class i{constructor(i,t,e){this.nav=i,this.globalService=t,this.sharedService=e,this.pName="Notifications",this.type=r.N.allType,this.notificationId=[],this.notificationData="",this.loggedInUser=""}ngOnInit(){this.loggedInUser=JSON.parse(localStorage.getItem("userDetails")),this.onNotificationLoad()}onNotificationLoad(){return(0,c.mG)(this,void 0,void 0,function*(){this.globalService.presentLoading(),this.globalService.getData("notification/getNotificationList/"+this.loggedInUser.id).subscribe(i=>{console.log("result",i),this.notificationData=i&&i.row_count>0?i.data:[],console.log("this.notificationData ",this.notificationData),this.globalService.dismissLoading()})})}filterArrayData(i){let t=[];return t.result=!1,this.notificationId.filter((e,o)=>{e==i&&(t.result=!0,t.index=o)}),t}onDeleteDataSelect(i){let t=this.filterArrayData(i);t.result?this.notificationId.splice(t.index,1):this.notificationId.push(i)}onDelete(){if(0!=this.notificationId.length){this.globalService.presentLoading();let i=new FormData;i.append("id",JSON.stringify(this.notificationId)),this.globalService.postData("notification/deleteNotificationByNotificationID",i).subscribe(i=>{i&&i.status&&this.onNotificationLoad(),this.globalService.presentToast(i.message),this.globalService.dismissLoading()})}}onNotificationDetaliPage(i,t,e,o){e==this.globalService.formType_user?this.nav.navigateRoot("/home/safety-menu/incident-details/"+t):e==this.globalService.formType_investigator&&this.nav.navigateForward("investigation-view/"+t),0==o&&this.globalService.getData("notification/changeNotificationSeen/"+i).subscribe(i=>{i.status&&(this.sharedService.notViewNotiCount=0!=this.sharedService.notViewNotiCount?this.sharedService.notViewNotiCount-1:0)})}}return i.\u0275fac=function(t){return new(t||i)(l.Y36(s.SH),l.Y36(g.U),l.Y36(h.F))},i.\u0275cmp=l.Xpm({type:i,selectors:[["app-notification"]],decls:8,vars:2,consts:[[3,"pageName"],[1,"container"],["size","10"],["size","2"],["name","trash",3,"click"],[4,"ngFor","ngForOf"],["size-lg","2","size-md","2","size-sm","2","size-xl","2","size-xs","2"],["size-lg","1","size-md","1","size-sm","2","size-xl","2","size-xs","2"],[3,"ionChange"],["size-lg","7","size-md","7","size-sm","6","size-xl","6","size-xs","6",3,"click"]],template:function(i,t){1&i&&(l.TgZ(0,"ion-content"),l._UZ(1,"app-header",0),l.TgZ(2,"div",1),l.TgZ(3,"ion-row"),l._UZ(4,"ion-col",2),l.TgZ(5,"ion-col",3),l.TgZ(6,"ion-icon",4),l.NdJ("click",function(){return t.onDelete()}),l.qZA(),l.qZA(),l.qZA(),l.YNc(7,d,7,1,"ion-row",5),l.qZA(),l.qZA()),2&i&&(l.xp6(1),l.Q6J("pageName",t.pName),l.xp6(6),l.Q6J("ngForOf",t.notificationData))},directives:[s.W2,f.G,s.Nd,s.wI,s.gu,o.sg,s.nz,s.w],styles:[""]}),i})()}];let p=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[[a.Bz.forChild(u)],a.Bz]}),i})();var m=e(69270);let v=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[[o.ez,n.u5,s.Pc,p,m.I]]}),i})()}}]);