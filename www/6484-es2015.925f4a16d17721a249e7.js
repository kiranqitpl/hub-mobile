(self.webpackChunkhub=self.webpackChunkhub||[]).push([[6484],{86484:function(i,t,e){"use strict";e.r(t),e.d(t,{NotificationPageModule:function(){return N}});var o=e(38583),n=e(90665),s=e(47823),a=e(10649),c=e(92340),r=e(10639),l=e(89985),f=e(49481),g=e(68366);function h(i,t){if(1&i){const i=r.EpF();r.TgZ(0,"ion-row"),r._UZ(1,"ion-col",4),r.TgZ(2,"ion-col",5),r.TgZ(3,"ion-icon",6),r.NdJ("click",function(){return r.CHM(i),r.oxw().onDelete()}),r.qZA(),r.qZA(),r.qZA()}}function u(i,t){if(1&i){const i=r.EpF();r.TgZ(0,"ion-row"),r._UZ(1,"ion-col",7),r.TgZ(2,"ion-col",8),r.TgZ(3,"ion-checkbox",9),r.NdJ("ionChange",function(){const t=r.CHM(i).$implicit;return r.oxw().onDeleteDataSelect(t.id)}),r.qZA(),r.qZA(),r.TgZ(4,"ion-col",10),r.NdJ("click",function(){const t=r.CHM(i).$implicit;return r.oxw().onNotificationDetaliPage(t.id,t.form_id,t.form_type,t.is_seen)}),r._uU(5),r.qZA(),r._UZ(6,"ion-col",7),r.qZA()}if(2&i){const i=t.$implicit;r.xp6(5),r.hij(" ",i.message," ")}}const d=[{path:"",component:(()=>{class i{constructor(i,t,e){this.nav=i,this.globalService=t,this.sharedService=e,this.pName="Notifications",this.type=c.N.allType,this.notificationId=[],this.notificationData="",this.loggedInUser="",this.size=10,this.totalElements=0,this.pageNumber=0,this.offset=0}ngOnInit(){this.loggedInUser=JSON.parse(localStorage.getItem("userDetails")),this.onNotificationLoad()}onNotificationLoad(){this.globalService.getData("notification/getNotificationList/"+this.loggedInUser.id).subscribe(i=>{i&&i.row_count>0?(this.notificationData=i.data,this.totalElements=i.row_count):this.notificationData=[]})}filterArrayData(i){let t=[];return t.result=!1,this.notificationId.filter((e,o)=>{e==i&&(t.result=!0,t.index=o)}),t}onDeleteDataSelect(i){let t=this.filterArrayData(i);t.result?this.notificationId.splice(t.index,1):this.notificationId.push(i)}onDelete(){if(0!=this.notificationId.length){this.globalService.presentLoading();let i=new FormData;i.append("id",JSON.stringify(this.notificationId)),this.globalService.postData("notification/deleteNotificationByNotificationID",i).subscribe(i=>{i&&i.status&&this.onNotificationLoad(),this.globalService.presentToast(i.message),this.globalService.dismissLoading()})}}onNotificationDetaliPage(i,t,e,o){e==this.globalService.formType_user?this.nav.navigateRoot("/home/safety-menu/incident-details/"+t):e==this.globalService.formType_investigator&&this.nav.navigateForward("investigation-view/"+t),0==o&&this.globalService.getData("notification/changeNotificationSeen/"+i).subscribe(i=>{i.status&&(this.sharedService.notViewNotiCount=0!=this.sharedService.notViewNotiCount?this.sharedService.notViewNotiCount-1:0)})}}return i.\u0275fac=function(t){return new(t||i)(r.Y36(s.SH),r.Y36(l.U),r.Y36(f.F))},i.\u0275cmp=r.Xpm({type:i,selectors:[["app-notification"]],decls:5,vars:3,consts:[[3,"pageName"],[1,"container"],[4,"ngIf"],[4,"ngFor","ngForOf"],["size","10"],["size","2"],["name","trash",3,"click"],["size-lg","2","size-md","2","size-sm","2","size-xl","2","size-xs","2"],["size-lg","1","size-md","1","size-sm","2","size-xl","2","size-xs","2"],[3,"ionChange"],["size-lg","7","size-md","7","size-sm","6","size-xl","6","size-xs","6",3,"click"]],template:function(i,t){1&i&&(r.TgZ(0,"ion-content"),r._UZ(1,"app-header",0),r.TgZ(2,"div",1),r.YNc(3,h,4,0,"ion-row",2),r.YNc(4,u,7,1,"ion-row",3),r.qZA(),r.qZA()),2&i&&(r.xp6(1),r.Q6J("pageName",t.pName),r.xp6(2),r.Q6J("ngIf",t.notificationData.length>0),r.xp6(1),r.Q6J("ngForOf",t.notificationData))},directives:[s.W2,g.G,o.O5,o.sg,s.Nd,s.wI,s.gu,s.nz,s.w],styles:[""]}),i})()}];let p=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=r.oAB({type:i}),i.\u0275inj=r.cJS({imports:[[a.Bz.forChild(d)],a.Bz]}),i})();var m=e(69270);let N=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=r.oAB({type:i}),i.\u0275inj=r.cJS({imports:[[o.ez,n.u5,s.Pc,p,m.I]]}),i})()}}]);