!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(self.webpackChunkhub=self.webpackChunkhub||[]).push([[3727],{73727:function(n,i,o){"use strict";o.r(i),o.d(i,{IncidentFormListPageModule:function(){return E}});var a=o(38583),r=o(90665),l=o(47823),s=o(10649),c=o(64762),m=o(10639),u=o(16738),g=o.n(u),d=o(89985),f=o(80513),p=o(49481),Z=o(68366),h=o(85291),v=o(72533);function b(e,t){if(1&e&&(m.TgZ(0,"b",9),m.TgZ(1,"ion-text",16),m._uU(2),m.qZA(),m.qZA()),2&e){var n=m.oxw().$implicit;m.xp6(2),m.Oqu(n.Status)}}function x(e,t){if(1&e&&(m.TgZ(0,"b",9),m.TgZ(1,"ion-text",17),m._uU(2),m.qZA(),m.qZA()),2&e){var n=m.oxw().$implicit;m.xp6(2),m.Oqu(n.Status)}}function q(e,t){if(1&e&&(m.TgZ(0,"b",9),m.TgZ(1,"ion-text",18),m._uU(2),m.qZA(),m.qZA()),2&e){var n=m.oxw().$implicit;m.xp6(2),m.Oqu(n.Status)}}function T(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"ion-card"),m.TgZ(1,"ion-item-sliding"),m.TgZ(2,"ion-item",6),m.TgZ(3,"ion-label"),m.TgZ(4,"ion-row"),m.TgZ(5,"ion-col",7),m.TgZ(6,"h2"),m._uU(7,"Form :"),m.qZA(),m.qZA(),m.TgZ(8,"ion-col"),m.TgZ(9,"ion-text",8),m.TgZ(10,"b"),m._uU(11),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(12,"ion-row"),m.TgZ(13,"ion-col",7),m.TgZ(14,"ion-label"),m._uU(15,"Date :"),m.qZA(),m.qZA(),m.TgZ(16,"ion-col"),m.TgZ(17,"p",9),m._uU(18),m.qZA(),m.qZA(),m.qZA(),m.TgZ(19,"ion-row"),m.TgZ(20,"ion-col",7),m.TgZ(21,"ion-label"),m._uU(22,"Name :"),m.qZA(),m.qZA(),m.TgZ(23,"ion-col"),m.TgZ(24,"p",9),m._uU(25),m.qZA(),m.qZA(),m.qZA(),m.TgZ(26,"ion-row"),m.TgZ(27,"ion-col",7),m.TgZ(28,"ion-label"),m._uU(29,"Delegated :"),m.qZA(),m.qZA(),m.TgZ(30,"ion-col"),m.TgZ(31,"p",9),m._uU(32),m.qZA(),m.qZA(),m.qZA(),m.TgZ(33,"ion-row"),m.TgZ(34,"ion-col",7),m.TgZ(35,"ion-label"),m._uU(36,"Status :"),m.qZA(),m.qZA(),m.TgZ(37,"ion-col"),m.YNc(38,b,3,1,"b",10),m.YNc(39,x,3,1,"b",10),m.YNc(40,q,3,1,"b",10),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(41,"ion-item-options",11),m.TgZ(42,"ion-item-option",12),m.NdJ("click",function(){var e=m.CHM(n).$implicit;return m.oxw(2).onGoToDetails(e)}),m._UZ(43,"ion-icon",13),m.qZA(),m.TgZ(44,"ion-item-option",14),m.NdJ("click",function(){var e=m.CHM(n).$implicit;return m.oxw(2).onGoToEdit(e)}),m._UZ(45,"ion-icon",15),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&e){var i=t.$implicit;m.xp6(11),m.Oqu(i.Form),m.xp6(7),m.hij(" ",i.Date," "),m.xp6(7),m.hij(" ",i.Name,""),m.xp6(7),m.hij(" ",i.Delegate,""),m.xp6(6),m.Q6J("ngIf","Completed"==i.Status),m.xp6(1),m.Q6J("ngIf","In progress"==i.Status),m.xp6(1),m.Q6J("ngIf","Cancel"==i.Status)}}function w(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"div",20),m.TgZ(1,"a",21),m.NdJ("click",function(){m.CHM(n);var e=m.oxw(3);return e.loadData("newList",e.pageNumber,"mobile")}),m._uU(2,"Load More "),m.qZA(),m.qZA()}}function A(e,t){if(1&e&&(m.TgZ(0,"span"),m.YNc(1,w,3,0,"div",19),m.qZA()),2&e){var n=m.oxw(2);m.xp6(1),m.Q6J("ngIf",n.allSubmittedFormlist.length>0)}}function _(e,t){if(1&e&&(m.TgZ(0,"ion-list"),m.YNc(1,T,46,7,"ion-card",5),m.YNc(2,A,2,1,"span",3),m.qZA()),2&e){var n=m.oxw();m.xp6(1),m.Q6J("ngForOf",n.allSubmittedFormlist),m.xp6(1),m.Q6J("ngIf",n.totalElements!=(n.pageNumber-1)*(n.size+1))}}function N(e,t){if(1&e&&m._uU(0),2&e){var n=t.rowIndex,i=m.oxw(2);m.hij("",(i.pageNumber-1)*i.size+n+1," ")}}function F(e,t){if(1&e&&(m.TgZ(0,"ion-text",8),m._uU(1),m.qZA()),2&e){var n=t.value;m.xp6(1),m.Oqu(n)}}function I(e,t){if(1&e&&(m.TgZ(0,"ion-text",16),m._uU(1),m.qZA()),2&e){var n=m.oxw().value;m.xp6(1),m.Oqu(n)}}function S(e,t){if(1&e&&(m.TgZ(0,"ion-text",17),m._uU(1),m.qZA()),2&e){var n=m.oxw().value;m.xp6(1),m.Oqu(n)}}function J(e,t){if(1&e&&(m.TgZ(0,"ion-text",18),m._uU(1),m.qZA()),2&e){var n=m.oxw().value;m.xp6(1),m.Oqu(n)}}function y(e,t){if(1&e&&(m.YNc(0,I,2,1,"ion-text",34),m.YNc(1,S,2,1,"ion-text",35),m.YNc(2,J,2,1,"ion-text",36)),2&e){var n=t.value;m.Q6J("ngIf","Completed"==n),m.xp6(1),m.Q6J("ngIf","In progress"==n),m.xp6(1),m.Q6J("ngIf","Cancel"==n)}}function z(e,t){1&e&&m._uU(0,"View")}function U(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"span",37),m.NdJ("click",function(){var e=m.CHM(n).row;return m.oxw(2).onGoToDetails(e)}),m._UZ(1,"ion-icon",38),m.qZA()}}function D(e,t){1&e&&m._uU(0,"Edit")}function Y(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"span",39),m.NdJ("click",function(){var e=m.CHM(n).row;return m.oxw(2).onGoToEdit(e)}),m._UZ(1,"ion-icon",40),m.qZA()}}function C(e,t){if(1&e){var n=m.EpF();m.TgZ(0,"ngx-datatable",22),m.NdJ("page",function(e){return m.CHM(n),m.oxw().loadData(e,"","web")}),m.TgZ(1,"ngx-datatable-column",23),m.YNc(2,N,1,1,"ng-template",24),m.qZA(),m.TgZ(3,"ngx-datatable-column",25),m.YNc(4,F,2,1,"ng-template",24),m.qZA(),m._UZ(5,"ngx-datatable-column",26),m._UZ(6,"ngx-datatable-column",27),m._UZ(7,"ngx-datatable-column",28),m.TgZ(8,"ngx-datatable-column",29),m.YNc(9,y,3,3,"ng-template",24),m.qZA(),m.TgZ(10,"ngx-datatable-column",30),m.YNc(11,z,1,0,"ng-template",31),m.YNc(12,U,2,0,"ng-template",24),m.qZA(),m.TgZ(13,"ngx-datatable-column",30),m.YNc(14,D,1,0,"ng-template",31),m.YNc(15,Y,2,0,"ng-template",24),m.qZA(),m.TgZ(16,"div",32),m.TgZ(17,"pagination-controls",33),m.NdJ("pageChange",function(e){return m.CHM(n),m.oxw().loadData(e,"","web")}),m.qZA(),m.qZA(),m.qZA()}if(2&e){var i=m.oxw();m.Q6J("rows",i.allSubmittedFormlist)("columnMode","force")("headerHeight",50)("footerHeight",50)("externalPaging",!0)("count",i.totalElements)("offset",i.offset)("limit",i.size),m.xp6(1),m.Q6J("minWidth",5)("resizeable",!0),m.xp6(2),m.Q6J("minWidth",100)("resizeable",!0),m.xp6(2),m.Q6J("minWidth",50)("resizeable",!0),m.xp6(1),m.Q6J("minWidth",50)("resizeable",!0),m.xp6(1),m.Q6J("minWidth",50)("resizeable",!0),m.xp6(1),m.Q6J("minWidth",50)("resizeable",!0),m.xp6(2),m.Q6J("minWidth",20)("resizeable",!0),m.xp6(3),m.Q6J("minWidth",20)("resizeable",!0)}}var k=function(){function n(t,i,o,a){e(this,n),this.nav=t,this.global=i,this.loadingService=o,this.sharedService=a,this.pName="Submitted Forms",this.allSubmittedFormlist=[],this.newList=[],this.listOfUsers=[],this.size=10,this.totalElements=0,this.pageNumber=0,this.offset=0}var i,o,a;return i=n,(o=[{key:"ngOnInit",value:function(){this.onResize(window),this.setValueOnLoadData()}},{key:"onResize",value:function(e){this.getScreenWidth=this.sharedService.resize(e)}},{key:"setValueOnLoadData",value:function(){var e=this.getScreenWidth<1080?"mobile":"web";"mobile"==e?this.loadData("",1,e):this.loadData({count:60,limit:10,offset:0,pageSize:10},"",e)}},{key:"loadData",value:function(e,t,n){var i=this;"mobile"==n&&(this.pageNumber="newList"==e?++t:t),"web"==n&&(this.pageNumber=e.offset+1,this.offset=e.offset),0!=this.pageNumber&&this.global.getData("add_form/get/?page_no="+this.pageNumber).subscribe(function(e){e&&e.data&&e.data.mforms_add_form&&e.data.mforms_add_form.length>0&&(e.data.mforms_add_form.sort(function(e,t){var n=new Date(e.Date),i=new Date(t.Date);return n>i?-1:n<i?1:0}),e.data.mforms_add_form.forEach(function(e){"mforms_add_form"==e.Form?e.Form="Incident":"mforms_telehandler"==e.Form?e.Form="Telehandler Prestarts":"mforms_crane"==e.Form?e.Form="Crane Prestarts":"mforms_prestart_vehicle_hoist"==e.Form&&(e.Form="Vehicle Hoist Prestarts"),e.Date=g()(e.Date).format("DD-MM-YYYY hh:mm"),e.Status=0==e.Status?"In progress":1==e.Status?"Completed":2==e.Status?"Cancel":""}),i.totalElements=e.row_count,"mobile"==n&&(0==i.allSubmittedFormlist.length?i.allSubmittedFormlist=e.data.mforms_add_form:(i.newList=i.allSubmittedFormlist,i.allSubmittedFormlist=i.newList.concat(e.data.mforms_add_form))),"web"==n&&(i.allSubmittedFormlist=e.data.mforms_add_form))},function(e){console.log(e)})}},{key:"onGoToEdit",value:function(e){e&&"Incident"==e.Form?this.nav.navigateRoot("/home/safety-menu/incident-form-edit/"+e.Id):e&&"Telehandler Prestarts"==e.Form?this.nav.navigateRoot("/home/safety-menu/telehandler-add-form/"+e.Id):e&&"Crane Prestarts"==e.Form?this.nav.navigateRoot("/home/safety-menu/crane-add-form/"+e.Id):e&&"Vehicle Hoist Prestarts"==e.Form&&this.nav.navigateRoot("/home/safety-menu/vehicle-hoist-add-form/"+e.Id)}},{key:"onGoToDetails",value:function(e){e&&"Incident"==e.Form?this.nav.navigateRoot("/home/safety-menu/incident-details/"+e.Id):e&&"Telehandler Prestarts"==e.Form?this.nav.navigateRoot("/home/safety-menu/telehandler-view-detail/"+e.Id):e&&"Crane Prestarts"==e.Form?this.nav.navigateRoot("/home/safety-menu/crane-view-detail/"+e.Id):e&&"Vehicle Hoist Prestarts"==e.Form&&this.nav.navigateRoot("/home/safety-menu/vehicle-host-view-detail/"+e.Id)}}])&&t(i.prototype,o),a&&t(i,a),n}();k.\u0275fac=function(e){return new(e||k)(m.Y36(l.SH),m.Y36(d.U),m.Y36(f.b),m.Y36(p.F))},k.\u0275cmp=m.Xpm({type:k,selectors:[["app-incident-form-list"]],decls:5,vars:3,consts:[[3,"resize"],[3,"pageName"],[1,"container"],[4,"ngIf"],["class","material","rowHeight","auto",3,"rows","columnMode","headerHeight","footerHeight","externalPaging","count","offset","limit","page",4,"ngIf"],[4,"ngFor","ngForOf"],["lines","none"],["size","auto"],["color","primary"],[1,"value"],["class","value",4,"ngIf"],["side","end"],["title","View",1,"item-option",3,"click"],["slot","icon-only","name","eye-outline",2,"pointer-events","none"],["title","Edit",1,"item-option",3,"click"],["slot","icon-only","name","create-outline",2,"pointer-events","none"],["color","success"],["color","warning"],["color","danger"],["class","ion-margin-top ion-text-center",4,"ngIf"],[1,"ion-margin-top","ion-text-center"],["href","javascript:void(0)",3,"click"],["rowHeight","auto",1,"material",3,"rows","columnMode","headerHeight","footerHeight","externalPaging","count","offset","limit","page"],["name","Sr.No",3,"minWidth","resizeable"],["ngx-datatable-cell-template",""],["name","Form","prop","Form",3,"minWidth","resizeable"],["name","Date","prop","Date",3,"minWidth","resizeable"],["name","Name","prop","Name",3,"minWidth","resizeable"],["name","Delegated","prop","Delegate",3,"minWidth","resizeable"],["name","Status","prop","Status",3,"minWidth","resizeable"],["prop","Id",3,"minWidth","resizeable"],["ngx-datatable-header-template",""],[1,"d-flex","justify-content-center"],["previousLabel","Prev","nextLabel","Next",3,"pageChange"],["color","success",4,"ngIf"],["color","warning",4,"ngIf"],["color","danger",4,"ngIf"],["title","View",3,"click"],["slot","icon-only","name","eye-outline",1,"view",2,"pointer-events","none"],["title","Edit",3,"click"],["slot","icon-only","name","create-outline",1,"view",2,"pointer-events","none"]],template:function(e,t){1&e&&(m.TgZ(0,"ion-content",0),m.NdJ("resize",function(e){return t.onResize(e)},!1,m.Jf7),m._UZ(1,"app-header",1),m.TgZ(2,"div",2),m.YNc(3,_,3,2,"ion-list",3),m.YNc(4,C,18,24,"ngx-datatable",4),m.qZA(),m.qZA()),2&e&&(m.xp6(1),m.Q6J("pageName",t.pName),m.xp6(2),m.Q6J("ngIf",t.getScreenWidth<768),m.xp6(1),m.Q6J("ngIf",t.getScreenWidth>=768))},directives:[l.W2,Z.G,a.O5,l.q_,a.sg,l.PM,l.td,l.Ie,l.Q$,l.Nd,l.wI,l.yW,l.IK,l.u8,l.gu,h.nE,h.UC,h.vq,h.tk,v.LS],styles:[".icon-disabled[_ngcontent-%COMP%]{color:grey}.item-option[_ngcontent-%COMP%]{background:#fff;color:#1c6afe!important;font-size:10px}"]});var Q,W=[{path:"",component:k=(0,c.gn)([(0,m.L6J)("window:resize",["$event"])],k)}],H=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[s.Bz.forChild(W)],s.Bz]}),t}(),P=o(69270),E=((Q=function t(){e(this,t)}).\u0275fac=function(e){return new(e||Q)},Q.\u0275mod=m.oAB({type:Q}),Q.\u0275inj=m.cJS({imports:[[a.ez,r.u5,l.Pc,H,h.xD,v.JX,P.I]]}),Q)}}])}();