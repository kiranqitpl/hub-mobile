!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var i=0;i<n.length;i++){var t=n[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function i(e,i,t){return i&&n(e.prototype,i),t&&n(e,t),e}(self.webpackChunkhub=self.webpackChunkhub||[]).push([[8657],{98657:function(n,t,o){"use strict";o.r(t),o.d(t,{ActionsPageModule:function(){return A}});var r=o(38583),a=o(90665),s=o(47823),c=o(10649),l=o(16738),d=o.n(l),u=o(10639),g=o(89985),p=o(64762),f=function(){var n=function(){function n(i){e(this,n),this.loadingController=i}return i(n,[{key:"presentLoading",value:function(){return(0,p.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create({cssClass:"my-custom-class",message:"Please wait..."});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}},e,this)}))}},{key:"dismissLoading",value:function(){return(0,p.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.dismiss();case 2:case"end":return e.stop()}},e,this)}))}}]),n}();return n.\u0275fac=function(e){return new(e||n)(u.LFG(s.HT))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n}();function h(e,n){if(1&e&&(u.TgZ(0,"ion-select-option",15),u.TgZ(1,"p"),u._uU(2),u.qZA(),u.qZA()),2&e){var i=n.$implicit;u.s9C("value",null==i?null:i.employee_id),u.xp6(2),u.Oqu(null==i?null:i.full_name)}}function m(e,n){if(1&e){var i=u.EpF();u.TgZ(0,"ion-button",16),u.NdJ("click",function(){return u.CHM(i),u.oxw().onSubmit()}),u._uU(1," SUBMIT "),u.qZA()}}function _(e,n){if(1&e){var i=u.EpF();u.TgZ(0,"ion-button",16),u.NdJ("click",function(){return u.CHM(i),u.oxw().onSubmit()}),u._uU(1," UPDATE "),u.qZA()}}var v,Z,b=[{path:"",component:(v=function(){function n(i,t,o){e(this,n),this.nav=i,this.global=t,this.loadingService=o,this.pName="Actions",this.data=[],this.description_of_required_action="",this.priority="",this.expected_completion="",this.loggedInUser=""}return i(n,[{key:"ngOnInit",value:function(){this.loggedInUser=JSON.parse(localStorage.getItem("userDetails"));var e=JSON.parse(localStorage.getItem("singleView"));this.incident_id=e.id,this.loadEmp()}},{key:"loadEmp",value:function(){var e=this;this.loadingService.presentLoading(),this.global.getData("user/getAllUser").subscribe(function(n){n&&n.data&&(e.data=n.data),e.loadingService.dismissLoading()},function(n){e.loadingService.dismissLoading(),console.log(n)})}},{key:"ionViewWillEnter",value:function(){var e=this,n=localStorage.getItem("isActionsForm");this.isFrom=n,"edit"==n&&(JSON.parse(localStorage.getItem("singleView")),this.global.getData("Investigator/getInvestigationAction/"+this.loggedInUser.id).subscribe(function(n){var i;n&&(null===(i=null==n?void 0:n.data)||void 0===i||i.forEach(function(n){n.incident_id==e.incident_id&&(e.description_of_required_action=n.description_of_required_action,e.user_name=n.user_id,e.priority=n.priority,e.expected_completion=n.expected_completion,e.id=n.id)}))},function(e){console.log("res",e)}))}},{key:"goBack",value:function(){this.nav.back()}},{key:"selectUser",value:function(e){var n=this;this.data.forEach(function(i){i.employee_id==e.detail.value&&(n.user_id=i.full_name)})}},{key:"dateSelect",value:function(e){this.expected_completion=d()(e.detail.value).format("YYYY-MM-DD")}},{key:"onSubmit",value:function(){var e=this,n=JSON.parse(localStorage.getItem("userDetails"));if(""==this.description_of_required_action)this.global.presentToast("Please enter description of required action");else if(""==this.user_name)this.global.presentToast("Please Select User");else if(""==this.priority)this.global.presentToast("Please select the priority");else if(""==this.expected_completion)this.global.presentToast("Please enter expected completion");else{this.global.presentLoading();var i=new FormData;"edit"==this.isFrom&&i.append("id",this.id),i.append("incident_id",this.incident_id),i.append("user_id",this.user_name),i.append("user_name",this.user_id),i.append("priority",this.priority),i.append("expected_completion",this.expected_completion),i.append("description_of_required_action",this.description_of_required_action),i.append("investigator_id",n.id),this.global.postData("Investigator/InvestigationAction",i).subscribe(function(n){n.status?(e.global.presentToast(n.message),e.global.dismissLoading(),e.nav.back()):e.global.dismissLoading()},function(n){console.log(n),e.global.dismissLoading()})}}}]),n}(),v.\u0275fac=function(e){return new(e||v)(u.Y36(s.SH),u.Y36(g.U),u.Y36(f))},v.\u0275cmp=u.Xpm({type:v,selectors:[["app-actions"]],decls:33,vars:7,consts:[[1,"container"],[1,"ion-padding-start","ion-padding-end"],[1,"question"],["placeholder","Enter here",3,"ngModel","ngModelChange"],["lines","none",1,"ra","ion-no-margin","ion-no-padding"],["placeholder","Select One","interface","action-sheet",3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[1,"ion-no-padding"],["size","4",1,"ion-no-padding"],["lines","none",1,"ra"],["slot","start","value","Minor"],["slot","start","value","Major"],["displayFormat","DD/MM/YYYY","placeholder","Select date",3,"ngModel","ionChange","ngModelChange"],["class","btn","type","submit",3,"click",4,"ngIf"],[3,"value"],["type","submit",1,"btn",3,"click"]],template:function(e,n){1&e&&(u.TgZ(0,"ion-content"),u.TgZ(1,"div",0),u.TgZ(2,"ion-card"),u.TgZ(3,"ion-card-content"),u.TgZ(4,"div",1),u.TgZ(5,"p",2),u._uU(6," Description of Required Action "),u.qZA(),u.TgZ(7,"ion-input",3),u.NdJ("ngModelChange",function(e){return n.description_of_required_action=e}),u.qZA(),u.TgZ(8,"p",2),u._uU(9,"Allocated to"),u.qZA(),u.TgZ(10,"ion-item",4),u.TgZ(11,"ion-select",5),u.NdJ("ngModelChange",function(e){return n.user_name=e})("ionChange",function(e){return n.selectUser(e)}),u.YNc(12,h,3,2,"ion-select-option",6),u.qZA(),u.qZA(),u.TgZ(13,"p",2),u._uU(14,"Priority"),u.qZA(),u.TgZ(15,"ion-radio-group",7),u.NdJ("ngModelChange",function(e){return n.priority=e}),u.TgZ(16,"ion-row",8),u.TgZ(17,"ion-col",9),u.TgZ(18,"ion-item",10),u.TgZ(19,"ion-label"),u._uU(20,"Minor"),u.qZA(),u._UZ(21,"ion-radio",11),u.qZA(),u.qZA(),u.TgZ(22,"ion-col",9),u.TgZ(23,"ion-item",10),u.TgZ(24,"ion-label"),u._uU(25,"Major"),u.qZA(),u._UZ(26,"ion-radio",12),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(27,"p",2),u._uU(28,"Expected completion"),u.qZA(),u.TgZ(29,"ion-item",10),u.TgZ(30,"ion-datetime",13),u.NdJ("ionChange",function(e){return n.dateSelect(e)})("ngModelChange",function(e){return n.expected_completion=e}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(31,m,2,0,"ion-button",14),u.YNc(32,_,2,0,"ion-button",14),u.qZA(),u.qZA()),2&e&&(u.xp6(7),u.Q6J("ngModel",n.description_of_required_action),u.xp6(4),u.Q6J("ngModel",n.user_name),u.xp6(1),u.Q6J("ngForOf",n.data),u.xp6(3),u.Q6J("ngModel",n.priority),u.xp6(15),u.Q6J("ngModel",n.expected_completion),u.xp6(1),u.Q6J("ngIf","add"==n.isFrom),u.xp6(1),u.Q6J("ngIf","edit"==n.isFrom))},directives:[s.W2,s.PM,s.FN,s.pK,s.j9,a.JJ,a.On,s.Ie,s.t9,s.QI,r.sg,s.se,s.Nd,s.wI,s.Q$,s.B7,s.U5,s.x4,r.O5,s.n0,s.YG],styles:[""]}),v)}],q=function(){var n=function n(){e(this,n)};return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[c.Bz.forChild(b)],c.Bz]}),n}(),A=((Z=function n(){e(this,n)}).\u0275fac=function(e){return new(e||Z)},Z.\u0275mod=u.oAB({type:Z}),Z.\u0275inj=u.cJS({imports:[[r.ez,a.u5,s.Pc,q]]}),Z)}}])}();