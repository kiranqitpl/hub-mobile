!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}(self.webpackChunkhub=self.webpackChunkhub||[]).push([[7267],{87267:function(t,n,o){"use strict";o.r(n),o.d(n,{NotificationPageModule:function(){return w}});var a=o(38583),r=o(90665),s=o(47823),c=o(10649),u=o(92340),l=o(10639),f=o(89985),h=o(49481),g=o(68366);function m(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"ion-row"),l._UZ(1,"ion-col",4),l.TgZ(2,"ion-col",5),l.TgZ(3,"ion-icon",6),l.NdJ("click",function(){return l.CHM(i),l.oxw().onDelete()}),l.qZA(),l.qZA(),l.qZA()}}function d(e,t){if(1&e){var i=l.EpF();l.TgZ(0,"ion-row"),l._UZ(1,"ion-col",7),l.TgZ(2,"ion-col",8),l.TgZ(3,"ion-checkbox",9),l.NdJ("ionChange",function(){var e=l.CHM(i).$implicit;return l.oxw().onDeleteDataSelect(e.id)}),l.qZA(),l.qZA(),l.TgZ(4,"ion-col",10),l.NdJ("click",function(){var e=l.CHM(i).$implicit;return l.oxw().onNotificationDetaliPage(e.id,e.form_id,e.form_type,e.is_seen)}),l._uU(5),l.qZA(),l._UZ(6,"ion-col",7),l.qZA()}if(2&e){var n=t.$implicit;l.xp6(5),l.hij(" ",n.message," ")}}var p,v,y=[{path:"",component:(p=function(){function t(i,n,o){e(this,t),this.nav=i,this.globalService=n,this.sharedService=o,this.pName="Notifications",this.type=u.N.allType,this.notificationId=[],this.notificationData="",this.loggedInUser="",this.size=10,this.totalElements=0,this.pageNumber=0,this.offset=0}return i(t,[{key:"ngOnInit",value:function(){this.loggedInUser=JSON.parse(localStorage.getItem("userDetails")),this.onNotificationLoad()}},{key:"onNotificationLoad",value:function(){var e=this;this.globalService.presentLoading(),this.globalService.getData("notification/getNotificationList/"+this.loggedInUser.id).subscribe(function(t){console.log("result",t),t&&t.row_count>0?(e.notificationData=t.data,e.totalElements=t.row_count):e.notificationData=[],console.log("this.notificationData ",e.notificationData),e.globalService.dismissLoading()})}},{key:"filterArrayData",value:function(e){var t=[];return t.result=!1,this.notificationId.filter(function(i,n){i==e&&(t.result=!0,t.index=n)}),t}},{key:"onDeleteDataSelect",value:function(e){var t=this.filterArrayData(e);t.result?this.notificationId.splice(t.index,1):this.notificationId.push(e)}},{key:"onDelete",value:function(){var e=this;if(0!=this.notificationId.length){this.globalService.presentLoading();var t=new FormData;t.append("id",JSON.stringify(this.notificationId)),this.globalService.postData("notification/deleteNotificationByNotificationID",t).subscribe(function(t){t&&t.status&&e.onNotificationLoad(),e.globalService.presentToast(t.message),e.globalService.dismissLoading()})}}},{key:"onNotificationDetaliPage",value:function(e,t,i,n){var o=this;i==this.globalService.formType_user?this.nav.navigateRoot("/home/safety-menu/incident-details/"+t):i==this.globalService.formType_investigator&&this.nav.navigateForward("investigation-view/"+t),0==n&&this.globalService.getData("notification/changeNotificationSeen/"+e).subscribe(function(e){e.status&&(o.sharedService.notViewNotiCount=0!=o.sharedService.notViewNotiCount?o.sharedService.notViewNotiCount-1:0)})}}]),t}(),p.\u0275fac=function(e){return new(e||p)(l.Y36(s.SH),l.Y36(f.U),l.Y36(h.F))},p.\u0275cmp=l.Xpm({type:p,selectors:[["app-notification"]],decls:5,vars:3,consts:[[3,"pageName"],[1,"container"],[4,"ngIf"],[4,"ngFor","ngForOf"],["size","10"],["size","2"],["name","trash",3,"click"],["size-lg","2","size-md","2","size-sm","2","size-xl","2","size-xs","2"],["size-lg","1","size-md","1","size-sm","2","size-xl","2","size-xs","2"],[3,"ionChange"],["size-lg","7","size-md","7","size-sm","6","size-xl","6","size-xs","6",3,"click"]],template:function(e,t){1&e&&(l.TgZ(0,"ion-content"),l._UZ(1,"app-header",0),l.TgZ(2,"div",1),l.YNc(3,m,4,0,"ion-row",2),l.YNc(4,d,7,1,"ion-row",3),l.qZA(),l.qZA()),2&e&&(l.xp6(1),l.Q6J("pageName",t.pName),l.xp6(2),l.Q6J("ngIf",t.notificationData.length>0),l.xp6(1),l.Q6J("ngForOf",t.notificationData))},directives:[s.W2,g.G,a.O5,a.sg,s.Nd,s.wI,s.gu,s.nz,s.w],styles:[""]}),p)}],N=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[c.Bz.forChild(y)],c.Bz]}),t}(),b=o(69270),w=((v=function t(){e(this,t)}).\u0275fac=function(e){return new(e||v)},v.\u0275mod=l.oAB({type:v}),v.\u0275inj=l.cJS({imports:[[a.ez,r.u5,s.Pc,N,b.I]]}),v)},49481:function(t,n,o){"use strict";o.d(n,{F:function(){return l}});var a=o(64762),r=o(10639),s=o(89985),c=o(47823),u=o(84267),l=function(){var t=function(){function t(i,n,o){e(this,t),this.globalService=i,this.actionSheetController=n,this.camera=o,this.notViewNotiCount=0,this.prestartMenu=[{menuName:"LV",route:"#",favorite:!1,position_in_list:1},{menuName:"Forklift",route:"#",favorite:!1,position_in_list:2},{menuName:"Telehandler",route:"/home/safety-menu/telehandler-add-form",favorite:!1,position_in_list:3},{menuName:"Crane",route:"/home/safety-menu/crane-add-form",favorite:!1,position_in_list:4},{menuName:"Vehicle Hoist",route:"/home/safety-menu/vehicle-hoist-add-form",favorite:!1,position_in_list:5}]}return i(t,[{key:"getBase64",value:function(e){return new Promise(function(t,i){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return i(e)}})}},{key:"mobileUploadImages",value:function(){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actionSheetController.create({header:"Select Image source",buttons:[{text:"Load from Library",handler:function(){return i.pickImage(i.camera.PictureSourceType.PHOTOLIBRARY)}},{text:"Use Camera",handler:function(){return i.pickImage(i.camera.PictureSourceType.CAMERA)}},{text:"Cancel",role:"cancel"}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}},e,this)}))}},{key:"pickImage",value:function(e){return(0,a.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={quality:100,sourceType:e,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE},t.next=3,this.camera.getPicture(i).then(function(e){console.log("imageData",e);var t="data:image/jpeg;base64,"+e;return console.log("pickImage",t),t},function(e){console.log("errOf Image ",e)});case 3:case"end":return t.stop()}},t,this)}))}},{key:"resize",value:function(e){return e.innerWidth?e.innerWidth:e.target.innerWidth}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.LFG(s.U),r.LFG(c.BX),r.LFG(u.V1))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();