!function(){function e(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function i(e,i){for(var n=0;n<i.length;n++){var t=i[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}(self.webpackChunkhub=self.webpackChunkhub||[]).push([[2331],{52331:function(n,t,o){"use strict";o.r(t),o.d(t,{ActionsPageModule:function(){return A}});var a=o(38583),s=o(90665),r=o(47823),l=o(10649),c=o(16738),d=o.n(c),g=o(10639),u=o(89985),p=o(80513);function f(e,i){if(1&e&&(g.TgZ(0,"ion-select-option",15),g.TgZ(1,"p"),g._uU(2),g.qZA(),g.qZA()),2&e){var n=i.$implicit;g.s9C("value",null==n?null:n.employee_id),g.xp6(2),g.Oqu(null==n?null:n.full_name)}}function h(e,i){if(1&e){var n=g.EpF();g.TgZ(0,"ion-button",16),g.NdJ("click",function(){return g.CHM(n),g.oxw().onSubmit()}),g._uU(1," SUBMIT "),g.qZA()}}function _(e,i){if(1&e){var n=g.EpF();g.TgZ(0,"ion-button",16),g.NdJ("click",function(){return g.CHM(n),g.oxw().onSubmit()}),g._uU(1," UPDATE "),g.qZA()}}var m,Z,v=[{path:"",component:(m=function(){function n(i,t,o){e(this,n),this.nav=i,this.global=t,this.loadingService=o,this.pName="Actions",this.data=[],this.description_of_required_action="",this.priority="",this.expected_completion="",this.loggedInUser=""}var t,o,a;return t=n,(o=[{key:"ngOnInit",value:function(){this.loggedInUser=JSON.parse(localStorage.getItem("userDetails"));var e=JSON.parse(localStorage.getItem("singleView"));this.incident_id=e.id,this.loadEmp()}},{key:"loadEmp",value:function(){var e=this;this.loadingService.presentLoading(),this.global.getData("user/getAllUser").subscribe(function(i){i&&i.data&&(e.data=i.data),e.loadingService.dismissLoading(),console.log("this.data ",e.data)},function(i){e.loadingService.dismissLoading(),console.log(i)})}},{key:"ionViewWillEnter",value:function(){var e=this,i=localStorage.getItem("isActionsForm");this.isFrom=i,"edit"==i&&(JSON.parse(localStorage.getItem("singleView")),console.log("  this.incident_id ",this.incident_id),this.global.getData("Investigator/getInvestigationAction/"+this.loggedInUser.id).subscribe(function(i){var n;console.log("getInvestigationAction 1",i),i&&(null===(n=null==i?void 0:i.data)||void 0===n||n.forEach(function(i){console.log("getInvestigationAction 2",i),i.incident_id==e.incident_id&&(console.log("here"),e.description_of_required_action=i.description_of_required_action,e.user_name=i.user_id,e.priority=i.priority,e.expected_completion=i.expected_completion,e.id=i.id,console.log(" this.id ",e.id))}))},function(e){console.log("res",e)}))}},{key:"goBack",value:function(){this.nav.back()}},{key:"selectUser",value:function(e){var i=this;this.data.forEach(function(n){n.employee_id==e.detail.value&&(i.user_id=n.full_name)})}},{key:"dateSelect",value:function(e){this.expected_completion=d()(e.detail.value).format("YYYY-MM-DD")}},{key:"onSubmit",value:function(){var e=this,i=JSON.parse(localStorage.getItem("userDetails"));if(""==this.description_of_required_action)this.global.presentToast("Please enter description of required action");else if(""==this.user_name)this.global.presentToast("Please Select User");else if(""==this.priority)this.global.presentToast("Please select the priority");else if(""==this.expected_completion)this.global.presentToast("Please enter expected completion");else{this.global.presentLoading();var n=new FormData;"edit"==this.isFrom&&n.append("id",this.id),n.append("incident_id",this.incident_id),n.append("user_id",this.user_name),n.append("user_name",this.user_id),n.append("priority",this.priority),n.append("expected_completion",this.expected_completion),n.append("description_of_required_action",this.description_of_required_action),n.append("investigator_id",i.id),this.global.postData("Investigator/InvestigationAction",n).subscribe(function(i){i.status?(e.global.presentToast(i.message),e.global.dismissLoading(),e.nav.back()):e.global.dismissLoading()},function(i){console.log(i),e.global.dismissLoading()})}}}])&&i(t.prototype,o),a&&i(t,a),n}(),m.\u0275fac=function(e){return new(e||m)(g.Y36(r.SH),g.Y36(u.U),g.Y36(p.b))},m.\u0275cmp=g.Xpm({type:m,selectors:[["app-actions"]],decls:33,vars:7,consts:[[1,"container"],[1,"ion-padding-start","ion-padding-end"],[1,"question"],["placeholder","Enter here",3,"ngModel","ngModelChange"],["lines","none",1,"ra","ion-no-margin","ion-no-padding"],["placeholder","Select One","interface","action-sheet",3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[1,"ion-no-padding"],["size","4",1,"ion-no-padding"],["lines","none",1,"ra"],["slot","start","value","Minor"],["slot","start","value","Major"],["displayFormat","DD/MM/YYYY","placeholder","Select date",3,"ngModel","ionChange","ngModelChange"],["class","btn","type","submit",3,"click",4,"ngIf"],[3,"value"],["type","submit",1,"btn",3,"click"]],template:function(e,i){1&e&&(g.TgZ(0,"ion-content"),g.TgZ(1,"div",0),g.TgZ(2,"ion-card"),g.TgZ(3,"ion-card-content"),g.TgZ(4,"div",1),g.TgZ(5,"p",2),g._uU(6," Description of Required Action "),g.qZA(),g.TgZ(7,"ion-input",3),g.NdJ("ngModelChange",function(e){return i.description_of_required_action=e}),g.qZA(),g.TgZ(8,"p",2),g._uU(9,"Allocated to"),g.qZA(),g.TgZ(10,"ion-item",4),g.TgZ(11,"ion-select",5),g.NdJ("ngModelChange",function(e){return i.user_name=e})("ionChange",function(e){return i.selectUser(e)}),g.YNc(12,f,3,2,"ion-select-option",6),g.qZA(),g.qZA(),g.TgZ(13,"p",2),g._uU(14,"Priority"),g.qZA(),g.TgZ(15,"ion-radio-group",7),g.NdJ("ngModelChange",function(e){return i.priority=e}),g.TgZ(16,"ion-row",8),g.TgZ(17,"ion-col",9),g.TgZ(18,"ion-item",10),g.TgZ(19,"ion-label"),g._uU(20,"Minor"),g.qZA(),g._UZ(21,"ion-radio",11),g.qZA(),g.qZA(),g.TgZ(22,"ion-col",9),g.TgZ(23,"ion-item",10),g.TgZ(24,"ion-label"),g._uU(25,"Major"),g.qZA(),g._UZ(26,"ion-radio",12),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(27,"p",2),g._uU(28,"Expected completion"),g.qZA(),g.TgZ(29,"ion-item",10),g.TgZ(30,"ion-datetime",13),g.NdJ("ionChange",function(e){return i.dateSelect(e)})("ngModelChange",function(e){return i.expected_completion=e}),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.YNc(31,h,2,0,"ion-button",14),g.YNc(32,_,2,0,"ion-button",14),g.qZA(),g.qZA()),2&e&&(g.xp6(7),g.Q6J("ngModel",i.description_of_required_action),g.xp6(4),g.Q6J("ngModel",i.user_name),g.xp6(1),g.Q6J("ngForOf",i.data),g.xp6(3),g.Q6J("ngModel",i.priority),g.xp6(15),g.Q6J("ngModel",i.expected_completion),g.xp6(1),g.Q6J("ngIf","add"==i.isFrom),g.xp6(1),g.Q6J("ngIf","edit"==i.isFrom))},directives:[r.W2,r.PM,r.FN,r.pK,r.j9,s.JJ,s.On,r.Ie,r.t9,r.QI,a.sg,r.se,r.Nd,r.wI,r.Q$,r.B7,r.U5,r.x4,a.O5,r.n0,r.YG],styles:[""]}),m)}],b=function(){var i=function i(){e(this,i)};return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=g.oAB({type:i}),i.\u0275inj=g.cJS({imports:[[l.Bz.forChild(v)],l.Bz]}),i}(),A=((Z=function i(){e(this,i)}).\u0275fac=function(e){return new(e||Z)},Z.\u0275mod=g.oAB({type:Z}),Z.\u0275inj=g.cJS({imports:[[a.ez,s.u5,r.Pc,b]]}),Z)}}])}();