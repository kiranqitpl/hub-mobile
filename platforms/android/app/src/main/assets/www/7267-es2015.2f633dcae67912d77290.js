(self.webpackChunkhub=self.webpackChunkhub||[]).push([[7267],{87267:function(i,e,t){"use strict";t.r(e),t.d(e,{NotificationPageModule:function(){return v}});var o=t(38583),n=t(90665),a=t(47823),s=t(10649),r=t(92340),c=t(10639),l=t(89985),h=t(49481),u=t(68366);function d(i,e){if(1&i){const i=c.EpF();c.TgZ(0,"ion-row"),c._UZ(1,"ion-col",4),c.TgZ(2,"ion-col",5),c.TgZ(3,"ion-icon",6),c.NdJ("click",function(){return c.CHM(i),c.oxw().onDelete()}),c.qZA(),c.qZA(),c.qZA()}}function f(i,e){if(1&i){const i=c.EpF();c.TgZ(0,"ion-row"),c._UZ(1,"ion-col",7),c.TgZ(2,"ion-col",8),c.TgZ(3,"ion-checkbox",9),c.NdJ("ionChange",function(){const e=c.CHM(i).$implicit;return c.oxw().onDeleteDataSelect(e.id)}),c.qZA(),c.qZA(),c.TgZ(4,"ion-col",10),c.NdJ("click",function(){const e=c.CHM(i).$implicit;return c.oxw().onNotificationDetaliPage(e.id,e.form_id,e.form_type,e.is_seen)}),c._uU(5),c.qZA(),c._UZ(6,"ion-col",7),c.qZA()}if(2&i){const i=e.$implicit;c.xp6(5),c.hij(" ",i.message," ")}}const g=[{path:"",component:(()=>{class i{constructor(i,e,t){this.nav=i,this.globalService=e,this.sharedService=t,this.pName="Notifications",this.type=r.N.allType,this.notificationId=[],this.notificationData="",this.loggedInUser="",this.size=10,this.totalElements=0,this.pageNumber=0,this.offset=0}ngOnInit(){this.loggedInUser=JSON.parse(localStorage.getItem("userDetails")),this.onNotificationLoad()}onNotificationLoad(){this.globalService.presentLoading(),this.globalService.getData("notification/getNotificationList/"+this.loggedInUser.id).subscribe(i=>{console.log("result",i),i&&i.row_count>0?(this.notificationData=i.data,this.totalElements=i.row_count):this.notificationData=[],console.log("this.notificationData ",this.notificationData),this.globalService.dismissLoading()})}filterArrayData(i){let e=[];return e.result=!1,this.notificationId.filter((t,o)=>{t==i&&(e.result=!0,e.index=o)}),e}onDeleteDataSelect(i){let e=this.filterArrayData(i);e.result?this.notificationId.splice(e.index,1):this.notificationId.push(i)}onDelete(){if(0!=this.notificationId.length){this.globalService.presentLoading();let i=new FormData;i.append("id",JSON.stringify(this.notificationId)),this.globalService.postData("notification/deleteNotificationByNotificationID",i).subscribe(i=>{i&&i.status&&this.onNotificationLoad(),this.globalService.presentToast(i.message),this.globalService.dismissLoading()})}}onNotificationDetaliPage(i,e,t,o){t==this.globalService.formType_user?this.nav.navigateRoot("/home/safety-menu/incident-details/"+e):t==this.globalService.formType_investigator&&this.nav.navigateForward("investigation-view/"+e),0==o&&this.globalService.getData("notification/changeNotificationSeen/"+i).subscribe(i=>{i.status&&(this.sharedService.notViewNotiCount=0!=this.sharedService.notViewNotiCount?this.sharedService.notViewNotiCount-1:0)})}}return i.\u0275fac=function(e){return new(e||i)(c.Y36(a.SH),c.Y36(l.U),c.Y36(h.F))},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-notification"]],decls:5,vars:3,consts:[[3,"pageName"],[1,"container"],[4,"ngIf"],[4,"ngFor","ngForOf"],["size","10"],["size","2"],["name","trash",3,"click"],["size-lg","2","size-md","2","size-sm","2","size-xl","2","size-xs","2"],["size-lg","1","size-md","1","size-sm","2","size-xl","2","size-xs","2"],[3,"ionChange"],["size-lg","7","size-md","7","size-sm","6","size-xl","6","size-xs","6",3,"click"]],template:function(i,e){1&i&&(c.TgZ(0,"ion-content"),c._UZ(1,"app-header",0),c.TgZ(2,"div",1),c.YNc(3,d,4,0,"ion-row",2),c.YNc(4,f,7,1,"ion-row",3),c.qZA(),c.qZA()),2&i&&(c.xp6(1),c.Q6J("pageName",e.pName),c.xp6(2),c.Q6J("ngIf",e.notificationData.length>0),c.xp6(1),c.Q6J("ngForOf",e.notificationData))},directives:[a.W2,u.G,o.O5,o.sg,a.Nd,a.wI,a.gu,a.nz,a.w],styles:[""]}),i})()}];let m=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[s.Bz.forChild(g)],s.Bz]}),i})();var p=t(69270);let v=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[o.ez,n.u5,a.Pc,m,p.I]]}),i})()},49481:function(i,e,t){"use strict";t.d(e,{F:function(){return c}});var o=t(64762),n=t(10639),a=t(89985),s=t(47823),r=t(84267);let c=(()=>{class i{constructor(i,e,t){this.globalService=i,this.actionSheetController=e,this.camera=t,this.notViewNotiCount=0,this.prestartMenu=[{menuName:"LV",route:"#",favorite:!1,position_in_list:1},{menuName:"Forklift",route:"#",favorite:!1,position_in_list:2},{menuName:"Telehandler",route:"/home/safety-menu/telehandler-add-form",favorite:!1,position_in_list:3},{menuName:"Crane",route:"/home/safety-menu/crane-add-form",favorite:!1,position_in_list:4},{menuName:"Vehicle Hoist",route:"/home/safety-menu/vehicle-hoist-add-form",favorite:!1,position_in_list:5}]}getBase64(i){return new Promise((e,t)=>{const o=new FileReader;o.readAsDataURL(i),o.onload=()=>e(o.result),o.onerror=i=>t(i)})}mobileUploadImages(){return(0,o.mG)(this,void 0,void 0,function*(){let i;const e=yield this.actionSheetController.create({header:"Select Image source",buttons:[{text:"Load from Library",handler:()=>i=this.pickImage(this.camera.PictureSourceType.PHOTOLIBRARY)},{text:"Use Camera",handler:()=>i=this.pickImage(this.camera.PictureSourceType.CAMERA)},{text:"Cancel",role:"cancel"}]});yield e.present()})}pickImage(i){return(0,o.mG)(this,void 0,void 0,function*(){const e={quality:100,sourceType:i,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE};yield this.camera.getPicture(e).then(i=>{console.log("imageData",i);let e="data:image/jpeg;base64,"+i;return console.log("pickImage",e),e},i=>{console.log("errOf Image ",i)})})}resize(i){return i.innerWidth?i.innerWidth:i.target.innerWidth}}return i.\u0275fac=function(e){return new(e||i)(n.LFG(a.U),n.LFG(s.BX),n.LFG(r.V1))},i.\u0275prov=n.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}]);